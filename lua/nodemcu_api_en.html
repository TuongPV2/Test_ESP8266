


<!DOCTYPE html>
<html lang="en" class=" is-copy-enabled">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=1020">
    
    
    <title>nodemcu_api_en · nodemcu/nodemcu-firmware Wiki · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="nodemcu/nodemcu-firmware" name="twitter:title" /><meta content="nodemcu-firmware - lua based interactive firmware for mcu like esp8266" name="twitter:description" /><meta content="https://avatars1.githubusercontent.com/u/9865736?v=3&amp;s=400" name="twitter:image:src" />
      <meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars1.githubusercontent.com/u/9865736?v=3&amp;s=400" property="og:image" /><meta content="nodemcu/nodemcu-firmware" property="og:title" /><meta content="https://github.com/nodemcu/nodemcu-firmware" property="og:url" /><meta content="nodemcu-firmware - lua based interactive firmware for mcu like esp8266" property="og:description" />
      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">
    <link rel="assets" href="https://assets-cdn.github.com/">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_wiki" data-pjax-transient>

        <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="C058A701:61BE:8BF8B2:55A0B978" name="octolytics-dimension-request_id" />
    
    <meta content="Rails, view, wiki#show" data-pjax-transient="true" name="analytics-event" />
    <meta class="js-ga-set" name="dimension1" content="Logged Out">
    <meta name="is-dotcom" content="true">
      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <link rel="icon" sizes="any" mask href="https://assets-cdn.github.com/pinned-octocat.svg">
      <meta name="theme-color" content="#4078c0">
      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">


    <meta content="authenticity_token" name="csrf-param" />
<meta content="NGOXc5TO4F8C5hr5SvvprEpjD2hkCn41GcZOptmQzHzhy5rDcLttTR0An6sOAmcIdT5kNbLRvlVRDN8EOlQS9Q==" name="csrf-token" />

    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github/index-8824a5ef57ac4ae0b5ca429778b9660b1c66d09deea2ff11681de18d86a4bbb1.css" media="all" rel="stylesheet" />
    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github2/index-f0d033a37796c27f6b5b24aa8dc21af9c206a51ed2fe782d660dc20267c17d2b.css" media="all" rel="stylesheet" />
    
    


    <meta http-equiv="x-pjax-version" content="3f58d2288e653bc3998db56bf3ad89c7">

      
  <meta name="description" content="nodemcu-firmware - lua based interactive firmware for mcu like esp8266">
  <meta name="go-import" content="github.com/nodemcu/nodemcu-firmware git https://github.com/nodemcu/nodemcu-firmware.git">

  <meta content="9865736" name="octolytics-dimension-user_id" /><meta content="nodemcu" name="octolytics-dimension-user_login" /><meta content="26917568" name="octolytics-dimension-repository_id" /><meta content="nodemcu/nodemcu-firmware" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="26917568" name="octolytics-dimension-repository_network_root_id" /><meta content="nodemcu/nodemcu-firmware" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/nodemcu/nodemcu-firmware/commits/master.atom" rel="alternate" title="Recent Commits to nodemcu-firmware:master" type="application/atom+xml">

  </head>


  <body class="logged_out  env-production windows vis-public">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      



        
        <div class="header header-logged-out" role="banner">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions" role="navigation">
        <a class="btn btn-primary" href="/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      <a class="btn" href="/login?return_to=%2Fnodemcu%2Fnodemcu-firmware%2Fwiki%2Fnodemcu_api_en" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
    </div>

    <div class="site-search repo-scope js-site-search" role="search">
      <form accept-charset="UTF-8" action="/nodemcu/nodemcu-firmware/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/nodemcu/nodemcu-firmware/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <label class="js-chromeless-input-container form-control">
    <div class="scope-badge">This repository</div>
    <input type="text"
      class="js-site-search-focus js-site-search-field is-clearable chromeless-input"
      data-hotkey="s"
      name="q"
      placeholder="Search"
      data-global-scope-placeholder="Search GitHub"
      data-repo-scope-placeholder="Search"
      tabindex="1"
      autocapitalize="off">
  </label>
</form>
    </div>

      <ul class="header-nav left" role="navigation">
          <li class="header-nav-item">
            <a class="header-nav-link" href="/explore" data-ga-click="(Logged out) Header, go to explore, text:explore">Explore</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/features" data-ga-click="(Logged out) Header, go to features, text:features">Features</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://enterprise.github.com/" data-ga-click="(Logged out) Header, go to enterprise, text:enterprise">Enterprise</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/blog" data-ga-click="(Logged out) Header, go to blog, text:blog">Blog</a>
          </li>
      </ul>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">

        
<ul class="pagehead-actions">

  <li>
      <a href="/login?return_to=%2Fnodemcu%2Fnodemcu-firmware"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <span class="octicon octicon-eye"></span>
    Watch
  </a>
  <a class="social-count" href="/nodemcu/nodemcu-firmware/watchers">
    243
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fnodemcu%2Fnodemcu-firmware"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="/nodemcu/nodemcu-firmware/stargazers">
      1,021
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fnodemcu%2Fnodemcu-firmware"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="/nodemcu/nodemcu-firmware/network" class="social-count">
        429
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="/nodemcu" class="url fn" itemprop="url" rel="author"><span itemprop="title">nodemcu</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="/nodemcu/nodemcu-firmware" data-pjax="#js-repo-pjax-container">nodemcu-firmware</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders"
     role="navigation"
     data-pjax="#js-repo-pjax-container"
     data-issue-count-url="/nodemcu/nodemcu-firmware/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="/nodemcu/nodemcu-firmware" aria-label="Code" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /nodemcu/nodemcu-firmware">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="/nodemcu/nodemcu-firmware/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /nodemcu/nodemcu-firmware/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="js-issue-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull requests">
      <a href="/nodemcu/nodemcu-firmware/pulls" aria-label="Pull requests" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /nodemcu/nodemcu-firmware/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull requests</span>
          <span class="js-pull-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Wiki">
        <a href="/nodemcu/nodemcu-firmware/wiki" aria-label="Wiki" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g w" data-selected-links="repo_wiki /nodemcu/nodemcu-firmware/wiki">
          <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="/nodemcu/nodemcu-firmware/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /nodemcu/nodemcu-firmware/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="/nodemcu/nodemcu-firmware/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /nodemcu/nodemcu-firmware/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>
  </ul>


</nav>

              <div class="only-with-full-nav">
                  
<div class="js-clone-url clone-url open"
  data-protocol-type="http">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/nodemcu/nodemcu-firmware.git" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="js-clone-url clone-url "
  data-protocol-type="subversion">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/nodemcu/nodemcu-firmware" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



<div class="clone-options">You can clone with
  <form accept-charset="UTF-8" action="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="2bY6kvPLyZFfruial2L2ACOmQC6dyTf5wM5QUFvOJiwS2qucHvcq9zobJRA4knh8g/GUHPQ9Ax/wbhGR472ycw==" /></div><button class="btn-link js-clone-selector" data-protocol="http" type="submit">HTTPS</button></form> or <form accept-charset="UTF-8" action="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="uOUqmlnwK9MxBZ5p5WfW+1n0rDdie+rk0T32MVD3hEl1QxibeLajEohZrb5OCQwVzP12CVnsyWTE69A3K2+VLw==" /></div><button class="btn-link js-clone-selector" data-protocol="subversion" type="submit">Subversion</button></form>.
  <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <span class="octicon octicon-question"></span>
  </a>
</div>


  <a href="https://windows.github.com" class="btn btn-sm sidebar-button" title="Save nodemcu/nodemcu-firmware to your computer and use it in GitHub Desktop." aria-label="Save nodemcu/nodemcu-firmware to your computer and use it in GitHub Desktop.">
    <span class="octicon octicon-device-desktop"></span>
    Clone in Desktop
  </a>


                <a href="/nodemcu/nodemcu-firmware/archive/master.zip"
                   class="btn btn-sm sidebar-button"
                   aria-label="Download the contents of nodemcu/nodemcu-firmware as a zip file"
                   title="Download the contents of nodemcu/nodemcu-firmware as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>

          

<div id="wiki-wrapper" class="wiki-wrapper page">
<div class="gh-header">
  <div class="gh-header-show">
    <h1 class="gh-header-title instapaper_title">nodemcu_api_en</h1>
      <div class="gh-header-meta">
        Victor Santos edited this page <time datetime="2015-07-09T00:20:04Z" is="relative-time">Jul 8, 2015</time>
        &middot;
        <a href="/nodemcu/nodemcu-firmware/wiki/nodemcu_api_en/_history" class="history">
          102 revisions
        </a>
      </div>
  </div>
</div>
<div id="wiki-content">
  <div class="wrap has-rightbar">

  <div id="wiki-rightbar">
    <div class="wiki-pages-box readability-sidebar boxed-group flush js-wiki-pages-box " role="navigation">
      
<h3 class="js-wiki-toggle-collapse wiki-auxiliary-content">
  <span class="octicon octicon-triangle-down caret-expanded"></span>
  <span class="octicon octicon-triangle-right caret-collapsed"></span>
  Pages <span class="counter">5</span>
</h3>
<div class="boxed-group-inner wiki-auxiliary-content wiki-auxiliary-content-no-bg">

  <ul class="wiki-pages" data-filterable-for="wiki-pages-filter" data-filterable-type="substring">
    <li>
      <strong><a href="/nodemcu/nodemcu-firmware/wiki" class="wiki-page-link">Home</a></strong>
    </li>
    <li>
      <strong><a href="/nodemcu/nodemcu-firmware/wiki/nodemcu_api_cn" class="wiki-page-link">nodemcu_api_cn</a></strong>
    </li>
    <li>
      <strong><a href="/nodemcu/nodemcu-firmware/wiki/nodemcu_api_en" class="wiki-page-link">nodemcu_api_en</a></strong>
    </li>
    <li>
      <strong><a href="/nodemcu/nodemcu-firmware/wiki/nodemcu_api_en-(dev096)" class="wiki-page-link">nodemcu_api_en (dev096)</a></strong>
    </li>
    <li>
      <strong><a href="/nodemcu/nodemcu-firmware/wiki/nodemcu_api_ru" class="wiki-page-link">nodemcu_api_ru</a></strong>
    </li>
  </ul>
</div>

    </div>


    <div class="clone-url">
      <h5>Clone this wiki locally</h5>
      <div class="input-group js-zeroclipboard-container">
        <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
               value="https://github.com/nodemcu/nodemcu-firmware.wiki.git" readonly="readonly">
        <span class="input-group-button">
          <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
        </span>
      </div>


        <a href="https://windows.github.com"
           class="btn btn-sm sidebar-button"
           title="Save this wiki to your computer and use it in GitHub Desktop."
           aria-label="Save this wiki to your computer and use it in GitHub Desktop.">
          <span class="octicon octicon-device-desktop"></span>
          Clone in Desktop
        </a>
    </div>
  </div>

  <div id="wiki-body" class="gollum-markdown-content instapaper_body">
    <div class="markdown-body">
      <h1>
<a id="user-content-nodemcu-api-instruction" class="anchor" href="#nodemcu-api-instruction" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>NodeMCU API Instruction</strong>
</h1>

<h3>
<a id="user-content-version-095-build-2015-02-13" class="anchor" href="#version-095-build-2015-02-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>version 0.9.5 build 2015-02-13</h3>

<h2>
<a id="user-content-index" class="anchor" href="#index" aria-hidden="true"><span class="octicon octicon-link"></span></a>INDEX</h2>

<ul>
<li><a href="https://github.com/nodemcu/nodemcu-firmware/wiki">Change Log</a></li>
<li><a href="#new_gpio_map">New GPIO Map</a></li>
<li><a href="#old_gpio_map">Old GPIO Map</a></li>
</ul>

<h3>
<a id="user-content-node-module" class="anchor" href="#node-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>node module</h3>

<ul>
<li><a href="#noderestart">node.restart()</a></li>
<li><a href="#nodedsleep">node.dsleep()</a></li>
<li><a href="#nodeinfo">node.info()</a></li>
<li><a href="#nodechipid">node.chipid()</a></li>
<li><a href="#nodeflashid">node.flashid()</a></li>
<li><a href="#nodeheap">node.heap()</a></li>
<li>
<a href="#nodekey">node.key()</a> --deprecated</li>
<li>
<a href="#nodeled">node.led()</a> --deprecated</li>
<li><a href="#nodeinput">node.input()</a></li>
<li><a href="#nodeoutput">node.output()</a></li>
<li>
<a href="#nodereadvdd33">node.readvdd33()</a> --deprecated, moved to adc.readvdd33()</li>
<li><a href="#nodecompile">node.compile()</a></li>
<li><a href="#nodesetcpufreq">node.setcpufreq()</a></li>
<li>
<a href="#noderestore">node.restore()</a> --Added on 07/04/2015</li>
</ul>

<h3>
<a id="user-content-file-module" class="anchor" href="#file-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>file module</h3>

<ul>
<li><a href="#fileremove">file.remove()</a></li>
<li><a href="#fileopen">file.open()</a></li>
<li><a href="#fileclose">file.close()</a></li>
<li><a href="#filereadline">file.readline()</a></li>
<li><a href="#filewriteline">file.writeline()</a></li>
<li><a href="#fileread">file.read()</a></li>
<li><a href="#filewrite">file.write()</a></li>
<li><a href="#fileflush">file.flush()</a></li>
<li><a href="#fileseek">file.seek()</a></li>
<li><a href="#filelist">file.list()</a></li>
<li><a href="#fileformat">file.format()</a></li>
<li><a href="#filerename">file.rename()</a></li>
<li><a href="#filefsinfo">file.fsinfo()</a></li>
</ul>

<h3>
<a id="user-content-wifi-module" class="anchor" href="#wifi-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi module</h3>

<ul>
<li><a href="#wifisetmode">wifi.setmode()</a></li>
<li><a href="#wifigetmode">wifi.getmode()</a></li>
<li>
<a href="#wifigetchannel">wifi.getchannel()</a> --Added on 06/16/2015</li>
<li>
<a href="#wifisetphymode">wifi.setphymode()</a> --Added on 06/16/2015</li>
<li>
<a href="#wifigetphymode">wifi.getphymode()</a> --Added on 06/16/2015</li>
<li><a href="#wifistartsmart">wifi.startsmart()</a></li>
<li><a href="#wifistopsmart">wifi.stopsmart()</a></li>
<li><a href="#wifisleeptype">wifi.sleeptype()</a></li>
</ul>

<h3>
<a id="user-content-wifista-sub-module" class="anchor" href="#wifista-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta sub-module</h3>

<ul>
<li>
<a href="#wifistagetconfig">wifi.sta.getconfig()</a> --Added on 06/16/2015</li>
<li>
<a href="#wifistaconfig">wifi.sta.config()</a> --Updated on 06/16/2015</li>
<li><a href="#wifistaconnect">wifi.sta.connect()</a></li>
<li><a href="#wifistadisconnect">wifi.sta.disconnect()</a></li>
<li><a href="#wifistaautoconnect">wifi.sta.autoconnect()</a></li>
<li><a href="#wifistagetip">wifi.sta.getip()</a></li>
<li><a href="#wifistasetip">wifi.sta.setip()</a></li>
<li>
<a href="#wifistagetmac">wifi.sta.getmac()</a> --Updated on 06/16/2015</li>
<li>
<a href="#wifistasetmac">wifi.sta.setmac()</a> --Updated on 06/16/2015</li>
<li>
<a href="#wifistagetap">wifi.sta.getap()</a> --Updated on 06/16/2015</li>
<li><a href="#wifistastatus">wifi.sta.status()</a></li>
<li><a href="#wifistagetbroadcast">wifi.sta.getbroadcast()</a></li>
</ul>

<h3>
<a id="user-content-wifiap-sub-module" class="anchor" href="#wifiap-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap sub-module</h3>

<ul>
<li><a href="#wifiapconfig">wifi.ap.config()</a></li>
<li><a href="#wifiapgetip">wifi.ap.getip()</a></li>
<li><a href="#wifiapsetip">wifi.ap.setip()</a></li>
<li><a href="#wifiapgetmac">wifi.ap.getmac()</a></li>
<li>
<a href="#wifiapsetmac">wifi.ap.setmac()</a> --Updated on 06/16/2015</li>
<li><a href="#wifiapgetbroadcast">wifi.ap.getbroadcast()</a></li>
</ul>

<h3>
<a id="user-content-timer-module" class="anchor" href="#timer-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>timer module</h3>

<ul>
<li><a href="#tmrdelay">tmr.delay()</a></li>
<li><a href="#tmrnow">tmr.now()</a></li>
<li><a href="#tmralarm">tmr.alarm()</a></li>
<li><a href="#tmrstop">tmr.stop()</a></li>
<li><a href="#tmrwdclr">tmr.wdclr()</a></li>
<li><a href="#tmrtime">tmr.time()</a></li>
</ul>

<h3>
<a id="user-content-gpio-module" class="anchor" href="#gpio-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>gpio module</h3>

<ul>
<li><a href="#gpiomode">gpio.mode()</a></li>
<li><a href="#gpioread">gpio.read()</a></li>
<li><a href="#gpiowrite">gpio.write()</a></li>
<li><a href="#gpiotrig">gpio.trig()</a></li>
</ul>

<h3>
<a id="user-content-pwm-module" class="anchor" href="#pwm-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm module</h3>

<ul>
<li><a href="#pwmsetup">pwm.setup()</a></li>
<li><a href="#pwmclose">pwm.close()</a></li>
<li><a href="#pwmstart">pwm.start()</a></li>
<li><a href="#pwmstop">pwm.stop()</a></li>
<li><a href="#pwmsetclock">pwm.setclock()</a></li>
<li><a href="#pwmgetclock">pwm.getclock()</a></li>
<li><a href="#pwmsetduty">pwm.setduty()</a></li>
<li><a href="#pwmgetduty">pwm.getduty()</a></li>
</ul>

<h3>
<a id="user-content-net-module" class="anchor" href="#net-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>net module</h3>

<ul>
<li><a href="#netcreateserver">net.createServer()</a></li>
<li><a href="#netcreateconnection">net.createConnection()</a></li>
</ul>

<h3>
<a id="user-content-netserver-sub-module" class="anchor" href="#netserver-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.server sub-module</h3>

<ul>
<li><a href="#netserverlisten">net.server:listen()</a></li>
<li><a href="#netserverclose">net.server:close()</a></li>
</ul>

<h3>
<a id="user-content-netsocket-sub-module" class="anchor" href="#netsocket-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket sub-module</h3>

<ul>
<li><a href="#netsocketconnect">net.socket:connect()</a></li>
<li><a href="#netsocketsend">net.socket:send()</a></li>
<li><a href="#netsocketon">net.socket:on()</a></li>
<li><a href="#netsocketclose">net.socket:close()</a></li>
<li><a href="#netsocketdns">net.socket:dns()</a></li>
</ul>

<h3>
<a id="user-content-i2c-module" class="anchor" href="#i2c-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c module</h3>

<ul>
<li><a href="#i2csetup">i2c.setup()</a></li>
<li><a href="#i2cstart">i2c.start()</a></li>
<li><a href="#i2cstop">i2c.stop()</a></li>
<li><a href="#i2caddress">i2c.address()</a></li>
<li><a href="#i2cwrite">i2c.write()</a></li>
<li><a href="#i2cread">i2c.read()</a></li>
</ul>

<h3>
<a id="user-content-adc-module" class="anchor" href="#adc-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>adc module</h3>

<ul>
<li><a href="#adcread">adc.read()</a></li>
<li><a href="#adcreadvdd33">adc.readvdd33()</a></li>
</ul>

<h3>
<a id="user-content-uart-module" class="anchor" href="#uart-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>uart module</h3>

<ul>
<li><a href="#uartsetup">uart.setup()</a></li>
<li><a href="#uarton">uart.on()</a></li>
<li><a href="#uartwrite">uart.write()</a></li>
</ul>

<h3>
<a id="user-content-1-wire-module" class="anchor" href="#1-wire-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>1-wire module</h3>

<ul>
<li><a href="#owsetup">ow.setup()</a></li>
<li><a href="#owreset">ow.reset()</a></li>
<li><a href="#owskip">ow.skip()</a></li>
<li><a href="#owselect">ow.select()</a></li>
<li><a href="#owwrite">ow.write()</a></li>
<li><a href="#owwritebytes">ow.write_bytes()</a></li>
<li><a href="#owread">ow.read()</a></li>
<li><a href="#owreadbytes">ow.read_bytes()</a></li>
<li><a href="#owdepower">ow.depower()</a></li>
<li><a href="#owresetsearch">ow.reset_search()</a></li>
<li><a href="#owtargetsearch">ow.target_search()</a></li>
<li><a href="#owsearch">ow.search()</a></li>
<li><a href="#owcrc8">ow.crc8()</a></li>
<li><a href="#owcheckcrc16">ow.check_crc16()</a></li>
<li><a href="#owcrc16">ow.crc16()</a></li>
</ul>

<h3>
<a id="user-content-bit-module" class="anchor" href="#bit-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit module</h3>

<ul>
<li><a href="#bitbnot">bit.bnot()</a></li>
<li><a href="#bitband">bit.band()</a></li>
<li><a href="#bitbor">bit.bor()</a></li>
<li><a href="#bitbxor">bit.bxor()</a></li>
<li><a href="#bitlshift">bit.lshift()</a></li>
<li><a href="#bitrshift">bit.rshift()</a></li>
<li><a href="#bitarshift">bit.arshift()</a></li>
<li><a href="#bitbit">bit.bit()</a></li>
<li><a href="#bitset">bit.set()</a></li>
<li><a href="#bitclear">bit.clear()</a></li>
<li><a href="#bitisset">bit.isset()</a></li>
<li><a href="#bitisclear">bit.isclear()</a></li>
</ul>

<h3>
<a id="user-content-spi-module" class="anchor" href="#spi-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>spi module</h3>

<ul>
<li><a href="#spisetup">spi.setup()</a></li>
<li><a href="#spisend">spi.send()</a></li>
<li><a href="#spirecv">spi.recv()</a></li>
</ul>

<h3>
<a id="user-content-mqtt-module" class="anchor" href="#mqtt-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt module</h3>

<ul>
<li><a href="#mqttclient">mqtt.Client()</a></li>
</ul>

<h3>
<a id="user-content-mqttclient-sub-module" class="anchor" href="#mqttclient-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client sub-module</h3>

<ul>
<li><a href="#mqttclientlwt">mqtt.client:lwt()</a></li>
<li><a href="#mqttclientconnect">mqtt.client:connect()</a></li>
<li><a href="#mqttclientclose">mqtt.client:close()</a></li>
<li><a href="#mqttclientpublish">mqtt.client:publish()</a></li>
<li><a href="#mqttclientsubscribe">mqtt.client:subscribe()</a></li>
<li><a href="#mqttclienton">mqtt.client:on()</a></li>
</ul>

<h3>
<a id="user-content-ws2812-module" class="anchor" href="#ws2812-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>WS2812 module</h3>

<ul>
<li><a href="#ws2812_writergb">ws2812.writergb()</a></li>
</ul>

<h3>
<a id="user-content-cjson-module" class="anchor" href="#cjson-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>cjson module</h3>

<ul>
<li><a href="#cjson_encode">cjson.encode()</a></li>
<li><a href="#cjson_decode">cjson.decode()</a></li>
</ul>

<h3>
<a id="user-content-crypto-module" class="anchor" href="#crypto-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>crypto module</h3>

<ul>
<li><a href="#crypto_hash">crypto.hash()</a></li>
<li><a href="#crypto_hmac">crypto.hmac()</a></li>
<li><a href="#crypto_mask">crypto.mask()</a></li>
<li><a href="#crypto_tohex">crypto.toHex()</a></li>
<li><a href="#crypto_tobase64">crypto.toBase64()</a></li>
</ul>

<h3>
<a id="user-content-u8g-module" class="anchor" href="#u8g-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g module</h3>

<ul>
<li><a href="#u8g_ssd1306_128x64_i2c">u8g.ssd1306_128x64_i2c()</a></li>
<li><a href="#u8g_ssd1306_128x64_spi">u8g.ssd1306_128x64_spi()</a></li>
<li><a href="#u8g.pcd8544_84x48">u8g.pcd8544_84x48()</a></li>
</ul>

<h3>
<a id="user-content-u8gdisp-sub-module" class="anchor" href="#u8gdisp-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g.disp sub-module</h3>

<ul>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#begin">u8g.disp:begin()</a></li>
<li><a href="#u8gdisp_drawBitmap">u8g.disp:drawBitmap()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawBox">u8g.disp:drawBox()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawCircle">u8g.disp:drawCircle()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawDisc">u8g.disp:drawDisc()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawEllipse">u8g.disp:drawEllipse()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawFilledEllipse">u8g.disp:drawFilledEllipse()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawFrame">u8g.disp:drawFrame()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawHLine">u8g.disp:drawHLine()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawLine">u8g.disp:drawLine()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawPixel">u8g.disp:drawPixel()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawRBox">u8g.disp:drawRBox()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawRFrame">u8g.disp:drawRFrame()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawStr">u8g.disp:drawStr()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawStr90">u8g.disp:drawStr90()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawStr180">u8g.disp:drawStr180()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawStr270">u8g.disp:drawStr270()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawTriangle">u8g.disp:drawTriangle()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#drawVLine">u8g.disp:drawVLine()</a></li>
<li><a href="#u8gdisp_drawXBM">u8g.disp:drawXBM()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#firstPage">u8g.disp:firstPage()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getColorIndex">u8g.disp:getColorIndex()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getFontAscent">u8g.disp:getFontAscent()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getFontDescent">u8g.disp:getFontDescent()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getFontLineSpacing">u8g.disp:getFontLineSpacing()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getHeight">u8g.disp:getHeight()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getMode">u8g.disp:getMode()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getWidth">u8g.disp:getWidth()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#getStrWidth">u8g.disp:getStrWidth()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#nextPage">u8g.disp:nextPage()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setColorIndex">u8g.disp:setColorIndex()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setDefaultBackgroundColor">u8g.disp:setDefaultBackgroundColor()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setDefaultForegroundColor">u8g.disp:setDefaultForegroundColor()</a></li>
<li><a href="#u8gdisp_setFont">u8g.disp:setFont()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontLineSpacingFactor">u8g.disp:setFontLineSpacingFactor()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontPosBaseline">u8g.disp:setFontPosBaseline()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontPosBottom">u8g.disp:setFontPosBottom()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontPosCenter">u8g.disp:setFontPosCenter()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontPosTop">u8g.disp:setFontPosTop()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontRefHeightAll">u8g.disp:setFontRefHeightAll()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontRefHeightExtendedText">u8g.disp:setFontRefHeightExtendedText()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setFontRefHeightText">u8g.disp:setFontRefHeightText()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setRot90">u8g.disp:setRot90()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setRot180">u8g.disp:setRot180()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setRot270">u8g.disp:setRot270()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#setScale2x2">u8g.disp:setScale2x2()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#sleepOn">u8g.disp:sleepOn()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#sleepOff">u8g.disp:sleepOff()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#undoRotation">u8g.disp:undoRotation()</a></li>
<li><a href="https://code.google.com/p/u8glib/wiki/userreference#undoScale">u8g.disp:undoScale()</a></li>
</ul>

<h3>
<a id="user-content-dht-module" class="anchor" href="#dht-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>dht module</h3>

<ul>
<li><a href="#dhtread">dht.read()</a></li>
<li><a href="#dhtread11">dht.read11()</a></li>
<li><a href="#dhtreadxx">dht.readxx()</a></li>
</ul>

<p><strong>-</strong><a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-summary" class="anchor" href="#summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary</h1>

<ul>
<li>Easy to access wireless router</li>
<li>Based on Lua 5.1.4, Developers are supposed to have experience with Lua Program language.</li>
<li>Event-Drive programming modal.</li>
<li>Build-in file, timer, pwm, i2c, net, gpio, wifi, uart, adc module.</li>
<li>Serial Port BaudRate:9600</li>
<li>Re-mapped GPIO pin, use the index to program gpio, i2c, pwm.</li>
<li>GPIO Map Table:</li>
</ul>

<h2>
<a id="user-content-gpio-new-table--build-20141219-and-later" class="anchor" href="#gpio-new-table--build-20141219-and-later" aria-hidden="true"><span class="octicon octicon-link"></span></a>GPIO NEW TABLE ( Build 20141219 and later)</h2>

<h2>
<a id="user-content-new_gpio_map" class="anchor" href="#new_gpio_map" aria-hidden="true"><span class="octicon octicon-link"></span></a>new_gpio_map</h2>

<table>
<thead>
<tr>
<th align="right">IO index</th>
<th align="left">ESP8266 pin</th>
<th align="right">IO index</th>
<th align="left">ESP8266 pin</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0 [*]</td>
<td align="left">GPIO16</td>
<td align="right">7</td>
<td align="left">GPIO13</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">GPIO5</td>
<td align="right">8</td>
<td align="left">GPIO15</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">GPIO4</td>
<td align="right">9</td>
<td align="left">GPIO3</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">GPIO0</td>
<td align="right">10</td>
<td align="left">GPIO1</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">GPIO2</td>
<td align="right">11</td>
<td align="left">GPIO9</td>
</tr>
<tr>
<td align="right">5</td>
<td align="left">GPIO14</td>
<td align="right">12</td>
<td align="left">GPIO10</td>
</tr>
<tr>
<td align="right">6</td>
<td align="left">GPIO12</td>
<td align="right"></td>
<td align="left"></td>
</tr>
</tbody>
</table>

<p>** [<em>] D0(GPIO16) can only be used as gpio read/write. no interrupt supported. no pwm/i2c/ow supported. *</em></p>

<h4>
<a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>      gpio <span class="pl-k">=</span> {[<span class="pl-c1">0</span>]<span class="pl-k">=</span><span class="pl-c1">3</span>,[<span class="pl-c1">1</span>]<span class="pl-k">=</span><span class="pl-c1">10</span>,[<span class="pl-c1">2</span>]<span class="pl-k">=</span><span class="pl-c1">4</span>,[<span class="pl-c1">3</span>]<span class="pl-k">=</span><span class="pl-c1">9</span>,[<span class="pl-c1">4</span>]<span class="pl-k">=</span><span class="pl-c1">1</span>,[<span class="pl-c1">5</span>]<span class="pl-k">=</span><span class="pl-c1">2</span>,[<span class="pl-c1">10</span>]<span class="pl-k">=</span><span class="pl-c1">12</span>,[<span class="pl-c1">12</span>]<span class="pl-k">=</span><span class="pl-c1">6</span>,[<span class="pl-c1">14</span>]<span class="pl-k">=</span><span class="pl-c1">5</span>,[<span class="pl-c1">15</span>]<span class="pl-k">=</span><span class="pl-c1">8</span>,[<span class="pl-c1">16</span>]<span class="pl-k">=</span><span class="pl-c1">0</span>}

      pin <span class="pl-k">=</span> gpio[<span class="pl-c1">2</span>] <span class="pl-c">-- connect the signal wire to pin 4</span></pre></div>

<p><strong>-</strong><a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-gpio-old-table-before-build-20141212" class="anchor" href="#gpio-old-table-before-build-20141212" aria-hidden="true"><span class="octicon octicon-link"></span></a>GPIO OLD TABLE (Before build 20141212)</h2>

<h2>
<a id="user-content-old_gpio_map" class="anchor" href="#old_gpio_map" aria-hidden="true"><span class="octicon octicon-link"></span></a>old_gpio_map</h2>

<table>
<thead>
<tr>
<th align="right">IO index</th>
<th align="left">ESP8266 pin</th>
<th align="right">IO index</th>
<th align="left">ESP8266 pin</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">GPIO12</td>
<td align="right">6</td>
<td align="left">GPIO9</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">GPIO13</td>
<td align="right">7</td>
<td align="left">GPIO10</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">GPIO14</td>
<td align="right">8</td>
<td align="left">GPIO0</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">GPIO15</td>
<td align="right">9</td>
<td align="left">GPIO2</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">GPIO3</td>
<td align="right">10</td>
<td align="left">GPIO4</td>
</tr>
<tr>
<td align="right">5</td>
<td align="left">GPIO1</td>
<td align="right">11</td>
<td align="left">GPIO5</td>
</tr>
</tbody>
</table>

<p><strong>-</strong><a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-burnflash-firmware" class="anchor" href="#burnflash-firmware" aria-hidden="true"><span class="octicon octicon-link"></span></a>Burn/Flash Firmware</h1>

<h3>
<a id="user-content-address" class="anchor" href="#address" aria-hidden="true"><span class="octicon octicon-link"></span></a>Address</h3>

<p>nodemcu_512k.bin: 0x00000<br>
See NodeMCU flash tool:<br>
<a href="https://github.com/nodemcu/nodemcu-flasher">nodemcu-flasher</a></p>

<h1>
<a id="user-content-node-module-1" class="anchor" href="#node-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>node module</h1>

<p><a></a></p>

<h2>
<a id="user-content-noderestart" class="anchor" href="#noderestart" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.restart()</h2>

<h4>
<a id="user-content-description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>restart the chip.</p>

<h4>
<a id="user-content-syntax" class="anchor" href="#syntax" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.restart()</p>

<h4>
<a id="user-content-parameters" class="anchor" href="#parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<ul>
<li><code>nil</code></li>
</ul>

<h4>
<a id="user-content-returns" class="anchor" href="#returns" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<ul>
<li><code>nil</code></li>
</ul>

<h4>
<a id="user-content-example-1" class="anchor" href="#example-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    node.<span class="pl-c1">restart</span>();</pre></div>

<h4>
<a id="user-content-see-also" class="anchor" href="#see-also" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<ul>
<li><a href="#index">Back to Index</a></li>
</ul>

<p><a></a></p>

<h2>
<a id="user-content-nodedsleep" class="anchor" href="#nodedsleep" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.dsleep()</h2>

<h4>
<a id="user-content-description-1" class="anchor" href="#description-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Enter deep sleep mode, wake up when timed out.</p>

<h4>
<a id="user-content-syntax-1" class="anchor" href="#syntax-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p><code>node.dsleep(us, option)</code></p>

<p><strong>Note:</strong> This function can only be used in the condition that esp8266 PIN32(RST) and PIN8(XPD_DCDC aka GPIO16) are connected together. Using sleep(0) will set no wake up timer, connect a GPIO to pin RST, the chip will wake up by a falling-edge on pin RST.<br>
option=0, init data byte 108 is valuable;<br>
option&gt;0, init data byte 108 is valueless.<br>
More details as follows:<br>
0, RF_CAL or not after deep-sleep wake up, depends on init data byte 108.<br>
1, RF_CAL after deep-sleep wake up, there will belarge current.<br>
2, no RF_CAL after deep-sleep wake up, there will only be small current.<br>
4, disable RF after deep-sleep wake up, just like modem sleep, there will be the smallest current.</p>

<h4>
<a id="user-content-parameters-1" class="anchor" href="#parameters-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<ul>
<li><p><code>us</code>: number(Integer) or nil, sleep time in micro second. If us = 0, it will sleep forever. If us = nil, will not set sleep time.</p></li>
<li><p><code>option</code>: number(Integer) or nil. If option = nil, it will use last alive setting as default option.</p></li>
</ul>

<h4>
<a id="user-content-returns-1" class="anchor" href="#returns-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<ul>
<li><code>nil</code></li>
</ul>

<h4>
<a id="user-content-example-2" class="anchor" href="#example-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">--do nothing</span>
    node.<span class="pl-c1">dsleep</span>()
    <span class="pl-c">--sleep μs</span>
    node.<span class="pl-c1">dsleep</span>(<span class="pl-c1">1000000</span>)
    <span class="pl-c">--set sleep option, then sleep μs</span>
    node.<span class="pl-c1">dsleep</span>(<span class="pl-c1">1000000</span>, <span class="pl-c1">4</span>)
    <span class="pl-c">--set sleep option only</span>
    node.<span class="pl-c1">dsleep</span>(<span class="pl-c1">nil</span>,<span class="pl-c1">4</span>)</pre></div>

<h4>
<a id="user-content-see-also-1" class="anchor" href="#see-also-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodeinfo" class="anchor" href="#nodeinfo" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.info()</h2>

<h4>
<a id="user-content-description-2" class="anchor" href="#description-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>return NodeMCU version, chipid, flashid, flash size, flash mode, flash speed.</p>

<h4>
<a id="user-content-syntax-2" class="anchor" href="#syntax-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p><code>node.info()</code></p>

<h4>
<a id="user-content-parameters-2" class="anchor" href="#parameters-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<ul>
<li><code>nil</code></li>
</ul>

<h4>
<a id="user-content-returns-2" class="anchor" href="#returns-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<ul>
<li>
<code>majorVer</code> (number)</li>
<li>
<code>minorVer</code> (number)</li>
<li>
<code>devVer</code> (number)</li>
<li>
<code>chipid</code> (number)</li>
<li>
<code>flashid</code> (number)</li>
<li>
<code>flashsize</code> (number)</li>
<li>
<code>flashmode</code> (number)</li>
<li>
<code>flashspeed</code> (number)</li>
</ul>

<h4>
<a id="user-content-example-3" class="anchor" href="#example-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    majorVer, minorVer, devVer, chipid, flashid, flashsize, flashmode, flashspeed <span class="pl-k">=</span> node.<span class="pl-c1">info</span>();
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>NodeMCU <span class="pl-pds">"</span></span><span class="pl-k">..</span>majorVer<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span><span class="pl-k">..</span>minorVer<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span><span class="pl-k">..</span>devVer)</pre></div>

<h4>
<a id="user-content-see-also-2" class="anchor" href="#see-also-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodechipid" class="anchor" href="#nodechipid" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.chipid()</h2>

<h4>
<a id="user-content-description-3" class="anchor" href="#description-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>return chip ID</p>

<h4>
<a id="user-content-syntax-3" class="anchor" href="#syntax-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.chipid()</p>

<h4>
<a id="user-content-parameters-3" class="anchor" href="#parameters-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-3" class="anchor" href="#returns-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number:chip ID</p>

<h4>
<a id="user-content-example-4" class="anchor" href="#example-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    id <span class="pl-k">=</span> node.<span class="pl-c1">chipid</span>();</pre></div>

<h4>
<a id="user-content-see-also-3" class="anchor" href="#see-also-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodeflashid" class="anchor" href="#nodeflashid" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.flashid()</h2>

<h4>
<a id="user-content-description-4" class="anchor" href="#description-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>return flashid ID</p>

<h4>
<a id="user-content-syntax-4" class="anchor" href="#syntax-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.flashid()</p>

<h4>
<a id="user-content-parameters-4" class="anchor" href="#parameters-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-4" class="anchor" href="#returns-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number:flash ID</p>

<h4>
<a id="user-content-example-5" class="anchor" href="#example-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    flashid <span class="pl-k">=</span> node.<span class="pl-c1">flashid</span>();</pre></div>

<h4>
<a id="user-content-see-also-4" class="anchor" href="#see-also-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodeheap" class="anchor" href="#nodeheap" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.heap()</h2>

<h4>
<a id="user-content-description-5" class="anchor" href="#description-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>return the remain HEAP size in bytes</p>

<h4>
<a id="user-content-syntax-5" class="anchor" href="#syntax-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.heap()</p>

<h4>
<a id="user-content-parameters-5" class="anchor" href="#parameters-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-5" class="anchor" href="#returns-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: system heap size left in bytes</p>

<h4>
<a id="user-content-example-6" class="anchor" href="#example-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    heap_size <span class="pl-k">=</span> node.<span class="pl-c1">heap</span>();</pre></div>

<h4>
<a id="user-content-see-also-5" class="anchor" href="#see-also-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodekey" class="anchor" href="#nodekey" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.key()</h2>

<h4>
<a id="user-content-description-6" class="anchor" href="#description-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>define button function, button is connected to GPIO16.</p>

<h4>
<a id="user-content-syntax-6" class="anchor" href="#syntax-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.key(type, function())</p>

<h4>
<a id="user-content-parameters-6" class="anchor" href="#parameters-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>type: type is either string "long" or "short". long: press the key for 3 seconds, short: press shortly(less than 3 seconds)<br>
function(): user defined function which is called when key is pressed. If nil, cancling the user defined function.<br>
Default function: long: change LED blinking rate,  short: reset chip</p>

<h4>
<a id="user-content-returns-6" class="anchor" href="#returns-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-7" class="anchor" href="#example-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    node.<span class="pl-c1">key</span>(<span class="pl-s"><span class="pl-pds">"</span>long<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>() <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>hello world<span class="pl-pds">'</span></span>) <span class="pl-k">end</span>)</pre></div>

<h4>
<a id="user-content-see-also-6" class="anchor" href="#see-also-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#nodeled">node.led</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodeled" class="anchor" href="#nodeled" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.led()</h2>

<h4>
<a id="user-content-description-7" class="anchor" href="#description-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>setup the on/off time for led, which connected to GPIO16, multiplexing with node.key()</p>

<h4>
<a id="user-content-syntax-7" class="anchor" href="#syntax-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.led(low, high)</p>

<h4>
<a id="user-content-parameters-7" class="anchor" href="#parameters-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>Low: LED off time, LED keeps on when low=0. Unit: milliseconds, time resolution: 80~100ms<br>
High: LED on time. Unit: milliseconds, time resolution: 80~100ms</p>

<h4>
<a id="user-content-returns-7" class="anchor" href="#returns-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-8" class="anchor" href="#example-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- turn led on forever.</span>
    node.<span class="pl-c1">led</span>(<span class="pl-c1">0</span>);</pre></div>

<h4>
<a id="user-content-see-also-7" class="anchor" href="#see-also-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#nodekey">node.key</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodeinput" class="anchor" href="#nodeinput" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.input()</h2>

<h4>
<a id="user-content-description-8" class="anchor" href="#description-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>accept a string and put the string into Lua interpretor.<br>
same as pcall(loadstring(str)) but support multi seperated line.</p>

<h4>
<a id="user-content-syntax-8" class="anchor" href="#syntax-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.input(str)</p>

<h4>
<a id="user-content-parameters-8" class="anchor" href="#parameters-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>str: Lua chunk</p>

<h4>
<a id="user-content-returns-8" class="anchor" href="#returns-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-9" class="anchor" href="#example-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- never use node.input() in console. no effect.</span>
    sk:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>receive<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">conn, payload</span>) node.<span class="pl-c1">input</span>(payload) <span class="pl-k">end</span>)</pre></div>

<h4>
<a id="user-content-see-also-8" class="anchor" href="#see-also-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodeoutput" class="anchor" href="#nodeoutput" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.output()</h2>

<h4>
<a id="user-content-description-9" class="anchor" href="#description-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>direct output from lua interpretor to a call back function.</p>

<h4>
<a id="user-content-syntax-9" class="anchor" href="#syntax-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.output(function(str), serial_debug)</p>

<h4>
<a id="user-content-parameters-9" class="anchor" href="#parameters-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>function(str): a function accept every output as str, and can send the output to a socket.<br>
serial_debug: 1 output also show in serial. 0: no serial output.</p>

<h4>
<a id="user-content-returns-9" class="anchor" href="#returns-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-10" class="anchor" href="#example-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-k">function</span> <span class="pl-en">tonet</span>(<span class="pl-smi">str</span>)
      sk:<span class="pl-c1">send</span>(str)
      <span class="pl-c">-- print(str) WRONG!!! never ever print something in this function</span>
      <span class="pl-c">-- because this will cause a recursive function call!!!</span>
    <span class="pl-k">end</span>
    node.<span class="pl-c1">ouput</span>(tonet, <span class="pl-c1">1</span>)  <span class="pl-c">-- serial also get the lua output.</span></pre></div>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- a simple telnet server</span>
    s<span class="pl-k">=</span>net.<span class="pl-c1">createServer</span>(net.<span class="pl-smi">TCP</span>) 
    s:<span class="pl-c1">listen</span>(<span class="pl-c1">2323</span>,<span class="pl-k">function</span>(<span class="pl-smi">c</span>) 
       con_std <span class="pl-k">=</span> c 
       <span class="pl-k">function</span> <span class="pl-en">s_output</span>(<span class="pl-smi">str</span>) 
          <span class="pl-k">if</span>(con_std<span class="pl-k">~=</span><span class="pl-c1">nil</span>) 
             <span class="pl-k">then</span> con_std:<span class="pl-c1">send</span>(str) 
          <span class="pl-k">end</span> 
       <span class="pl-k">end</span> 
       node.<span class="pl-c1">output</span>(s_output, <span class="pl-c1">0</span>)   <span class="pl-c">-- re-direct output to function s_ouput.</span>
       c:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>receive<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>(<span class="pl-smi">c,l</span>) 
          node.<span class="pl-c1">input</span>(l)           <span class="pl-c">-- works like pcall(loadstring(l)) but support multiple separate line</span>
       <span class="pl-k">end</span>) 
       c:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>disconnection<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>(<span class="pl-smi">c</span>) 
          con_std <span class="pl-k">=</span> <span class="pl-c1">nil</span> 
          node.<span class="pl-c1">output</span>(<span class="pl-c1">nil</span>)        <span class="pl-c">-- un-regist the redirect output function, output goes to serial</span>
       <span class="pl-k">end</span>) 
    <span class="pl-k">end</span>)</pre></div>

<h4>
<a id="user-content-see-also-9" class="anchor" href="#see-also-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodereadvdd33" class="anchor" href="#nodereadvdd33" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.readvdd33()</h2>

<h4>
<a id="user-content-description-10" class="anchor" href="#description-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Reading vdd33 pin voltage</p>

<h4>
<a id="user-content-syntax-10" class="anchor" href="#syntax-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.readvdd33()</p>

<h4>
<a id="user-content-parameters-10" class="anchor" href="#parameters-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>no parameters</p>

<h4>
<a id="user-content-returns-10" class="anchor" href="#returns-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>mV</p>

<h4>
<a id="user-content-example-11" class="anchor" href="#example-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(node.<span class="pl-c1">readvdd33</span>())</pre></div>

<p>output</p>

<blockquote>
<p>3345</p>
</blockquote>

<div class="highlight highlight-lua"><pre>    v <span class="pl-k">=</span> node.<span class="pl-c1">readvdd33</span>() <span class="pl-k">/</span> <span class="pl-c1">1000</span>
    <span class="pl-c1">print</span>(v)
    v<span class="pl-k">=</span><span class="pl-c1">nil</span></pre></div>

<p>output</p>

<blockquote>
<p>3.315</p>
</blockquote>

<h4>
<a id="user-content-see-also-10" class="anchor" href="#see-also-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodecompile" class="anchor" href="#nodecompile" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.compile()</h2>

<h4>
<a id="user-content-description-11" class="anchor" href="#description-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>compile lua text file into lua bytecode file, and save it as .lc file.</p>

<h4>
<a id="user-content-syntax-11" class="anchor" href="#syntax-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.compile("file.lua")</p>

<h4>
<a id="user-content-parameters-11" class="anchor" href="#parameters-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>lua text file end with ".lua"</p>

<h4>
<a id="user-content-returns-11" class="anchor" href="#returns-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-12" class="anchor" href="#example-12" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>  file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>hello.lua<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>w+<span class="pl-pds">"</span></span>)
  file.<span class="pl-c1">writeline</span>(<span class="pl-s"><span class="pl-pds">[[</span>print("hello nodemcu")<span class="pl-pds">]]</span></span>)
  file.<span class="pl-c1">writeline</span>(<span class="pl-s"><span class="pl-pds">[[</span>print(node.heap())<span class="pl-pds">]]</span></span>)
  file.<span class="pl-c1">close</span>()

  node.<span class="pl-c1">compile</span>(<span class="pl-s"><span class="pl-pds">"</span>hello.lua<span class="pl-pds">"</span></span>)
  <span class="pl-c1">dofile</span>(<span class="pl-s"><span class="pl-pds">"</span>hello.lua<span class="pl-pds">"</span></span>)
  <span class="pl-c1">dofile</span>(<span class="pl-s"><span class="pl-pds">"</span>hello.lc<span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="user-content-see-also-11" class="anchor" href="#see-also-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-nodesetcpufreq" class="anchor" href="#nodesetcpufreq" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.setcpufreq()</h2>

<h4>
<a id="user-content-description-12" class="anchor" href="#description-12" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Change the working CPU Frequency</p>

<h4>
<a id="user-content-syntax-12" class="anchor" href="#syntax-12" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.setcpufreq(speed)</p>

<h4>
<a id="user-content-parameters-12" class="anchor" href="#parameters-12" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>speed: node.CPU80MHZ or node.CPU160MHZ</p>

<h4>
<a id="user-content-returns-12" class="anchor" href="#returns-12" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>return targe CPU Frequency</p>

<h4>
<a id="user-content-example-13" class="anchor" href="#example-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    node.<span class="pl-c1">setcpufreq</span>(node.<span class="pl-smi">CPU80MHZ</span>)</pre></div>

<h4>
<a id="user-content-see-also-12" class="anchor" href="#see-also-12" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-noderestore" class="anchor" href="#noderestore" aria-hidden="true"><span class="octicon octicon-link"></span></a>node.restore()</h2>

<h4>
<a id="user-content-description-13" class="anchor" href="#description-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Restore all configuration of Wi-Fi system.</p>

<h4>
<a id="user-content-syntax-13" class="anchor" href="#syntax-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>node.restore()</p>

<h4>
<a id="user-content-parameters-13" class="anchor" href="#parameters-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>none</p>

<h4>
<a id="user-content-returns-13" class="anchor" href="#returns-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>none</p>

<h4>
<a id="user-content-example-14" class="anchor" href="#example-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    node.<span class="pl-c1">restore</span>()</pre></div>

<h4>
<a id="user-content-see-also-13" class="anchor" href="#see-also-13" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-file-module-1" class="anchor" href="#file-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>file module</h1>

<p><a></a></p>

<h2>
<a id="user-content-fileremove" class="anchor" href="#fileremove" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.remove()</h2>

<h4>
<a id="user-content-description-14" class="anchor" href="#description-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>remove file from file system.</p>

<h4>
<a id="user-content-syntax-14" class="anchor" href="#syntax-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.remove(filename)</p>

<h4>
<a id="user-content-parameters-14" class="anchor" href="#parameters-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>filename: file to remove</p>

<h4>
<a id="user-content-returns-14" class="anchor" href="#returns-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-15" class="anchor" href="#example-15" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- remove "foo.lua" from file system.</span>
    file.<span class="pl-c1">remove</span>(<span class="pl-s"><span class="pl-pds">"</span>foo.lua<span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="user-content-see-also-14" class="anchor" href="#see-also-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_close">file.close()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-fileopen" class="anchor" href="#fileopen" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.open()</h2>

<h4>
<a id="user-content-description-15" class="anchor" href="#description-15" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>open file.</p>

<h4>
<a id="user-content-syntax-15" class="anchor" href="#syntax-15" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.open(filename, mode)</p>

<h4>
<a id="user-content-parameters-15" class="anchor" href="#parameters-15" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>filename: file to be opened, directories are not supported<br>
mode:<br></p>

<ul>
<li>   "r": read mode (the default)<br>
</li>
<li>   "w": write mode<br>
</li>
<li>   "a": append mode<br>
</li>
<li>   "r+": update mode, all previous data is preserved<br>
</li>
<li>   "w+": update mode, all previous data is erased<br>
</li>
<li>   "a+": append update mode, previous data is preserved, writing is only allowed at the end of file</li>
</ul>

<h4>
<a id="user-content-returns-15" class="anchor" href="#returns-15" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil: file not opened, or not exists.
true: file opened ok.</p>

<h4>
<a id="user-content-example-16" class="anchor" href="#example-16" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- open 'init.lua', print the first line.</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>)
    <span class="pl-c1">print</span>(file.<span class="pl-c1">readline</span>())
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-15" class="anchor" href="#see-also-15" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_close">file.close()</a><br>
<strong>-</strong>   <a href="#file_readline">file.readline()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-fileclose" class="anchor" href="#fileclose" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.close()</h2>

<h4>
<a id="user-content-description-16" class="anchor" href="#description-16" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>close the file.</p>

<h4>
<a id="user-content-syntax-16" class="anchor" href="#syntax-16" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.close()</p>

<h4>
<a id="user-content-parameters-16" class="anchor" href="#parameters-16" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-16" class="anchor" href="#returns-16" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-17" class="anchor" href="#example-17" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- open 'init.lua', print the first line.</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>)
    <span class="pl-c1">print</span>(file.<span class="pl-c1">readline</span>())
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-16" class="anchor" href="#see-also-16" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_readline">file.readline()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-filereadline" class="anchor" href="#filereadline" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.readline()</h2>

<h4>
<a id="user-content-description-17" class="anchor" href="#description-17" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read one line of file which is opened before.</p>

<h4>
<a id="user-content-syntax-17" class="anchor" href="#syntax-17" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.readline()</p>

<h4>
<a id="user-content-parameters-17" class="anchor" href="#parameters-17" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-17" class="anchor" href="#returns-17" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>file content in string, line by line, include EOL('\n')<br>
return nil when EOF.</p>

<h4>
<a id="user-content-example-18" class="anchor" href="#example-18" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print the first line of 'init.lua'</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>)
    <span class="pl-c1">print</span>(file.<span class="pl-c1">readline</span>())
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-17" class="anchor" href="#see-also-17" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_close">file.close()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-filewriteline" class="anchor" href="#filewriteline" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.writeline()</h2>

<h4>
<a id="user-content-description-18" class="anchor" href="#description-18" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>write string to file and add a '\n' at the end.</p>

<h4>
<a id="user-content-syntax-18" class="anchor" href="#syntax-18" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.writeline(string)</p>

<h4>
<a id="user-content-parameters-18" class="anchor" href="#parameters-18" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>string: content to be write to file</p>

<h4>
<a id="user-content-returns-18" class="anchor" href="#returns-18" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true: write ok.
nil: there is error</p>

<h4>
<a id="user-content-example-19" class="anchor" href="#example-19" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- open 'init.lua' in 'a+' mode</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a+<span class="pl-pds">"</span></span>)
    <span class="pl-c">-- write 'foo bar' to the end of the file</span>
    file.<span class="pl-c1">writeline</span>(<span class="pl-s"><span class="pl-pds">'</span>foo bar<span class="pl-pds">'</span></span>)
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-18" class="anchor" href="#see-also-18" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_write">file.write()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-fileread" class="anchor" href="#fileread" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.read()</h2>

<h4>
<a id="user-content-description-19" class="anchor" href="#description-19" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read content of file which is opened before.</p>

<h4>
<a id="user-content-syntax-19" class="anchor" href="#syntax-19" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.read()</p>

<h4>
<a id="user-content-parameters-19" class="anchor" href="#parameters-19" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>if nothing passed in, read all byte in file.
if pass a number n, then read n byte from file, or EOF is reached.
if pass a string "q", then read until 'q' or EOF is reached. </p>

<h4>
<a id="user-content-returns-19" class="anchor" href="#returns-19" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>file content in string<br>
return nil when EOF.</p>

<h4>
<a id="user-content-example-20" class="anchor" href="#example-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print the first line of 'init.lua'</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>)
    <span class="pl-c1">print</span>(file.<span class="pl-c1">read</span>(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\r</span><span class="pl-pds">'</span></span>))
    file.<span class="pl-c1">close</span>()

    <span class="pl-c">-- print the first 5 byte of 'init.lua'</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>)
    <span class="pl-c1">print</span>(file.<span class="pl-c1">read</span>(<span class="pl-c1">5</span>))
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-19" class="anchor" href="#see-also-19" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_close">file.close()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-filewrite" class="anchor" href="#filewrite" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.write()</h2>

<h4>
<a id="user-content-description-20" class="anchor" href="#description-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>write string to file.</p>

<h4>
<a id="user-content-syntax-20" class="anchor" href="#syntax-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.write(string)</p>

<h4>
<a id="user-content-parameters-20" class="anchor" href="#parameters-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>string: content to be write to file.</p>

<h4>
<a id="user-content-returns-20" class="anchor" href="#returns-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true: write ok.
nil: there is error</p>

<h4>
<a id="user-content-example-21" class="anchor" href="#example-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- open 'init.lua' in 'a+' mode</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a+<span class="pl-pds">"</span></span>)
    <span class="pl-c">-- write 'foo bar' to the end of the file</span>
    file.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>foo bar<span class="pl-pds">'</span></span>)
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-20" class="anchor" href="#see-also-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_writeline">file.writeline()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-fileflush" class="anchor" href="#fileflush" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.flush()</h2>

<h4>
<a id="user-content-description-21" class="anchor" href="#description-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>flush to file.</p>

<h4>
<a id="user-content-syntax-21" class="anchor" href="#syntax-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.flush()</p>

<h4>
<a id="user-content-parameters-21" class="anchor" href="#parameters-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-21" class="anchor" href="#returns-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-22" class="anchor" href="#example-22" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- open 'init.lua' in 'a+' mode</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a+<span class="pl-pds">"</span></span>)
    <span class="pl-c">-- write 'foo bar' to the end of the file</span>
    file.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>foo bar<span class="pl-pds">'</span></span>)
    file.<span class="pl-c1">flush</span>()
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-21" class="anchor" href="#see-also-21" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_writeline">file.writeline()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-fileseek" class="anchor" href="#fileseek" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.seek()</h2>

<h4>
<a id="user-content-description-22" class="anchor" href="#description-22" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Sets and gets the file position, measured from the beginning of the file, to the position given by offset plus a base specified by the string whence.</p>

<h4>
<a id="user-content-syntax-22" class="anchor" href="#syntax-22" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.seek(whence, offset)</p>

<h4>
<a id="user-content-parameters-22" class="anchor" href="#parameters-22" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>whence:<br>
"set": base is position 0 (beginning of the file);<br>
"cur": base is current position;(default value)<br>
"end": base is end of file;<br>
offset: default 0</p>

<h4>
<a id="user-content-returns-22" class="anchor" href="#returns-22" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>success: returns the final file position<br>
fail: returns nil</p>

<h4>
<a id="user-content-example-23" class="anchor" href="#example-23" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- open 'init.lua' in 'a+' mode</span>
    file.<span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>a+<span class="pl-pds">"</span></span>)
    <span class="pl-c">-- write 'foo bar' to the end of the file</span>
    file.<span class="pl-c1">write</span>(<span class="pl-s"><span class="pl-pds">'</span>foo bar<span class="pl-pds">'</span></span>)
    file.<span class="pl-c1">flush</span>()
    file.<span class="pl-c1">seek</span>(<span class="pl-s"><span class="pl-pds">"</span>set<span class="pl-pds">"</span></span>)
    <span class="pl-c1">print</span>(file.<span class="pl-c1">readline</span>())
    file.<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-22" class="anchor" href="#see-also-22" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_open">file.open()</a><br>
<strong>-</strong>   <a href="#file_writeline">file.writeline()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-filelist" class="anchor" href="#filelist" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.list()</h2>

<h4>
<a id="user-content-description-23" class="anchor" href="#description-23" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>list all files.</p>

<h4>
<a id="user-content-syntax-23" class="anchor" href="#syntax-23" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.list()</p>

<h4>
<a id="user-content-parameters-23" class="anchor" href="#parameters-23" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-23" class="anchor" href="#returns-23" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>a lua table which contains the {file name: file size} pairs</p>

<h4>
<a id="user-content-example-24" class="anchor" href="#example-24" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    l <span class="pl-k">=</span> file.<span class="pl-c1">list</span>();
    <span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(l) <span class="pl-k">do</span>
      <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>name:<span class="pl-pds">"</span></span><span class="pl-k">..</span>k<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>, size:<span class="pl-pds">"</span></span><span class="pl-k">..</span>v)
    <span class="pl-k">end</span></pre></div>

<h4>
<a id="user-content-see-also-23" class="anchor" href="#see-also-23" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_remove">file.remove()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-fileformat" class="anchor" href="#fileformat" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.format()</h2>

<h4>
<a id="user-content-description-24" class="anchor" href="#description-24" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>format file system.</p>

<h4>
<a id="user-content-syntax-24" class="anchor" href="#syntax-24" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.format()</p>

<h4>
<a id="user-content-parameters-24" class="anchor" href="#parameters-24" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-24" class="anchor" href="#returns-24" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-25" class="anchor" href="#example-25" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    file.<span class="pl-c1">format</span>()</pre></div>

<h4>
<a id="user-content-see-also-24" class="anchor" href="#see-also-24" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_remove">file.remove()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-filerename" class="anchor" href="#filerename" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.rename()</h2>

<h4>
<a id="user-content-description-25" class="anchor" href="#description-25" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>rename a file. <strong>NOTE:</strong> the current opened file will be closed.</p>

<h4>
<a id="user-content-syntax-25" class="anchor" href="#syntax-25" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>file.rename(oldname, newname)</p>

<h4>
<a id="user-content-parameters-25" class="anchor" href="#parameters-25" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>oldname: old file name, directories are not supported<br>
newname: new file name, directories are not supported<br></p>

<h4>
<a id="user-content-returns-25" class="anchor" href="#returns-25" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>false: rename failed.
true: rename ok.</p>

<h4>
<a id="user-content-example-26" class="anchor" href="#example-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- rename file 'temp.lua' to 'init.lua'.</span>
    file.<span class="pl-c1">rename</span>(<span class="pl-s"><span class="pl-pds">"</span>temp.lua<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>init.lua<span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="user-content-see-also-25" class="anchor" href="#see-also-25" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#file_close">file.close()</a><br></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-filefsinfo" class="anchor" href="#filefsinfo" aria-hidden="true"><span class="octicon octicon-link"></span></a>file.fsinfo()</h2>

<h4>
<a id="user-content-description-26" class="anchor" href="#description-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Get file system info</p>

<h4>
<a id="user-content-syntax-26" class="anchor" href="#syntax-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<ul>
<li><code>file.fsinfo()</code></li>
</ul>

<h4>
<a id="user-content-parameters-26" class="anchor" href="#parameters-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<ul>
<li><code>nil</code></li>
</ul>

<h4>
<a id="user-content-returns-26" class="anchor" href="#returns-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<ul>
<li>
<code>remaining</code> (number)</li>
<li>
<code>used</code>      (number)</li>
<li>
<code>total</code>     (number)</li>
</ul>

<h4>
<a id="user-content-example-27" class="anchor" href="#example-27" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- get file system info</span>
    remaining, used, total<span class="pl-k">=</span>file.<span class="pl-c1">fsinfo</span>()
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>File system info:<span class="pl-cce">\n</span>Total : <span class="pl-pds">"</span></span><span class="pl-k">..</span>total<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span> Bytes<span class="pl-cce">\n</span>Used : <span class="pl-pds">"</span></span><span class="pl-k">..</span>used<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span> Bytes<span class="pl-cce">\n</span>Remain: <span class="pl-pds">"</span></span><span class="pl-k">..</span>remain<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span> Bytes<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="user-content-see-also-26" class="anchor" href="#see-also-26" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-wifi-module-1" class="anchor" href="#wifi-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi module</h1>

<h2>
<a id="user-content-constant" class="anchor" href="#constant" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>wifi.STATION, wifi.SOFTAP, wifi.STATIONAP</p>

<p><a></a></p>

<h2>
<a id="user-content-wifisetmode" class="anchor" href="#wifisetmode" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.setmode()</h2>

<h4>
<a id="user-content-description-27" class="anchor" href="#description-27" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>setup wifi operation mode.</p>

<ul>
<li>wifi.STATION is when the device is connected to another wifi router. This is often done to give the device access to the internet. </li>
<li>wifi.SOFTAP is when the device is acting as ONLY an access point. This mode will allow you to see the device in the list of wifi networks. In this mode your computer can connect to the device creating a local area network. Unless you change the value, the ESP8266 device will be given a local IP address of 192.168.4.1 and assign your computer the next available IP, such as: 192.168.4.2.</li>
<li>wifi.STATIONAP is a combination of wifi.STATION and wifi.SOFTAP. It allows you to create a local wifi connection AND connect to another wifi router.</li>
</ul>

<h4>
<a id="user-content-syntax-27" class="anchor" href="#syntax-27" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.setmode(mode)</p>

<h4>
<a id="user-content-parameters-27" class="anchor" href="#parameters-27" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>mode: value should be: </p>

<ul>
<li>wifi.STATION</li>
<li>wifi.SOFTAP</li>
<li>wifi.STATIONAP</li>
</ul>

<h4>
<a id="user-content-returns-27" class="anchor" href="#returns-27" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>current mode after setup</p>

<h4>
<a id="user-content-example-28" class="anchor" href="#example-28" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    wifi.<span class="pl-c1">setmode</span>(wifi.<span class="pl-smi">STATION</span>)</pre></div>

<h4>
<a id="user-content-see-also-27" class="anchor" href="#see-also-27" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_getmode">wifi.getmode()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifigetmode" class="anchor" href="#wifigetmode" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.getmode()</h2>

<h4>
<a id="user-content-description-28" class="anchor" href="#description-28" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get wifi operation mode.</p>

<h4>
<a id="user-content-syntax-28" class="anchor" href="#syntax-28" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.getmode()</p>

<h4>
<a id="user-content-parameters-28" class="anchor" href="#parameters-28" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-28" class="anchor" href="#returns-28" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>wifi operation mode</p>

<h4>
<a id="user-content-example-29" class="anchor" href="#example-29" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(wifi.<span class="pl-c1">getmode</span>())</pre></div>

<h4>
<a id="user-content-see-also-28" class="anchor" href="#see-also-28" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_setmode">wifi.setmode()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifigetchannel" class="anchor" href="#wifigetchannel" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.getchannel()</h2>

<h4>
<a id="user-content-description-29" class="anchor" href="#description-29" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get current wifi channel.</p>

<h4>
<a id="user-content-syntax-29" class="anchor" href="#syntax-29" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.getchannel()</p>

<h4>
<a id="user-content-parameters-29" class="anchor" href="#parameters-29" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-29" class="anchor" href="#returns-29" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>current wifi channel</p>

<h4>
<a id="user-content-example-30" class="anchor" href="#example-30" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(wifi.<span class="pl-c1">getchannel</span>())</pre></div>

<h4>
<a id="user-content-see-also-29" class="anchor" href="#see-also-29" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifisetphymode" class="anchor" href="#wifisetphymode" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.setphymode()</h2>

<h4>
<a id="user-content-description-30" class="anchor" href="#description-30" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Setup wifi physical mode.</p>

<ul>
<li>wifi.PHYMODE_B
802.11b, More range, Low Transfer rate, More current draw</li>
<li>wifi.PHYMODE_G
802.11g, Medium range, Medium transfer rate, Medium current draw</li>
<li>wifi.PHYMODE_N
802.11n, Least range, Fast transfer rate, Least current draw (STATION ONLY)
Information from the Espressif datasheet v4.3</li>
</ul>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Typical Power Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tx 802.11b, CCK 11Mbps, P OUT=+17dBm</td>
<td>170 mA</td>
</tr>
<tr>
<td>Tx 802.11g, OFDM 54Mbps, P OUT =+15dBm</td>
<td>140 mA</td>
</tr>
<tr>
<td>Tx 802.11n, MCS7 65Mbps, P OUT =+13dBm</td>
<td>120 mA</td>
</tr>
<tr>
<td>Rx 802.11b, 1024 bytes packet length, -80dBm</td>
<td>50 mA</td>
</tr>
<tr>
<td>Rx 802.11g, 1024 bytes packet length, -70dBm</td>
<td>56 mA</td>
</tr>
<tr>
<td>Rx 802.11n, 1024 bytes packet length, -65dBm</td>
<td>56 mA</td>
</tr>
</tbody>
</table>

<h4>
<a id="user-content-syntax-30" class="anchor" href="#syntax-30" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.setphymode(mode)</p>

<h4>
<a id="user-content-parameters-30" class="anchor" href="#parameters-30" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>mode: value should be: </p>

<ul>
<li>wifi.PHYMODE_B</li>
<li>wifi.PHYMODE_G</li>
<li>wifi.PHYMODE_N</li>
</ul>

<h4>
<a id="user-content-returns-30" class="anchor" href="#returns-30" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>Current physical mode after setup</p>

<h4>
<a id="user-content-example-31" class="anchor" href="#example-31" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>   <span class="pl-c">--STATION </span>
   wifi.<span class="pl-c1">setphymode</span>()</pre></div>

<h4>
<a id="user-content-see-also-30" class="anchor" href="#see-also-30" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_getphymode">wifi.getphymode()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifigetphymode" class="anchor" href="#wifigetphymode" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.getphymode()</h2>

<h4>
<a id="user-content-description-31" class="anchor" href="#description-31" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get wifi physical mode.</p>

<h4>
<a id="user-content-syntax-31" class="anchor" href="#syntax-31" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.getmode()</p>

<h4>
<a id="user-content-parameters-31" class="anchor" href="#parameters-31" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-31" class="anchor" href="#returns-31" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>wifi physical mode</p>

<ul>
<li>1: wifi.PHYMODE_B</li>
<li>2: wifi.PHYMODE_G</li>
<li>3: wifi.PHYMODE_N</li>
</ul>

<h4>
<a id="user-content-example-32" class="anchor" href="#example-32" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(wifi.<span class="pl-c1">getphymode</span>())</pre></div>

<h4>
<a id="user-content-see-also-31" class="anchor" href="#see-also-31" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifisetphymode">wifi.setphymode()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistartsmart" class="anchor" href="#wifistartsmart" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.startsmart()</h2>

<h4>
<a id="user-content-description-32" class="anchor" href="#description-32" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>starts to auto configuration, if success set up ssid and pwd automatically.<br>
in new method, must using under wifi.STATION mode.</p>

<h4>
<a id="user-content-syntax-32" class="anchor" href="#syntax-32" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>[old] wifi.startsmart(channel, function succeed_callback())<br>
[new] wifi.startsmart(type, function succeed_callback(ssid, password))</p>

<h4>
<a id="user-content-parameters-32" class="anchor" href="#parameters-32" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>[old]<br>
channel: 1~13, startup channel for searching, if nil, default to 6.  20 seconds for each channel.<br>
succeed_callback: callback function called after configuration, which is called when got password and connected to AP.<br>
[new]<br>
type: 0~1. 0 means use ESP_TOUCH, 1 means use AIR_KISS. The APP (Android and iOS) can download with full source code from <a href="https://github.com/espressifapp">https://github.com/espressifapp</a>. Note: dev096 branch only suppurt ESP Touch V021, please check out old version. <br>
succeed_callback: with 2 arguments, ssid and password, called after configuration.</p>

<h4>
<a id="user-content-returns-32" class="anchor" href="#returns-32" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-33" class="anchor" href="#example-33" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- old</span>
    wifi.<span class="pl-c1">startsmart</span>(<span class="pl-c1">6</span>, <span class="pl-k">function</span>() <span class="pl-k">end</span>)
    <span class="pl-c">-- new</span>
    wifi.<span class="pl-c1">setmode</span>(wifi.<span class="pl-smi">STATION</span>)
    wifi.<span class="pl-c1">startsmart</span>(<span class="pl-c1">0</span>, 
        <span class="pl-k">function</span>(<span class="pl-smi">ssid, password</span>) 
            <span class="pl-c1">print</span>(<span class="pl-c1">string.format</span>(<span class="pl-s"><span class="pl-pds">"</span>Success. SSID:%s ; PASSWORD:%s<span class="pl-pds">"</span></span>, ssid, password))
        <span class="pl-k">end</span>
    )</pre></div>

<h4>
<a id="user-content-see-also-32" class="anchor" href="#see-also-32" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_stopsmart">wifi.stopsmart()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistopsmart" class="anchor" href="#wifistopsmart" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.stopsmart()</h2>

<h4>
<a id="user-content-description-33" class="anchor" href="#description-33" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>stop the configuring process.</p>

<h4>
<a id="user-content-syntax-33" class="anchor" href="#syntax-33" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.stopsmart()</p>

<h4>
<a id="user-content-parameters-33" class="anchor" href="#parameters-33" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-33" class="anchor" href="#returns-33" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-34" class="anchor" href="#example-34" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    wifi.<span class="pl-c1">stopsmart</span>()</pre></div>

<h4>
<a id="user-content-see-also-33" class="anchor" href="#see-also-33" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_startsmart">wifi.startsmart()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifisleeptype" class="anchor" href="#wifisleeptype" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sleeptype()</h2>

<h4>
<a id="user-content-description-34" class="anchor" href="#description-34" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>config the sleep type for wifi modem.</p>

<h4>
<a id="user-content-syntax-34" class="anchor" href="#syntax-34" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>type_actual = wifi.sleeptype(type_need)</p>

<h4>
<a id="user-content-parameters-34" class="anchor" href="#parameters-34" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>type_need:<br>
wifi.NONE_SLEEP, wifi.LIGHT_SLEEP, wifi.MODEM_SLEEP</p>

<h4>
<a id="user-content-returns-34" class="anchor" href="#returns-34" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>type_actual:<br>
wifi.NONE_SLEEP, wifi.LIGHT_SLEEP, wifi.MODEM_SLEEP</p>

<h4>
<a id="user-content-example-35" class="anchor" href="#example-35" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    realtype <span class="pl-k">=</span> wifi.<span class="pl-c1">sleeptype</span>(wifi.<span class="pl-smi">MODEM_SLEEP</span>)</pre></div>

<h4>
<a id="user-content-see-also-34" class="anchor" href="#see-also-34" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#node_dsleep">node.dsleep()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistagetconfig" class="anchor" href="#wifistagetconfig" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.getconfig()</h2>

<h4>
<a id="user-content-description-35" class="anchor" href="#description-35" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Get wifi station configuration.<br>
Note: If bssid_set is equal to 0 then bssid is irrelevant </p>

<h4>
<a id="user-content-syntax-35" class="anchor" href="#syntax-35" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ssid, password, bssid_set, bssid=wifi.sta.getconfig()</p>

<h4>
<a id="user-content-parameters-35" class="anchor" href="#parameters-35" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-35" class="anchor" href="#returns-35" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>ssid, password, bssid_set, bssid</p>

<h4>
<a id="user-content-example-36" class="anchor" href="#example-36" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>   <span class="pl-c">--Get current Station configuration</span>
   ssid, password, bssid_set, bssid<span class="pl-k">=</span>wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getconfig</span>()
   <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>Current Station configuration:<span class="pl-cce">\n</span>SSID : <span class="pl-pds">"</span></span><span class="pl-k">..</span>ssid
   <span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>Password  : <span class="pl-pds">"</span></span><span class="pl-k">..</span>password
   <span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>BSSID_set  : <span class="pl-pds">"</span></span><span class="pl-k">..</span>bssid_set
   <span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>BSSID: <span class="pl-pds">"</span></span><span class="pl-k">..</span>bssid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
   ssid, password, bssid_set, bssid<span class="pl-k">=</span><span class="pl-c1">nil</span>, <span class="pl-c1">nil</span>, <span class="pl-c1">nil</span>, <span class="pl-c1">nil</span></pre></div>

<h4>
<a id="user-content-see-also-35" class="anchor" href="#see-also-35" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_connect">wifi.sta.connect()</a><br>
<strong>-</strong>   <a href="#wifi_sta_disconnect">wifi.sta.disconnect()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistaconfig" class="anchor" href="#wifistaconfig" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.config()</h2>

<h4>
<a id="user-content-description-36" class="anchor" href="#description-36" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Set wifi station configuration</p>

<h4>
<a id="user-content-syntax-36" class="anchor" href="#syntax-36" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.config(ssid, password)<br>
wifi.sta.config(ssid, password, auto)<br>
wifi.sta.config(ssid, password, bssid)<br>
wifi.sta.config(ssid, password, auto, bssid)<br></p>

<h4>
<a id="user-content-parameters-36" class="anchor" href="#parameters-36" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<ul>
<li>ssid: string which is less than 32 bytes.<br>
</li>
<li>password: string which is less than 64 bytes.<br>
</li>
<li>auto: value of 0 or 1 (Default is 1)<br>

<ul>
<li>0: Disable auto connect and remain disconnected from Access Point <br>
</li>
<li>1: Enable auto connect and connect to Access Point.<br>
</li>
</ul>
</li>
<li>bssid: String that contains the MAC address of the Access Point, (optional).<br>

<ul>
<li>You can set bssid if you have multiple Access Points with the same ssid.<br>
</li>
<li>Note: if you set bssid for a specific SSID and would like to configure station to connect to the same ssid only without the bssid requirement, you MUST first configure to station to a different ssid first, then connect to the desired ssid<br>
</li>
<li>The following formats are valid:

<ul>
<li>"DE-C1-A5-51-F1-ED"</li>
<li>"AC-1D-1C-B1-0B-22"</li>
<li>"DE AD BE EF 7A C0"</li>
</ul>
</li>
</ul>
</li>
</ul>

<h4>
<a id="user-content-returns-36" class="anchor" href="#returns-36" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-37" class="anchor" href="#example-37" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>   <span class="pl-c">--Connect to Access Point automatically when in range</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">config</span>(<span class="pl-s"><span class="pl-pds">"</span>myssid<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>)

   <span class="pl-c">--Connect to Access Point, User decides when to connect/disconnect to/from AP</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">config</span>(<span class="pl-s"><span class="pl-pds">"</span>myssid<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>)
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">connect</span>()
   <span class="pl-c">--do some wifi stuff</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">disconnect</span>()

   <span class="pl-c">--Connect to specific Access Point automatically when in range</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">config</span>(<span class="pl-s"><span class="pl-pds">"</span>myssid<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>12:34:56:78:90:12<span class="pl-pds">"</span></span>)

   <span class="pl-c">--Connect to specific Access Point, User decides when to connect/disconnect to/from AP</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">config</span>(<span class="pl-s"><span class="pl-pds">"</span>myssid<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">"</span>12:34:56:78:90:12<span class="pl-pds">"</span></span>)
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">connect</span>()
   <span class="pl-c">--do some wifi stuff</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">disconnect</span>()</pre></div>

<h4>
<a id="user-content-see-also-36" class="anchor" href="#see-also-36" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_connect">wifi.sta.connect()</a><br>
<strong>-</strong>   <a href="#wifi_sta_disconnect">wifi.sta.disconnect()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistaconnect" class="anchor" href="#wifistaconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.connect()</h2>

<h4>
<a id="user-content-description-37" class="anchor" href="#description-37" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>connect to AP in station mode.</p>

<h4>
<a id="user-content-syntax-37" class="anchor" href="#syntax-37" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.connect()</p>

<h4>
<a id="user-content-parameters-37" class="anchor" href="#parameters-37" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-37" class="anchor" href="#returns-37" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-38" class="anchor" href="#example-38" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">connect</span>()</pre></div>

<h4>
<a id="user-content-see-also-37" class="anchor" href="#see-also-37" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_disconnect">wifi.sta.disconnect()</a><br>
<strong>-</strong>   <a href="#wifi_sta_config">wifi.sta.config()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistadisconnect" class="anchor" href="#wifistadisconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.disconnect()</h2>

<h4>
<a id="user-content-description-38" class="anchor" href="#description-38" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>disconnect from AP in station mode.</p>

<h4>
<a id="user-content-syntax-38" class="anchor" href="#syntax-38" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.disconnect()</p>

<h4>
<a id="user-content-parameters-38" class="anchor" href="#parameters-38" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-38" class="anchor" href="#returns-38" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-39" class="anchor" href="#example-39" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">disconnect</span>()</pre></div>

<h4>
<a id="user-content-see-also-38" class="anchor" href="#see-also-38" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_config">wifi.sta.config()</a><br>
<strong>-</strong>   <a href="#wifi_sta_connect">wifi.sta.connect()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistaautoconnect" class="anchor" href="#wifistaautoconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.autoconnect()</h2>

<h4>
<a id="user-content-description-39" class="anchor" href="#description-39" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>auto connect to AP in station mode.</p>

<h4>
<a id="user-content-syntax-39" class="anchor" href="#syntax-39" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.autoconnect(auto)</p>

<h4>
<a id="user-content-parameters-39" class="anchor" href="#parameters-39" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>auto: 0 to disable auto connecting. 1 to enable auto connecting</p>

<h4>
<a id="user-content-returns-39" class="anchor" href="#returns-39" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-40" class="anchor" href="#example-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">autoconnect</span>()</pre></div>

<h4>
<a id="user-content-see-also-39" class="anchor" href="#see-also-39" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_config">wifi.sta.config()</a><br>
<strong>-</strong>   <a href="#wifi_sta_connect">wifi.sta.connect()</a><br>
<strong>-</strong>   <a href="#wifi_sta_disconnect">wifi.sta.disconnect()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistagetip" class="anchor" href="#wifistagetip" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.getip()</h2>

<h4>
<a id="user-content-description-40" class="anchor" href="#description-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get ip, netmask, gateway address in station mode.</p>

<h4>
<a id="user-content-syntax-40" class="anchor" href="#syntax-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.getip()</p>

<h4>
<a id="user-content-parameters-40" class="anchor" href="#parameters-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-40" class="anchor" href="#returns-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>ip, netmask, gateway address in string, for example:"192.168.0.111"<br>
return nil if ip = "0.0.0.0".</p>

<h4>
<a id="user-content-example-41" class="anchor" href="#example-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print current ip, netmask, gateway</span>
    <span class="pl-c1">print</span>(wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getip</span>())
    <span class="pl-c">-- 192.168.0.111  255.255.255.0  192.168.0.1</span>
    ip <span class="pl-k">=</span> wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getip</span>()
    <span class="pl-c1">print</span>(ip)
    <span class="pl-c">-- 192.168.0.111</span>
    ip, nm <span class="pl-k">=</span> wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getip</span>()
    <span class="pl-c1">print</span>(nm)
    <span class="pl-c">-- 255.255.255.0</span>
</pre></div>

<h4>
<a id="user-content-see-also-40" class="anchor" href="#see-also-40" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_getmac">wifi.sta.getmac()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistasetip" class="anchor" href="#wifistasetip" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.setip()</h2>

<h4>
<a id="user-content-description-41" class="anchor" href="#description-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set ip, netmask, gateway address in station mode.</p>

<h4>
<a id="user-content-syntax-41" class="anchor" href="#syntax-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.setip(cfg)</p>

<h4>
<a id="user-content-parameters-41" class="anchor" href="#parameters-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>cfg: table contain ip, netmask, and gateway<br></p>

<div class="highlight highlight-lua"><pre>{
  ip<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.0.111<span class="pl-pds">"</span></span>,
  netmask<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>255.255.255.0<span class="pl-pds">"</span></span>,
  gateway<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.0.1<span class="pl-pds">"</span></span>
}</pre></div>

<h4>
<a id="user-content-returns-41" class="anchor" href="#returns-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true if success, false if fail.</p>

<h4>
<a id="user-content-example-42" class="anchor" href="#example-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>  cfg <span class="pl-k">=</span>
  {
    ip<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.0.111<span class="pl-pds">"</span></span>,
    netmask<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>255.255.255.0<span class="pl-pds">"</span></span>,
    gateway<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.0.1<span class="pl-pds">"</span></span>
  }
  wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">setip</span>(cfg)
</pre></div>

<h4>
<a id="user-content-see-also-41" class="anchor" href="#see-also-41" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_setmac">wifi.sta.setmac()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistagetmac" class="anchor" href="#wifistagetmac" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.getmac()</h2>

<h4>
<a id="user-content-description-42" class="anchor" href="#description-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get mac address in station mode.</p>

<h4>
<a id="user-content-syntax-42" class="anchor" href="#syntax-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.getmac()</p>

<h4>
<a id="user-content-parameters-42" class="anchor" href="#parameters-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-42" class="anchor" href="#returns-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>mac address in string, for example:"18-33-44-FE-55-BB"</p>

<h4>
<a id="user-content-example-43" class="anchor" href="#example-43" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print current mac address</span>
    <span class="pl-c1">print</span>(wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getmac</span>())</pre></div>

<h4>
<a id="user-content-see-also-42" class="anchor" href="#see-also-42" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_getip">wifi.sta.getip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistasetmac" class="anchor" href="#wifistasetmac" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.setmac()</h2>

<h4>
<a id="user-content-description-43" class="anchor" href="#description-43" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set mac address in station mode.</p>

<h4>
<a id="user-content-syntax-43" class="anchor" href="#syntax-43" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.setmac(mac)</p>

<h4>
<a id="user-content-parameters-43" class="anchor" href="#parameters-43" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>mac address in string, for example:"DE:AD:BE:EF:7A:C0"</p>

<h4>
<a id="user-content-returns-43" class="anchor" href="#returns-43" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true if success, false if fail.</p>

<h4>
<a id="user-content-example-44" class="anchor" href="#example-44" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">setmac</span>(<span class="pl-s"><span class="pl-pds">"</span>DE:AD:BE:EF:7A:C0<span class="pl-pds">"</span></span>))</pre></div>

<h4>
<a id="user-content-see-also-43" class="anchor" href="#see-also-43" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_setip">wifi.sta.setip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistagetap" class="anchor" href="#wifistagetap" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.getap()</h2>

<h4>
<a id="user-content-description-44" class="anchor" href="#description-44" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>scan and get ap list as a lua table into callback function.</p>

<h4>
<a id="user-content-syntax-44" class="anchor" href="#syntax-44" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.getap(function(table))
wifi.sta.getap(cfg, function(table))
wifi.sta.getap(format, function(table))
wifi.sta.getap(cfg, format, function(table))</p>

<h4>
<a id="user-content-parameters-44" class="anchor" href="#parameters-44" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<ul>
<li>cfg: table that contains scan configuration

<ul>
<li>ssid: ssid == nil, don't filter ssid. </li>
<li>bssid: bssid == nil, don't filter bssid.</li>
<li>channel: channel == 0, scan all channels, otherwise scan set channel.(Default is 0)</li>
<li>show_hidden: show_hidden == 1, get info for router with hidden ssid.(Default is 0)</li>
</ul>
</li>
<li>format: Select output table format, 0 or 1 is valid.(0 is Default)

<ul>
<li>0: Old format (SSID : Authmode, RSSI, BSSID, Channel) 

<ul>
<li>NOTE: When using old format for table output, any duplicate SSIDs will be discarded.</li>
</ul>
</li>
<li>1: New format (BSSID : SSID, RSSI, Authmode, Channel)</li>
</ul>
</li>
<li>function(table): a callback function to receive ap table when scan is done<br>

<ul>
<li>This function receives a table, the key is the ssid, value is other info in format: authmode,rssi,bssid,channel</li>
<li>If you are using the new output format, the key is the bssid, value is other info in format: ssid,rssi,authmode,channel</li>
</ul>
</li>
</ul>

<h4>
<a id="user-content-returns-44" class="anchor" href="#returns-44" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-45" class="anchor" href="#example-45" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>  <span class="pl-c">-- print ap list</span>
    <span class="pl-k">function</span> <span class="pl-en">listap</span>(<span class="pl-smi">t</span>)
      <span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span>
        <span class="pl-c1">print</span>(k<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span> : <span class="pl-pds">"</span></span><span class="pl-k">..</span>v)
      <span class="pl-k">end</span>
    <span class="pl-k">end</span>
    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getap</span>(listap)

  <span class="pl-c">-- Print AP list that is easier to read</span>
    <span class="pl-k">function</span> <span class="pl-en">listap</span>(<span class="pl-smi">t</span>) <span class="pl-c">-- (SSID : Authmode, RSSI, BSSID, Channel)</span>
     <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span><span class="pl-k">..</span><span class="pl-c1">string.format</span>(<span class="pl-s"><span class="pl-pds">"</span>%32s<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>SSID<span class="pl-pds">"</span></span>)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span>BSSID<span class="pl-cce">\t\t\t\t</span>  RSSI<span class="pl-cce">\t\t</span>AUTHMODE<span class="pl-cce">\t</span>CHANNEL<span class="pl-pds">"</span></span>)
     <span class="pl-k">for</span> ssid,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span>
      <span class="pl-k">local</span> authmode, rssi, bssid, channel <span class="pl-k">=</span> <span class="pl-c1">string.match</span>(v, <span class="pl-s"><span class="pl-pds">"</span>([^,]+),([^,]+),([^,]+),([^,]+)<span class="pl-pds">"</span></span>)
      <span class="pl-c1">print</span>(<span class="pl-c1">string.format</span>(<span class="pl-s"><span class="pl-pds">"</span>%32s<span class="pl-pds">"</span></span>,ssid)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>bssid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span>  <span class="pl-pds">"</span></span><span class="pl-k">..</span>rssi<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>authmode<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t\t\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>channel)
     <span class="pl-k">end</span>
    <span class="pl-k">end</span>
    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getap</span>(listap)

<span class="pl-c">--NOTE: The rest of the examples use the new style output format</span>

  <span class="pl-c">-- print ap list</span>
    <span class="pl-k">function</span> <span class="pl-en">listap</span>(<span class="pl-smi">t</span>)
      <span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span>
        <span class="pl-c1">print</span>(k<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span> : <span class="pl-pds">"</span></span><span class="pl-k">..</span>v)
      <span class="pl-k">end</span>
    <span class="pl-k">end</span>
    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getap</span>(<span class="pl-c1">1</span>, listap)

  <span class="pl-c">-- Print AP list that is easier to read</span>
    <span class="pl-k">function</span> <span class="pl-en">listap</span>(<span class="pl-smi">t</span>) <span class="pl-c">-- (SSID : Authmode, RSSI, BSSID, Channel)</span>
     <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n\t\t\t</span>SSID<span class="pl-cce">\t\t\t\t\t</span>BSSID<span class="pl-cce">\t\t\t</span>  RSSI<span class="pl-cce">\t\t</span>AUTHMODE<span class="pl-cce">\t\t</span>CHANNEL<span class="pl-pds">"</span></span>)
      <span class="pl-k">for</span> bssid,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span>
       <span class="pl-k">local</span> ssid, rssi, authmode, channel <span class="pl-k">=</span> <span class="pl-c1">string.match</span>(v, <span class="pl-s"><span class="pl-pds">"</span>([^,]+),([^,]+),([^,]+),([^,]+)<span class="pl-pds">"</span></span>)
        <span class="pl-c1">print</span>(<span class="pl-c1">string.format</span>(<span class="pl-s"><span class="pl-pds">"</span>%32.s<span class="pl-pds">"</span></span>,ssid)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>bssid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span>  <span class="pl-pds">"</span></span><span class="pl-k">..</span>rssi<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>authmode<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t\t\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>channel)
      <span class="pl-k">end</span>
    <span class="pl-k">end</span>
    wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getap</span>(<span class="pl-c1">1</span>, listap)

  <span class="pl-c">--check for specific AP</span>
    <span class="pl-k">function</span> <span class="pl-en">listap</span>(<span class="pl-smi">t</span>)
     <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n\t\t\t</span>SSID<span class="pl-cce">\t\t\t\t\t</span>BSSID<span class="pl-cce">\t\t\t</span>  RSSI<span class="pl-cce">\t\t</span>AUTHMODE<span class="pl-cce">\t\t</span>CHANNEL<span class="pl-pds">"</span></span>)
      <span class="pl-k">for</span> bssid,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span>
       <span class="pl-k">local</span> ssid, rssi, authmode, channel <span class="pl-k">=</span> <span class="pl-c1">string.match</span>(v, <span class="pl-s"><span class="pl-pds">"</span>([^,]+),([^,]+),([^,]+),([^,]+)<span class="pl-pds">"</span></span>)
        <span class="pl-c1">print</span>(<span class="pl-c1">string.format</span>(<span class="pl-s"><span class="pl-pds">"</span>%32.s<span class="pl-pds">"</span></span>,ssid)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>bssid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t</span>  <span class="pl-pds">"</span></span><span class="pl-k">..</span>rssi<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>authmode<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\t\t\t</span><span class="pl-pds">"</span></span><span class="pl-k">..</span>channel)
      <span class="pl-k">end</span>
    <span class="pl-k">end</span>
   scan_cfg<span class="pl-k">=</span>{}
   scan_cfg.<span class="pl-smi">ssid</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>myssid<span class="pl-pds">"</span></span> 
   scan_cfg.<span class="pl-smi">bssid</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>AA:AA:AA:AA:AA:AA<span class="pl-pds">"</span></span> 
   scan_cfg.<span class="pl-smi">channel</span><span class="pl-k">=</span><span class="pl-c1">0</span>
   scan_cfg.<span class="pl-smi">show_hidden</span><span class="pl-k">=</span><span class="pl-c1">1</span>
   wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getap</span>(scan_cfg, <span class="pl-c1">1</span>, listap)

   <span class="pl-c">--get RSSI for currently configured AP</span>
   <span class="pl-k">function</span> <span class="pl-en">listap</span>(<span class="pl-smi">t</span>)
     <span class="pl-k">for</span> bssid,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span>
      <span class="pl-k">local</span> ssid, rssi, authmode, channel <span class="pl-k">=</span> <span class="pl-c1">string.match</span>(v, <span class="pl-s"><span class="pl-pds">"</span>([^,]+),([^,]+),([^,]+),([^,]+)<span class="pl-pds">"</span></span>)
       <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>CURRENT RSSI IS: <span class="pl-pds">"</span></span><span class="pl-k">..</span>rssi)
     <span class="pl-k">end</span>
   <span class="pl-k">end</span>
  ssid, tmp, bssid_set, bssid<span class="pl-k">=</span>wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getconfig</span>() 
  scan_cfg<span class="pl-k">=</span>{}
  scan_cfg.<span class="pl-smi">ssid</span><span class="pl-k">=</span>ssid 
  <span class="pl-k">if</span> bssid_set<span class="pl-k">==</span><span class="pl-c1">1</span> <span class="pl-k">then</span> scan_cfg.<span class="pl-smi">bssid</span><span class="pl-k">=</span>bssid <span class="pl-k">else</span> scan_cfg.<span class="pl-smi">bssid</span><span class="pl-k">=</span><span class="pl-c1">nil</span> <span class="pl-k">end</span>
  scan_cfg.<span class="pl-smi">channel</span><span class="pl-k">=</span>wifi.<span class="pl-c1">getchannel</span>()
  scan_cfg.<span class="pl-smi">show_hidden</span><span class="pl-k">=</span><span class="pl-c1">0</span>
  ssid, tmp, bssid_set, bssid<span class="pl-k">=</span><span class="pl-c1">nil</span>, <span class="pl-c1">nil</span>, <span class="pl-c1">nil</span>, <span class="pl-c1">nil</span>
  wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getap</span>(scan_cfg, <span class="pl-c1">1</span>, listap)
</pre></div>

<h4>
<a id="user-content-see-also-44" class="anchor" href="#see-also-44" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_getip">wifi.sta.getip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistastatus" class="anchor" href="#wifistastatus" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.status()</h2>

<h4>
<a id="user-content-description-45" class="anchor" href="#description-45" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get current status in station mode.</p>

<h4>
<a id="user-content-syntax-45" class="anchor" href="#syntax-45" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.status()</p>

<h4>
<a id="user-content-parameters-45" class="anchor" href="#parameters-45" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-45" class="anchor" href="#returns-45" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number： 0~5</p>

<ul>
<li>0: STATION_IDLE,</li>
<li>1: STATION_CONNECTING,</li>
<li>2: STATION_WRONG_PASSWORD,</li>
<li>3: STATION_NO_AP_FOUND,</li>
<li>4: STATION_CONNECT_FAIL,</li>
<li>5: STATION_GOT_IP.</li>
</ul>

<h4>
<a id="user-content-see-also-45" class="anchor" href="#see-also-45" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifistagetbroadcast" class="anchor" href="#wifistagetbroadcast" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.sta.getbroadcast()</h2>

<h4>
<a id="user-content-description-46" class="anchor" href="#description-46" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get getbroadcast address in station mode.</p>

<h4>
<a id="user-content-syntax-46" class="anchor" href="#syntax-46" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.sta.getbroadcast()</p>

<h4>
<a id="user-content-parameters-46" class="anchor" href="#parameters-46" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-46" class="anchor" href="#returns-46" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>getbroadcast address in string, for example:"192.168.0.255"<br>
return nil if ip = "0.0.0.0".</p>

<h4>
<a id="user-content-example-46" class="anchor" href="#example-46" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    bc <span class="pl-k">=</span> wifi.<span class="pl-smi">sta</span>.<span class="pl-c1">getbroadcast</span>()
    <span class="pl-c1">print</span>(bc)
    <span class="pl-c">-- 192.168.0.255</span>
</pre></div>

<h4>
<a id="user-content-see-also-46" class="anchor" href="#see-also-46" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_sta_getip">wifi.sta.getip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-wifiap-module" class="anchor" href="#wifiap-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap module</h1>

<h2>
<a id="user-content-wifiapconfig" class="anchor" href="#wifiapconfig" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap.config()</h2>

<h4>
<a id="user-content-description-47" class="anchor" href="#description-47" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set ssid and pwd in ap mode. Be sure to make the pwd value at least 8 characters! If you don't make the pwd value 8 characters, it will default to no password and not set the value for ssid. It will still work as an access point, but you will see a name in your wifi list like: ESP_9997C3</p>

<h4>
<a id="user-content-syntax-47" class="anchor" href="#syntax-47" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.ap.config(cfg)</p>

<h4>
<a id="user-content-parameters-47" class="anchor" href="#parameters-47" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>cfg: lua table to setup ap.</p>

<h4>
<a id="user-content-example-47" class="anchor" href="#example-47" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example:</h4>

<div class="highlight highlight-lua"><pre>     cfg<span class="pl-k">=</span>{}
     cfg.<span class="pl-smi">ssid</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>myssid<span class="pl-pds">"</span></span>
     cfg.<span class="pl-smi">pwd</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span>
     wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">config</span>(cfg)</pre></div>

<h4>
<a id="user-content-returns-47" class="anchor" href="#returns-47" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-47" class="anchor" href="#see-also-47" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>    <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifiapgetip" class="anchor" href="#wifiapgetip" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap.getip()</h2>

<h4>
<a id="user-content-description-48" class="anchor" href="#description-48" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get ip, netmask, gateway in ap mode.</p>

<h4>
<a id="user-content-syntax-48" class="anchor" href="#syntax-48" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.ap.getip()</p>

<h4>
<a id="user-content-parameters-48" class="anchor" href="#parameters-48" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-48" class="anchor" href="#returns-48" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>ip, netmask, gateway address in string, for example:"192.168.0.111"<br>
return nil if ip = "0.0.0.0".</p>

<h4>
<a id="user-content-example-48" class="anchor" href="#example-48" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print current ip, netmask, gateway</span>
    <span class="pl-c1">print</span>(wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">getip</span>())
    <span class="pl-c">-- 192.168.4.1  255.255.255.0  192.168.4.1</span>
    ip <span class="pl-k">=</span> wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">getip</span>()
    <span class="pl-c1">print</span>(ip)
    <span class="pl-c">-- 192.168.4.1</span>
    ip, nm <span class="pl-k">=</span> wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">getip</span>()
    <span class="pl-c1">print</span>(nm)
    <span class="pl-c">-- 255.255.255.0</span>
    ip, nm, gw <span class="pl-k">=</span> wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">getip</span>()
    <span class="pl-c1">print</span>(gw)
    <span class="pl-c">-- 192.168.4.1</span></pre></div>

<h4>
<a id="user-content-see-also-48" class="anchor" href="#see-also-48" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_ap_getmac">wifi.ap.getmac()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifiapsetip" class="anchor" href="#wifiapsetip" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap.setip()</h2>

<h4>
<a id="user-content-description-49" class="anchor" href="#description-49" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set ip, netmask, gateway address in ap mode.</p>

<h4>
<a id="user-content-syntax-49" class="anchor" href="#syntax-49" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.ap.setip(cfg)</p>

<h4>
<a id="user-content-parameters-49" class="anchor" href="#parameters-49" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>cfg: table contain ip, netmask, and gateway<br></p>

<div class="highlight highlight-lua"><pre>{
  ip<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.1.1<span class="pl-pds">"</span></span>,
  netmask<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>255.255.255.0<span class="pl-pds">"</span></span>,
  gateway<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.1.1<span class="pl-pds">"</span></span>
}</pre></div>

<h4>
<a id="user-content-returns-49" class="anchor" href="#returns-49" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true if success, false if fail.</p>

<h4>
<a id="user-content-example-49" class="anchor" href="#example-49" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>  cfg <span class="pl-k">=</span>
  {
    ip<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.1.1<span class="pl-pds">"</span></span>,
    netmask<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>255.255.255.0<span class="pl-pds">"</span></span>,
    gateway<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>192.168.1.1<span class="pl-pds">"</span></span>
  }
  wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">setip</span>(cfg)
</pre></div>

<h4>
<a id="user-content-see-also-49" class="anchor" href="#see-also-49" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_ap_setmac">wifi.ap.setmac()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifiapgetmac" class="anchor" href="#wifiapgetmac" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap.getmac()</h2>

<h4>
<a id="user-content-description-50" class="anchor" href="#description-50" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get mac address in ap mode.</p>

<h4>
<a id="user-content-syntax-50" class="anchor" href="#syntax-50" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.ap.getmac()</p>

<h4>
<a id="user-content-parameters-50" class="anchor" href="#parameters-50" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-50" class="anchor" href="#returns-50" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>mac address in string, for example:"1A-33-44-FE-55-BB"</p>

<h4>
<a id="user-content-example-50" class="anchor" href="#example-50" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">getmac</span>()</pre></div>

<h4>
<a id="user-content-see-also-50" class="anchor" href="#see-also-50" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_ap_getip">wifi.ap.getip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifiapsetmac" class="anchor" href="#wifiapsetmac" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap.setmac()</h2>

<h4>
<a id="user-content-description-51" class="anchor" href="#description-51" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set mac address in ap mode.</p>

<h4>
<a id="user-content-syntax-51" class="anchor" href="#syntax-51" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.ap.setmac(mac)</p>

<h4>
<a id="user-content-parameters-51" class="anchor" href="#parameters-51" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>mac address in byte string, for example:"AC-1D-1C-B1-0B-22"</p>

<h4>
<a id="user-content-returns-51" class="anchor" href="#returns-51" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true if success, false if fail.</p>

<h4>
<a id="user-content-example-51" class="anchor" href="#example-51" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">setmac</span>(<span class="pl-s"><span class="pl-pds">"</span>AC-1D-1C-B1-0B-22<span class="pl-pds">"</span></span>))</pre></div>

<h4>
<a id="user-content-see-also-51" class="anchor" href="#see-also-51" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_ap_setip">wifi.ap.setip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-wifiapgetbroadcast" class="anchor" href="#wifiapgetbroadcast" aria-hidden="true"><span class="octicon octicon-link"></span></a>wifi.ap.getbroadcast()</h2>

<h4>
<a id="user-content-description-52" class="anchor" href="#description-52" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get getbroadcast address in ap mode.</p>

<h4>
<a id="user-content-syntax-52" class="anchor" href="#syntax-52" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wifi.ap.getbroadcast()</p>

<h4>
<a id="user-content-parameters-52" class="anchor" href="#parameters-52" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-52" class="anchor" href="#returns-52" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>getbroadcast address in string, for example:"192.168.0.255"<br>
return nil if ip = "0.0.0.0".</p>

<h4>
<a id="user-content-example-52" class="anchor" href="#example-52" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    bc <span class="pl-k">=</span> wifi.<span class="pl-smi">ap</span>.<span class="pl-c1">getbroadcast</span>()
    <span class="pl-c1">print</span>(bc)
    <span class="pl-c">-- 192.168.0.255</span>
</pre></div>

<h4>
<a id="user-content-see-also-52" class="anchor" href="#see-also-52" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#wifi_ap_getip">wifi.ap.getip()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-timer-module-1" class="anchor" href="#timer-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>timer module</h1>

<h2>
<a id="user-content-tmrdelay" class="anchor" href="#tmrdelay" aria-hidden="true"><span class="octicon octicon-link"></span></a>tmr.delay()</h2>

<h4>
<a id="user-content-description-53" class="anchor" href="#description-53" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>delay us micro seconds.</p>

<h4>
<a id="user-content-syntax-53" class="anchor" href="#syntax-53" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>tmr.delay(us)</p>

<h4>
<a id="user-content-parameters-53" class="anchor" href="#parameters-53" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>us: delay time in micro second</p>

<h4>
<a id="user-content-returns-53" class="anchor" href="#returns-53" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-53" class="anchor" href="#example-53" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- delay 100us</span>
    tmr.<span class="pl-c1">delay</span>(<span class="pl-c1">100</span>)</pre></div>

<h4>
<a id="user-content-see-also-53" class="anchor" href="#see-also-53" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#tmrnow">tmr.now()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-tmrnow" class="anchor" href="#tmrnow" aria-hidden="true"><span class="octicon octicon-link"></span></a>tmr.now()</h2>

<h4>
<a id="user-content-description-54" class="anchor" href="#description-54" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>return the current value of system counter: uint31, us.</p>

<h4>
<a id="user-content-syntax-54" class="anchor" href="#syntax-54" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>tmr.now()</p>

<h4>
<a id="user-content-parameters-54" class="anchor" href="#parameters-54" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-54" class="anchor" href="#returns-54" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>uint31: value of counter</p>

<h4>
<a id="user-content-example-54" class="anchor" href="#example-54" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print current value of counter</span>
    <span class="pl-c1">print</span>(tmr.<span class="pl-c1">now</span>())</pre></div>

<h4>
<a id="user-content-see-also-54" class="anchor" href="#see-also-54" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#tmrdelay">tmr.delay()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-tmralarm" class="anchor" href="#tmralarm" aria-hidden="true"><span class="octicon octicon-link"></span></a>tmr.alarm()</h2>

<h4>
<a id="user-content-description-55" class="anchor" href="#description-55" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>alarm time.</p>

<h4>
<a id="user-content-syntax-55" class="anchor" href="#syntax-55" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>tmr.alarm(id, interval, repeat, function do())</p>

<h4>
<a id="user-content-parameters-55" class="anchor" href="#parameters-55" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id: 0~6, alarmer id.
Interval: alarm time, unit: millisecond<br>
repeat: 0 - one time alarm, 1 - repeat<br>
function do(): callback function for alarm timed out</p>

<h4>
<a id="user-content-returns-55" class="anchor" href="#returns-55" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-55" class="anchor" href="#example-55" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print "hello world" every 1000ms</span>
    tmr.<span class="pl-c1">alarm</span>(<span class="pl-c1">0</span>, <span class="pl-c1">1000</span>, <span class="pl-c1">1</span>, <span class="pl-k">function</span>() <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>) <span class="pl-k">end</span> )</pre></div>

<h4>
<a id="user-content-see-also-55" class="anchor" href="#see-also-55" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#tmrnow">tmr.now()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-tmrstop" class="anchor" href="#tmrstop" aria-hidden="true"><span class="octicon octicon-link"></span></a>tmr.stop()</h2>

<h4>
<a id="user-content-description-56" class="anchor" href="#description-56" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>stop alarm.<br></p>

<h4>
<a id="user-content-syntax-56" class="anchor" href="#syntax-56" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>tmr.stop(id)</p>

<h4>
<a id="user-content-parameters-56" class="anchor" href="#parameters-56" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id: 0~6, alarmer id.</p>

<h4>
<a id="user-content-returns-56" class="anchor" href="#returns-56" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-56" class="anchor" href="#example-56" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- print "hello world" every 1000ms</span>
    tmr.<span class="pl-c1">alarm</span>(<span class="pl-c1">1</span>, <span class="pl-c1">1000</span>, <span class="pl-c1">1</span>, <span class="pl-k">function</span>() <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>) <span class="pl-k">end</span> )

    <span class="pl-c">-- something else</span>

    <span class="pl-c">-- stop alarm</span>
    tmr.<span class="pl-c1">stop</span>(<span class="pl-c1">1</span>)</pre></div>

<h4>
<a id="user-content-see-also-56" class="anchor" href="#see-also-56" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#tmrnow">tmr.now()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-tmrwdclr" class="anchor" href="#tmrwdclr" aria-hidden="true"><span class="octicon octicon-link"></span></a>tmr.wdclr()</h2>

<h4>
<a id="user-content-description-57" class="anchor" href="#description-57" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>clear system watchdog counter.<br></p>

<h4>
<a id="user-content-syntax-57" class="anchor" href="#syntax-57" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>tmr.wdclr()</p>

<h4>
<a id="user-content-parameters-57" class="anchor" href="#parameters-57" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil.</p>

<h4>
<a id="user-content-returns-57" class="anchor" href="#returns-57" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-57" class="anchor" href="#example-57" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-k">for</span> i<span class="pl-k">=</span><span class="pl-c1">1</span>,<span class="pl-c1">10000</span> <span class="pl-k">do</span> 
      <span class="pl-c1">print</span>(i)
      tmr.<span class="pl-c1">wdclr</span>()   <span class="pl-c">-- should call tmr.wdclr() in a long loop to avoid hardware reset caused by watchdog.</span>
    <span class="pl-k">end</span> </pre></div>

<h4>
<a id="user-content-see-also-57" class="anchor" href="#see-also-57" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#tmrdelay">tmr.delay()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-tmrtime" class="anchor" href="#tmrtime" aria-hidden="true"><span class="octicon octicon-link"></span></a>tmr.time()</h2>

<h4>
<a id="user-content-description-58" class="anchor" href="#description-58" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>return rtc time since start up in second, uint31 form.<br></p>

<h4>
<a id="user-content-syntax-58" class="anchor" href="#syntax-58" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>tmr.time()</p>

<h4>
<a id="user-content-parameters-58" class="anchor" href="#parameters-58" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil.</p>

<h4>
<a id="user-content-returns-58" class="anchor" href="#returns-58" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number</p>

<h4>
<a id="user-content-example-58" class="anchor" href="#example-58" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-58" class="anchor" href="#see-also-58" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#tmrnow">tmr.now()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-gpio-module-1" class="anchor" href="#gpio-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>GPIO module</h1>

<h2>
<a id="user-content-constant-1" class="anchor" href="#constant-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>gpio.OUTPUT, gpio.INPUT, gpio.INT, gpio.HIGH, gpio.LOW</p>

<h2>
<a id="user-content-gpiomode" class="anchor" href="#gpiomode" aria-hidden="true"><span class="octicon octicon-link"></span></a>gpio.mode()</h2>

<h4>
<a id="user-content-description-59" class="anchor" href="#description-59" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>initialize pin to GPIO mode, set the pin in/out mode, internal pullup.</p>

<h4>
<a id="user-content-syntax-59" class="anchor" href="#syntax-59" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>gpio.mode(pin, mode, pullup)</p>

<h4>
<a id="user-content-parameters-59" class="anchor" href="#parameters-59" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 0~12, IO index<br>
mode: gpio.OUTPUT or gpio.INPUT, or gpio.INT(interrupt mode)
pullup: gpio.PULLUP or gpio.FLOAT, default: gpio.FLOAT.</p>

<h4>
<a id="user-content-returns-59" class="anchor" href="#returns-59" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-59" class="anchor" href="#example-59" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- set gpio 0 as output.</span>
    gpio.<span class="pl-c1">mode</span>(<span class="pl-c1">0</span>, gpio.<span class="pl-smi">OUTPUT</span>)
</pre></div>

<h4>
<a id="user-content-see-also-59" class="anchor" href="#see-also-59" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#gpioread">gpio.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-gpioread" class="anchor" href="#gpioread" aria-hidden="true"><span class="octicon octicon-link"></span></a>gpio.read()</h2>

<h4>
<a id="user-content-description-60" class="anchor" href="#description-60" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read pin value.</p>

<h4>
<a id="user-content-syntax-60" class="anchor" href="#syntax-60" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>gpio.read(pin)</p>

<h4>
<a id="user-content-parameters-60" class="anchor" href="#parameters-60" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 0~12, IO index</p>

<h4>
<a id="user-content-returns-60" class="anchor" href="#returns-60" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number:0 - low, 1 - high</p>

<h4>
<a id="user-content-example-60" class="anchor" href="#example-60" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- read value of gpio 0.</span>
    gpio.<span class="pl-c1">read</span>(<span class="pl-c1">0</span>)</pre></div>

<h4>
<a id="user-content-see-also-60" class="anchor" href="#see-also-60" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#gpiomode">gpio.mode()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-gpiowrite" class="anchor" href="#gpiowrite" aria-hidden="true"><span class="octicon octicon-link"></span></a>gpio.write()</h2>

<h4>
<a id="user-content-description-61" class="anchor" href="#description-61" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set pin value.</p>

<h4>
<a id="user-content-syntax-61" class="anchor" href="#syntax-61" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>gpio.write(pin)</p>

<h4>
<a id="user-content-parameters-61" class="anchor" href="#parameters-61" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 0~12, IO index<br>
level: gpio.HIGH or gpio.LOW</p>

<h4>
<a id="user-content-returns-61" class="anchor" href="#returns-61" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-61" class="anchor" href="#example-61" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- set pin index 1 to GPIO mode, and set the pin to high.</span>
    pin<span class="pl-k">=</span><span class="pl-c1">1</span>
    gpio.<span class="pl-c1">mode</span>(pin, gpio.<span class="pl-smi">OUTPUT</span>)
    gpio.<span class="pl-c1">write</span>(pin, gpio.<span class="pl-smi">HIGH</span>)</pre></div>

<h4>
<a id="user-content-see-also-61" class="anchor" href="#see-also-61" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#gpiomode">gpio.mode()</a><br>
<strong>-</strong>   <a href="#gpioread">gpio.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-gpiotrig" class="anchor" href="#gpiotrig" aria-hidden="true"><span class="octicon octicon-link"></span></a>gpio.trig()</h2>

<h4>
<a id="user-content-description-62" class="anchor" href="#description-62" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set the interrupt callback function for pin.</p>

<h4>
<a id="user-content-syntax-62" class="anchor" href="#syntax-62" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>gpio.trig(pin, type, function(level))</p>

<h4>
<a id="user-content-parameters-62" class="anchor" href="#parameters-62" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: <strong>1~12</strong>, IO index, pin D0 does not support Interrupt.<br>
type: "up", "down", "both", "low", "high", which represent rising edge, falling edge, both edge, low level, high level trig mode separately.<br>
function(level): callback function when triggered. The gpio level is the param. Use previous callback function if undefined here.</p>

<h4>
<a id="user-content-returns-62" class="anchor" href="#returns-62" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-62" class="anchor" href="#example-62" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- use pin 0 as the input pulse width counter</span>
    pulse1 <span class="pl-k">=</span> <span class="pl-c1">0</span>
    du <span class="pl-k">=</span> <span class="pl-c1">0</span>
    gpio.<span class="pl-c1">mode</span>(<span class="pl-c1">1</span>,gpio.<span class="pl-smi">INT</span>)
    <span class="pl-k">function</span> <span class="pl-en">pin1cb</span>(<span class="pl-smi">level</span>)
     du <span class="pl-k">=</span> tmr.<span class="pl-c1">now</span>() – pulse1
     <span class="pl-c1">print</span>(du)
     pulse1 <span class="pl-k">=</span> tmr.<span class="pl-c1">now</span>()
     <span class="pl-k">if</span> level <span class="pl-k">==</span> <span class="pl-c1">1</span> <span class="pl-k">then</span> gpio.<span class="pl-c1">trig</span>(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>down<span class="pl-pds">"</span></span>) <span class="pl-k">else</span> gpio.<span class="pl-c1">trig</span>(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>up<span class="pl-pds">"</span></span>) <span class="pl-k">end</span>
    <span class="pl-k">end</span>
    gpio.<span class="pl-c1">trig</span>(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>down<span class="pl-pds">"</span></span>,pin1cb)
</pre></div>

<h4>
<a id="user-content-see-also-62" class="anchor" href="#see-also-62" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#gpiomode">gpio.mode()</a><br>
<strong>-</strong>   <a href="#gpiowrite">gpio.write()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-pwm-module-1" class="anchor" href="#pwm-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>PWM module</h1>

<h2>
<a id="user-content-pwmsetup" class="anchor" href="#pwmsetup" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.setup()</h2>

<h4>
<a id="user-content-description-63" class="anchor" href="#description-63" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set pin to PWM mode. Only 3 pins can be set to PWM mode at the most.</p>

<h4>
<a id="user-content-syntax-63" class="anchor" href="#syntax-63" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.setup(pin, clock, duty)</p>

<h4>
<a id="user-content-parameters-63" class="anchor" href="#parameters-63" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index<br>
clock: 1~1000, pwm frequency<br>
duty: 0~1023, pwm duty cycle, max 1023(10bit)</p>

<h4>
<a id="user-content-returns-63" class="anchor" href="#returns-63" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-63" class="anchor" href="#example-63" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- set pin index 1 as pwm output, frequency is 100Hz, duty cycle is half.</span>
    pwm.<span class="pl-c1">setup</span>(<span class="pl-c1">1</span>, <span class="pl-c1">100</span>, <span class="pl-c1">512</span>)</pre></div>

<h4>
<a id="user-content-see-also-63" class="anchor" href="#see-also-63" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmstart">pwm.start()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmclose" class="anchor" href="#pwmclose" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.close()</h2>

<h4>
<a id="user-content-description-64" class="anchor" href="#description-64" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>quit PWM mode for specified pin.</p>

<h4>
<a id="user-content-syntax-64" class="anchor" href="#syntax-64" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.close(pin)</p>

<h4>
<a id="user-content-parameters-64" class="anchor" href="#parameters-64" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index</p>

<h4>
<a id="user-content-returns-64" class="anchor" href="#returns-64" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-64" class="anchor" href="#example-64" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    pwm.<span class="pl-c1">close</span>(<span class="pl-c1">1</span>)</pre></div>

<h4>
<a id="user-content-see-also-64" class="anchor" href="#see-also-64" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmstart">pwm.start()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmstart" class="anchor" href="#pwmstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.start()</h2>

<h4>
<a id="user-content-description-65" class="anchor" href="#description-65" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>pwm starts, you can detect the waveform on the gpio.</p>

<h4>
<a id="user-content-syntax-65" class="anchor" href="#syntax-65" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.start(pin)</p>

<h4>
<a id="user-content-parameters-65" class="anchor" href="#parameters-65" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index</p>

<h4>
<a id="user-content-returns-65" class="anchor" href="#returns-65" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-65" class="anchor" href="#example-65" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    pwm.<span class="pl-c1">start</span>(<span class="pl-c1">1</span>)</pre></div>

<h4>
<a id="user-content-see-also-65" class="anchor" href="#see-also-65" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmstop">pwm.stop()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmstop" class="anchor" href="#pwmstop" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.stop()</h2>

<h4>
<a id="user-content-description-66" class="anchor" href="#description-66" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>pause the output of PWM waveform.</p>

<h4>
<a id="user-content-syntax-66" class="anchor" href="#syntax-66" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.stop(pin)</p>

<h4>
<a id="user-content-parameters-66" class="anchor" href="#parameters-66" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index</p>

<h4>
<a id="user-content-returns-66" class="anchor" href="#returns-66" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-66" class="anchor" href="#example-66" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    pwm.<span class="pl-c1">stop</span>(<span class="pl-c1">1</span>)</pre></div>

<h4>
<a id="user-content-see-also-66" class="anchor" href="#see-also-66" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmstart">pwm.start()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmsetclock" class="anchor" href="#pwmsetclock" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.setclock()</h2>

<h4>
<a id="user-content-description-67" class="anchor" href="#description-67" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set pwm frequency for pin.<br>
<strong>-Note:</strong> setup pwm frequency will synchronously change others if there are any. Only one PWM frequency can be allowed for the system.</p>

<h4>
<a id="user-content-syntax-67" class="anchor" href="#syntax-67" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.setclock(pin, clock)</p>

<h4>
<a id="user-content-parameters-67" class="anchor" href="#parameters-67" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index.<br>
clock: 1~1000, pwm frequency.</p>

<h4>
<a id="user-content-returns-67" class="anchor" href="#returns-67" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-67" class="anchor" href="#example-67" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    pwm.<span class="pl-c1">setclock</span>(<span class="pl-c1">1</span>, <span class="pl-c1">100</span>)</pre></div>

<h4>
<a id="user-content-see-also-67" class="anchor" href="#see-also-67" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmgetclock">pwm.getclock()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmgetclock" class="anchor" href="#pwmgetclock" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.getclock()</h2>

<h4>
<a id="user-content-description-68" class="anchor" href="#description-68" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get pwm frequency of pin.</p>

<h4>
<a id="user-content-syntax-68" class="anchor" href="#syntax-68" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.getclock(pin)</p>

<h4>
<a id="user-content-parameters-68" class="anchor" href="#parameters-68" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index.</p>

<h4>
<a id="user-content-returns-68" class="anchor" href="#returns-68" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number:pwm frequency of pin</p>

<h4>
<a id="user-content-example-68" class="anchor" href="#example-68" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(pwm.<span class="pl-c1">getclock</span>(<span class="pl-c1">1</span>))</pre></div>

<h4>
<a id="user-content-see-also-68" class="anchor" href="#see-also-68" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmsetclock">pwm.setclock()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmsetduty" class="anchor" href="#pwmsetduty" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.setduty()</h2>

<h4>
<a id="user-content-description-69" class="anchor" href="#description-69" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set duty clycle for pin.</p>

<h4>
<a id="user-content-syntax-69" class="anchor" href="#syntax-69" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.setduty(pin, duty)</p>

<h4>
<a id="user-content-parameters-69" class="anchor" href="#parameters-69" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index<br>
duty: 0~1023, pwm duty cycle, max 1023(10bit).</p>

<h4>
<a id="user-content-returns-69" class="anchor" href="#returns-69" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-69" class="anchor" href="#example-69" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    pwm.<span class="pl-c1">setduty</span>(<span class="pl-c1">1</span>, <span class="pl-c1">512</span>)</pre></div>

<h4>
<a id="user-content-see-also-69" class="anchor" href="#see-also-69" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmgetduty">pwm.getduty()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-pwmgetduty" class="anchor" href="#pwmgetduty" aria-hidden="true"><span class="octicon octicon-link"></span></a>pwm.getduty()</h2>

<h4>
<a id="user-content-description-70" class="anchor" href="#description-70" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get duty clycle for pin.</p>

<h4>
<a id="user-content-syntax-70" class="anchor" href="#syntax-70" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>pwm.getduty(pin)</p>

<h4>
<a id="user-content-parameters-70" class="anchor" href="#parameters-70" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index</p>

<h4>
<a id="user-content-returns-70" class="anchor" href="#returns-70" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: duty cycle, max 1023.</p>

<h4>
<a id="user-content-example-70" class="anchor" href="#example-70" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- D1 is connected to green led</span>
    <span class="pl-c">-- D2 is connected to blue led</span>
    <span class="pl-c">-- D3 is connected to red led</span>
    pwm.<span class="pl-c1">setup</span>(<span class="pl-c1">1</span>,<span class="pl-c1">500</span>,<span class="pl-c1">512</span>)
    pwm.<span class="pl-c1">setup</span>(<span class="pl-c1">2</span>,<span class="pl-c1">500</span>,<span class="pl-c1">512</span>)
    pwm.<span class="pl-c1">setup</span>(<span class="pl-c1">3</span>,<span class="pl-c1">500</span>,<span class="pl-c1">512</span>)
    pwm.<span class="pl-c1">start</span>(<span class="pl-c1">1</span>)
    pwm.<span class="pl-c1">start</span>(<span class="pl-c1">2</span>)
    pwm.<span class="pl-c1">start</span>(<span class="pl-c1">3</span>)
    <span class="pl-k">function</span> <span class="pl-en">led</span>(<span class="pl-smi">r,g,b</span>)
      pwm.<span class="pl-c1">setduty</span>(<span class="pl-c1">1</span>,g)
      pwm.<span class="pl-c1">setduty</span>(<span class="pl-c1">2</span>,b)
      pwm.<span class="pl-c1">setduty</span>(<span class="pl-c1">3</span>,r)
    <span class="pl-k">end</span>
    <span class="pl-c1">led</span>(<span class="pl-c1">512</span>,<span class="pl-c1">0</span>,<span class="pl-c1">0</span>) <span class="pl-c">--  set led to red</span>
    <span class="pl-c1">led</span>(<span class="pl-c1">0</span>,<span class="pl-c1">0</span>,<span class="pl-c1">512</span>) <span class="pl-c">-- set led to blue.</span>
</pre></div>

<h4>
<a id="user-content-see-also-70" class="anchor" href="#see-also-70" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#pwmsetduty">pwm.setduty()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-net-module-1" class="anchor" href="#net-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>net module</h1>

<h2>
<a id="user-content-constant-2" class="anchor" href="#constant-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>net.TCP, net.UDP</p>

<h2>
<a id="user-content-netcreateserver" class="anchor" href="#netcreateserver" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.createServer()</h2>

<h4>
<a id="user-content-description-71" class="anchor" href="#description-71" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>create a server.</p>

<h4>
<a id="user-content-syntax-71" class="anchor" href="#syntax-71" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>net.createServer(type, timeout)</p>

<h4>
<a id="user-content-parameters-71" class="anchor" href="#parameters-71" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>type: net.TCP or net.UDP<br>
timeout: for a TCP server, timeout is 1~28800 seconds, for a inactive client to disconnected.</p>

<h4>
<a id="user-content-returns-71" class="anchor" href="#returns-71" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>net.server sub module</p>

<h4>
<a id="user-content-example-71" class="anchor" href="#example-71" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    net.<span class="pl-c1">createServer</span>(net.<span class="pl-smi">TCP</span>, <span class="pl-c1">30</span>) <span class="pl-c">-- 30s timeout</span></pre></div>

<h4>
<a id="user-content-see-also-71" class="anchor" href="#see-also-71" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#netcreateconnection">net.createConnection()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-netcreateconnection" class="anchor" href="#netcreateconnection" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.createConnection()</h2>

<h4>
<a id="user-content-description-72" class="anchor" href="#description-72" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Create a client.</p>

<h4>
<a id="user-content-syntax-72" class="anchor" href="#syntax-72" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>net.createConnection(type, secure)</p>

<h4>
<a id="user-content-parameters-72" class="anchor" href="#parameters-72" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>type: net.TCP or net.UDP<br>
secure: 1 or 0, 1 for ssl link, 0 for normal link</p>

<h4>
<a id="user-content-returns-72" class="anchor" href="#returns-72" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>net.socket sub module</p>

<h4>
<a id="user-content-example-72" class="anchor" href="#example-72" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    net.<span class="pl-c1">createConnection</span>(net.<span class="pl-smi">UDP</span>, <span class="pl-c1">0</span>)</pre></div>

<h4>
<a id="user-content-see-also-72" class="anchor" href="#see-also-72" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#netcreateserver">net.createServer()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-netserver-module" class="anchor" href="#netserver-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.server module</h1>

<h2>
<a id="user-content-netserverlisten" class="anchor" href="#netserverlisten" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.server:listen()</h2>

<h4>
<a id="user-content-description-73" class="anchor" href="#description-73" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>listen on port from [ip] address.</p>

<h4>
<a id="user-content-syntax-73" class="anchor" href="#syntax-73" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>net.server.listen(port,[ip],function(net.socket))</p>

<h4>
<a id="user-content-parameters-73" class="anchor" href="#parameters-73" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>port: port number<br>
ip:ip address string, can be omitted<br>
function(net.socket): callback function, pass to Caller function as param if a connection is created successfully</p>

<h4>
<a id="user-content-returns-73" class="anchor" href="#returns-73" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-73" class="anchor" href="#example-73" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- create a server</span>
    sv<span class="pl-k">=</span>net.<span class="pl-c1">createServer</span>(net.<span class="pl-smi">TCP</span>, <span class="pl-c1">30</span>)    <span class="pl-c">-- 30s time out for a inactive client</span>
    <span class="pl-c">-- server listen on 80, if data received, print data to console, and send "hello world" to remote.</span>
    sv:<span class="pl-c1">listen</span>(<span class="pl-c1">80</span>,<span class="pl-k">function</span>(<span class="pl-smi">c</span>)
      c:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>receive<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">c, pl</span>) <span class="pl-c1">print</span>(pl) <span class="pl-k">end</span>)
      c:<span class="pl-c1">send</span>(<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>)
      <span class="pl-k">end</span>)</pre></div>

<h4>
<a id="user-content-see-also-73" class="anchor" href="#see-also-73" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#netcreateserver">net.createServer()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-netserverclose" class="anchor" href="#netserverclose" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.server:close()</h2>

<h4>
<a id="user-content-description-74" class="anchor" href="#description-74" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>close server.</p>

<h4>
<a id="user-content-syntax-74" class="anchor" href="#syntax-74" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>net.server.close()</p>

<h4>
<a id="user-content-parameters-74" class="anchor" href="#parameters-74" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-74" class="anchor" href="#returns-74" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-74" class="anchor" href="#example-74" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- create a server</span>
    sv<span class="pl-k">=</span>net.<span class="pl-c1">createServer</span>(net.<span class="pl-smi">TCP</span>, <span class="pl-c1">30</span>)
    <span class="pl-c">-- close server</span>
    sv:<span class="pl-c1">close</span>()</pre></div>

<h4>
<a id="user-content-see-also-74" class="anchor" href="#see-also-74" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#netcreateserver">net.createServer()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-netsocket-module" class="anchor" href="#netsocket-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket module</h1>

<h2>
<a id="user-content-netsocketconnect" class="anchor" href="#netsocketconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket:connect()</h2>

<h4>
<a id="user-content-description-75" class="anchor" href="#description-75" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>connect to remote.</p>

<h4>
<a id="user-content-syntax-75" class="anchor" href="#syntax-75" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>connect(port, ip/domain)</p>

<h4>
<a id="user-content-parameters-75" class="anchor" href="#parameters-75" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>port: port number<br>
ip: ip address or domain name in string</p>

<h4>
<a id="user-content-returns-75" class="anchor" href="#returns-75" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-75" class="anchor" href="#see-also-75" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#netsocketon">net.socket:on()</a>
<strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-netsocketsend" class="anchor" href="#netsocketsend" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket:send()</h2>

<h4>
<a id="user-content-description-76" class="anchor" href="#description-76" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>send data to remote via connection.</p>

<h4>
<a id="user-content-syntax-76" class="anchor" href="#syntax-76" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>send(string, function(sent))</p>

<h4>
<a id="user-content-parameters-76" class="anchor" href="#parameters-76" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>string: data in string which will be sent to remote<br>
function(sent): callback function for sending string</p>

<h4>
<a id="user-content-returns-76" class="anchor" href="#returns-76" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p><code>nil</code></p>

<h4>
<a id="user-content-see-also-76" class="anchor" href="#see-also-76" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#netsocketon">net.socket:on()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-netsocketon" class="anchor" href="#netsocketon" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket:on()</h2>

<h4>
<a id="user-content-description-77" class="anchor" href="#description-77" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>register callback function for event.</p>

<h4>
<a id="user-content-syntax-77" class="anchor" href="#syntax-77" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>on(event, function cb())</p>

<h4>
<a id="user-content-parameters-77" class="anchor" href="#parameters-77" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p><code>event</code>: string, which can be: "connection", "reconnection", "disconnection", "receive", "sent"<br>
<code>function cb(net.socket, [string])</code>: callback function. The first param is the socket.<br>
If event is "receive",  the second param is received data in string.</p>

<h4>
<a id="user-content-returns-77" class="anchor" href="#returns-77" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p><code>nil</code></p>

<h4>
<a id="user-content-example-75" class="anchor" href="#example-75" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    sk<span class="pl-k">=</span>net.<span class="pl-c1">createConnection</span>(net.<span class="pl-smi">TCP</span>, <span class="pl-c1">0</span>)
    sk:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>receive<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">sck, c</span>) <span class="pl-c1">print</span>(c) <span class="pl-k">end</span> )
    sk:<span class="pl-c1">connect</span>(<span class="pl-c1">80</span>,<span class="pl-s"><span class="pl-pds">"</span>192.168.0.66<span class="pl-pds">"</span></span>)
    sk:<span class="pl-c1">send</span>(<span class="pl-s"><span class="pl-pds">"</span>GET / HTTP/1.1<span class="pl-cce">\r\n</span>Host: 192.168.0.66<span class="pl-cce">\r\n</span>Connection: keep-alive<span class="pl-cce">\r\n</span>Accept: */*<span class="pl-cce">\r\n\r\n</span><span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="user-content-see-also-77" class="anchor" href="#see-also-77" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#netcreateserver">net.createServer()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-netsocketclose" class="anchor" href="#netsocketclose" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket:close()</h2>

<h4>
<a id="user-content-description-78" class="anchor" href="#description-78" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>close socket.</p>

<h4>
<a id="user-content-syntax-78" class="anchor" href="#syntax-78" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>close()</p>

<h4>
<a id="user-content-parameters-78" class="anchor" href="#parameters-78" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-78" class="anchor" href="#returns-78" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-78" class="anchor" href="#see-also-78" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#netcreateserver">net.createServer()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-netsocketdns" class="anchor" href="#netsocketdns" aria-hidden="true"><span class="octicon octicon-link"></span></a>net.socket:dns()</h2>

<h4>
<a id="user-content-description-79" class="anchor" href="#description-79" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>get domain ip</p>

<h4>
<a id="user-content-syntax-79" class="anchor" href="#syntax-79" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>dns(domain, function(net.socket, ip))</p>

<h4>
<a id="user-content-parameters-79" class="anchor" href="#parameters-79" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>domain: domain name.<br>
function (net.socket, ip): callback function. The first param is the socket, the second param is the ip address in string.</p>

<h4>
<a id="user-content-returns-79" class="anchor" href="#returns-79" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-76" class="anchor" href="#example-76" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    sk<span class="pl-k">=</span>net.<span class="pl-c1">createConnection</span>(net.<span class="pl-smi">TCP</span>, <span class="pl-c1">0</span>)
    sk:<span class="pl-c1">dns</span>(<span class="pl-s"><span class="pl-pds">"</span>www.nodemcu.com<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>(<span class="pl-smi">conn,ip</span>) <span class="pl-c1">print</span>(ip) <span class="pl-k">end</span>)
    sk <span class="pl-k">=</span> <span class="pl-c1">nil</span></pre></div>

<h4>
<a id="user-content-see-also-79" class="anchor" href="#see-also-79" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#netcreateserver">net.createServer()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-i2c-module-1" class="anchor" href="#i2c-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c module</h1>

<h2>
<a id="user-content-constant-3" class="anchor" href="#constant-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>i2c.SLOW,  i2c.TRANSMITTER, i2c. RECEIVER.  FAST（400k）is not supported for now.</p>

<h2>
<a id="user-content-i2csetup" class="anchor" href="#i2csetup" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c.setup()</h2>

<h4>
<a id="user-content-description-80" class="anchor" href="#description-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>initialize i2c.</p>

<h4>
<a id="user-content-syntax-80" class="anchor" href="#syntax-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>i2c.setup(id, pinSDA, pinSCL, speed)</p>

<h4>
<a id="user-content-parameters-80" class="anchor" href="#parameters-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id = 0<br>
pinSDA: 1~12, IO index<br>
pinSCL: 1~12, IO index<br>
speed:  i2c.SLOW</p>

<h4>
<a id="user-content-returns-80" class="anchor" href="#returns-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>speed: the seted speed.</p>

<h4>
<a id="user-content-see-also-80" class="anchor" href="#see-also-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#i2cread">i2c.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-i2cstart" class="anchor" href="#i2cstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c.start()</h2>

<h4>
<a id="user-content-description-81" class="anchor" href="#description-81" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>start i2c transporting.</p>

<h4>
<a id="user-content-syntax-81" class="anchor" href="#syntax-81" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>i2c.start(id)</p>

<h4>
<a id="user-content-parameters-81" class="anchor" href="#parameters-81" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id = 0</p>

<h4>
<a id="user-content-returns-81" class="anchor" href="#returns-81" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-81" class="anchor" href="#see-also-81" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#i2cread">i2c.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-i2cstop" class="anchor" href="#i2cstop" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c.stop()</h2>

<h4>
<a id="user-content-description-82" class="anchor" href="#description-82" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>stop i2c transporting.</p>

<h4>
<a id="user-content-syntax-82" class="anchor" href="#syntax-82" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>i2c.stop(id)</p>

<h4>
<a id="user-content-parameters-82" class="anchor" href="#parameters-82" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id = 0</p>

<h4>
<a id="user-content-returns-82" class="anchor" href="#returns-82" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-82" class="anchor" href="#see-also-82" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#i2cread">i2c.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-i2caddress" class="anchor" href="#i2caddress" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c.address()</h2>

<h4>
<a id="user-content-description-83" class="anchor" href="#description-83" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>setup i2c address and read/write mode.</p>

<h4>
<a id="user-content-syntax-83" class="anchor" href="#syntax-83" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>i2c.address(id, device_addr, direction)</p>

<h4>
<a id="user-content-parameters-83" class="anchor" href="#parameters-83" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id=0<br>
device_addr: device address.<br>
direction: i2c.TRANSMITTER for writing mode , i2c. RECEIVER for reading mode</p>

<h4>
<a id="user-content-returns-83" class="anchor" href="#returns-83" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>true: get ack
false: no ack get</p>

<h4>
<a id="user-content-see-also-83" class="anchor" href="#see-also-83" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#i2cread">i2c.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-i2cwrite" class="anchor" href="#i2cwrite" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c.write()</h2>

<h4>
<a id="user-content-description-84" class="anchor" href="#description-84" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>write data to i2c, data can be multi numbers, string or lua table.</p>

<h4>
<a id="user-content-syntax-84" class="anchor" href="#syntax-84" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>i2c.write(id, data1, data2,...)</p>

<h4>
<a id="user-content-parameters-84" class="anchor" href="#parameters-84" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id=0<br>
data: data can be numbers, string or lua table.</p>

<h4>
<a id="user-content-returns-84" class="anchor" href="#returns-84" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: number of bytes wrote.</p>

<h4>
<a id="user-content-example-77" class="anchor" href="#example-77" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    i2c.<span class="pl-c1">write</span>(<span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>)</pre></div>

<h4>
<a id="user-content-see-also-84" class="anchor" href="#see-also-84" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#i2cread">i2c.read()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-i2cread" class="anchor" href="#i2cread" aria-hidden="true"><span class="octicon octicon-link"></span></a>i2c.read()</h2>

<h4>
<a id="user-content-description-85" class="anchor" href="#description-85" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read data for len bytes.</p>

<h4>
<a id="user-content-syntax-85" class="anchor" href="#syntax-85" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>i2c.read(id, len)</p>

<h4>
<a id="user-content-parameters-85" class="anchor" href="#parameters-85" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id=0<br>
len: data length</p>

<h4>
<a id="user-content-returns-85" class="anchor" href="#returns-85" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>string:data received.</p>

<h4>
<a id="user-content-example-78" class="anchor" href="#example-78" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    id<span class="pl-k">=</span><span class="pl-c1">0</span>
    sda<span class="pl-k">=</span><span class="pl-c1">1</span>
    scl<span class="pl-k">=</span><span class="pl-c1">2</span>

    <span class="pl-c">-- initialize i2c, set pin1 as sda, set pin2 as scl</span>
    i2c.<span class="pl-c1">setup</span>(id,sda,scl,i2c.<span class="pl-smi">SLOW</span>)

    <span class="pl-c">-- user defined function: read from reg_addr content of dev_addr</span>
    <span class="pl-k">function</span> <span class="pl-en">read_reg</span>(<span class="pl-smi">dev_addr, reg_addr</span>)
      i2c.<span class="pl-c1">start</span>(id)
      i2c.<span class="pl-c1">address</span>(id, dev_addr ,i2c.<span class="pl-smi">TRANSMITTER</span>)
      i2c.<span class="pl-c1">write</span>(id,reg_addr)
      i2c.<span class="pl-c1">stop</span>(id)
      i2c.<span class="pl-c1">start</span>(id)
      i2c.<span class="pl-c1">address</span>(id, dev_addr,i2c.<span class="pl-smi">RECEIVER</span>)
      c<span class="pl-k">=</span>i2c.<span class="pl-c1">read</span>(id,<span class="pl-c1">1</span>)
      i2c.<span class="pl-c1">stop</span>(id)
      <span class="pl-k">return</span> c
    <span class="pl-k">end</span>

    <span class="pl-c">-- get content of register 0xAA of device 0x77</span>
    reg <span class="pl-k">=</span> <span class="pl-c1">read_reg</span>(<span class="pl-c1">0</span>x77,<span class="pl-c1"> 0xAA</span>)
    <span class="pl-c1">print</span>(<span class="pl-c1">string.byte</span>(reg))
</pre></div>

<h4>
<a id="user-content-see-also-85" class="anchor" href="#see-also-85" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href="#i2cwrite">i2c.write()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-adc-module-1" class="anchor" href="#adc-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>adc module</h1>

<h2>
<a id="user-content-constant-4" class="anchor" href="#constant-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>none</p>

<h2>
<a id="user-content-adcread" class="anchor" href="#adcread" aria-hidden="true"><span class="octicon octicon-link"></span></a>adc.read()</h2>

<h4>
<a id="user-content-description-86" class="anchor" href="#description-86" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read adc value of id, esp8266 has only one 10bit adc, id=0, pin TOUT</p>

<h4>
<a id="user-content-syntax-86" class="anchor" href="#syntax-86" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>adc.read(id)</p>

<h4>
<a id="user-content-parameters-86" class="anchor" href="#parameters-86" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id = 0</p>

<h4>
<a id="user-content-returns-86" class="anchor" href="#returns-86" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>adc value</p>

<h4>
<a id="user-content-see-also-86" class="anchor" href="#see-also-86" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-adcreadvdd33" class="anchor" href="#adcreadvdd33" aria-hidden="true"><span class="octicon octicon-link"></span></a>adc.readvdd33()</h2>

<h4>
<a id="user-content-description-87" class="anchor" href="#description-87" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Reading vdd33 pin voltage</p>

<h4>
<a id="user-content-syntax-87" class="anchor" href="#syntax-87" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>adc.readvdd33()</p>

<h4>
<a id="user-content-parameters-87" class="anchor" href="#parameters-87" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>no parameters</p>

<h4>
<a id="user-content-returns-87" class="anchor" href="#returns-87" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>mV</p>

<h4>
<a id="user-content-example-79" class="anchor" href="#example-79" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c1">print</span>(adc.<span class="pl-c1">readvdd33</span>())</pre></div>

<p>output</p>

<blockquote>
<p>3345</p>
</blockquote>

<div class="highlight highlight-lua"><pre>    v <span class="pl-k">=</span> adc.<span class="pl-c1">readvdd33</span>() <span class="pl-k">/</span> <span class="pl-c1">1000</span>
    <span class="pl-c1">print</span>(v)
    v<span class="pl-k">=</span><span class="pl-c1">nil</span></pre></div>

<p>output</p>

<blockquote>
<p>3.315</p>
</blockquote>

<h4>
<a id="user-content-see-also-87" class="anchor" href="#see-also-87" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-uart-module-1" class="anchor" href="#uart-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>uart module</h1>

<h2>
<a id="user-content-constant-5" class="anchor" href="#constant-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>none</p>

<h2>
<a id="user-content-uartsetup" class="anchor" href="#uartsetup" aria-hidden="true"><span class="octicon octicon-link"></span></a>uart.setup()</h2>

<h4>
<a id="user-content-description-88" class="anchor" href="#description-88" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>setup uart's baud, databits, parity, stopbits, echo.</p>

<h4>
<a id="user-content-syntax-88" class="anchor" href="#syntax-88" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>uart.setup( id, baud, databits, parity, stopbits, echo )</p>

<h4>
<a id="user-content-parameters-88" class="anchor" href="#parameters-88" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id = 0, only 1 uart supported.<br>
baud = 300, 600, 1200, 2400, 4800, 9600, 19200, 38400, 57600, 74880, 115200, 230400, 460800, 921600, 1843200, 2686400. <br>
databits = 5, 6, 7, 8. <br>
parity = 0(none).<br>
stopbits = 1(1 stopbit), 2(2 stopbit).<br>
echo = 0(close echo back).</p>

<h4>
<a id="user-content-returns-88" class="anchor" href="#returns-88" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>baud.</p>

<h4>
<a id="user-content-see-also-88" class="anchor" href="#see-also-88" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-uarton" class="anchor" href="#uarton" aria-hidden="true"><span class="octicon octicon-link"></span></a>uart.on()</h2>

<h4>
<a id="user-content-description-89" class="anchor" href="#description-89" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set the callback function to the uart event,<br>
"data" event supported, means there is data input from uart.</p>

<h4>
<a id="user-content-syntax-89" class="anchor" href="#syntax-89" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>uart.on(method, [number/end_char], [function], [run_input])</p>

<h4>
<a id="user-content-parameters-89" class="anchor" href="#parameters-89" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>method = "data", there is data input from uart.<br>
number/end_char: if pass in a number n
if n=0, will receive every char in buffer.<br>
if pass in a one char string "c", the callback will called when "c" is encounterd, or max n=255 received.<br>
function: callback function, event "data" has a callback like this: function(data) end<br>
run_input: 0 or 1, 0: input from uart will not go into lua interpreter, can accept binary data.<br>
1: input from uart will go into lua interpreter, and run.</p>

<h4>
<a id="user-content-returns-89" class="anchor" href="#returns-89" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-80" class="anchor" href="#example-80" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>    <span class="pl-c">-- when 4 chars is received.</span>
    uart.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>, <span class="pl-c1">4</span>, 
      <span class="pl-k">function</span>(<span class="pl-smi">data</span>)
        <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>receive from uart:<span class="pl-pds">"</span></span>, data)
        <span class="pl-k">if</span> data<span class="pl-k">==</span><span class="pl-s"><span class="pl-pds">"</span>quit<span class="pl-pds">"</span></span> <span class="pl-k">then</span> 
          uart.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>) 
        <span class="pl-k">end</span>        
    <span class="pl-k">end</span>, <span class="pl-c1">0</span>)
    <span class="pl-c">-- when '\r' is received.</span>
    uart.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\r</span><span class="pl-pds">"</span></span>, 
      <span class="pl-k">function</span>(<span class="pl-smi">data</span>)
        <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>receive from uart:<span class="pl-pds">"</span></span>, data)
        <span class="pl-k">if</span> data<span class="pl-k">==</span><span class="pl-s"><span class="pl-pds">"</span>quit<span class="pl-cce">\r</span><span class="pl-pds">"</span></span> <span class="pl-k">then</span> 
          uart.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>) 
        <span class="pl-k">end</span>        
    <span class="pl-k">end</span>, <span class="pl-c1">0</span>)</pre></div>

<h4>
<a id="user-content-see-also-89" class="anchor" href="#see-also-89" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-uartwrite" class="anchor" href="#uartwrite" aria-hidden="true"><span class="octicon octicon-link"></span></a>uart.write()</h2>

<h4>
<a id="user-content-description-90" class="anchor" href="#description-90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>write string to uart.</p>

<h4>
<a id="user-content-syntax-90" class="anchor" href="#syntax-90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>uart.write( id, string1, string2... )</p>

<h4>
<a id="user-content-parameters-90" class="anchor" href="#parameters-90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id = 0, only 1 uart supported.<br>
string1..n: string write to uart.</p>

<h4>
<a id="user-content-returns-90" class="anchor" href="#returns-90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-90" class="anchor" href="#see-also-90" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-onewire-module" class="anchor" href="#onewire-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>onewire module</h1>

<h2>
<a id="user-content-constant-6" class="anchor" href="#constant-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>none</p>

<h2>
<a id="user-content-owsetup" class="anchor" href="#owsetup" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.setup()</h2>

<h4>
<a id="user-content-description-91" class="anchor" href="#description-91" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>set a pin in onewire mode.<br></p>

<h4>
<a id="user-content-syntax-91" class="anchor" href="#syntax-91" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.setup(pin)</p>

<h4>
<a id="user-content-parameters-91" class="anchor" href="#parameters-91" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index<br></p>

<h4>
<a id="user-content-returns-91" class="anchor" href="#returns-91" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-91" class="anchor" href="#see-also-91" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owreset" class="anchor" href="#owreset" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.reset()</h2>

<h4>
<a id="user-content-description-92" class="anchor" href="#description-92" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Perform a 1-Wire reset cycle. <br></p>

<h4>
<a id="user-content-syntax-92" class="anchor" href="#syntax-92" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.reset(pin)</p>

<h4>
<a id="user-content-parameters-92" class="anchor" href="#parameters-92" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index<br></p>

<h4>
<a id="user-content-returns-92" class="anchor" href="#returns-92" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: Returns 1 if a device responds with a presence pulse.  Returns 0 if there is no device or the bus is shorted or otherwise held low for more than 250uS</p>

<h4>
<a id="user-content-see-also-92" class="anchor" href="#see-also-92" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owskip" class="anchor" href="#owskip" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.skip()</h2>

<h4>
<a id="user-content-description-93" class="anchor" href="#description-93" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Issue a 1-Wire rom skip command, to address all on bus. <br></p>

<h4>
<a id="user-content-syntax-93" class="anchor" href="#syntax-93" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.skip(pin)</p>

<h4>
<a id="user-content-parameters-93" class="anchor" href="#parameters-93" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index<br></p>

<h4>
<a id="user-content-returns-93" class="anchor" href="#returns-93" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-93" class="anchor" href="#see-also-93" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owselect" class="anchor" href="#owselect" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.select()</h2>

<h4>
<a id="user-content-description-94" class="anchor" href="#description-94" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Issue a 1-Wire rom select command, make sure you do the ow.reset(pin) first. <br></p>

<h4>
<a id="user-content-syntax-94" class="anchor" href="#syntax-94" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.select(pin, rom)</p>

<h4>
<a id="user-content-parameters-94" class="anchor" href="#parameters-94" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: 1~12, IO index<br>
rom: string value, len 8, rom code of the salve device</p>

<h4>
<a id="user-content-returns-94" class="anchor" href="#returns-94" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-81" class="anchor" href="#example-81" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c">-- 18b20 Example</span>
pin <span class="pl-k">=</span> <span class="pl-c1">9</span>
ow.<span class="pl-c1">setup</span>(pin)
count <span class="pl-k">=</span> <span class="pl-c1">0</span>
<span class="pl-k">repeat</span>
  count <span class="pl-k">=</span> count <span class="pl-k">+</span> <span class="pl-c1">1</span>
  addr <span class="pl-k">=</span> ow.<span class="pl-c1">reset_search</span>(pin)
  addr <span class="pl-k">=</span> ow.<span class="pl-c1">search</span>(pin)
  tmr.<span class="pl-c1">wdclr</span>()
<span class="pl-k">until</span>((addr <span class="pl-k">~=</span> <span class="pl-c1">nil</span>) <span class="pl-k">or</span> (count <span class="pl-k">&gt;</span> <span class="pl-c1">100</span>))
<span class="pl-k">if</span> (addr <span class="pl-k">==</span> <span class="pl-c1">nil</span>) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>No more addresses.<span class="pl-pds">"</span></span>)
<span class="pl-k">else</span>
  <span class="pl-c1">print</span>(addr:<span class="pl-c1">byte</span>(<span class="pl-c1">1</span>,<span class="pl-c1">8</span>))
  crc <span class="pl-k">=</span> ow.<span class="pl-c1">crc8</span>(<span class="pl-c1">string.sub</span>(addr,<span class="pl-c1">1</span>,<span class="pl-c1">7</span>))
  <span class="pl-k">if</span> (crc <span class="pl-k">==</span> addr:<span class="pl-c1">byte</span>(<span class="pl-c1">8</span>)) <span class="pl-k">then</span>
    <span class="pl-k">if</span> ((addr:<span class="pl-c1">byte</span>(<span class="pl-c1">1</span>) <span class="pl-k">==</span><span class="pl-c1"> 0x10</span>) <span class="pl-k">or</span> (addr:<span class="pl-c1">byte</span>(<span class="pl-c1">1</span>) <span class="pl-k">==</span><span class="pl-c1"> 0x28</span>)) <span class="pl-k">then</span>
      <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Device is a DS18S20 family device.<span class="pl-pds">"</span></span>)
        <span class="pl-k">repeat</span>
          ow.<span class="pl-c1">reset</span>(pin)
          ow.<span class="pl-c1">select</span>(pin, addr)
          ow.<span class="pl-c1">write</span>(pin,<span class="pl-c1"> 0x44</span>, <span class="pl-c1">1</span>)
          tmr.<span class="pl-c1">delay</span>(<span class="pl-c1">1000000</span>)
          present <span class="pl-k">=</span> ow.<span class="pl-c1">reset</span>(pin)
          ow.<span class="pl-c1">select</span>(pin, addr)
          ow.<span class="pl-c1">write</span>(pin,<span class="pl-c1">0</span>xBE,<span class="pl-c1">1</span>)
          <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>P=<span class="pl-pds">"</span></span><span class="pl-k">..</span>present)  
          data <span class="pl-k">=</span> <span class="pl-c1">nil</span>
          data <span class="pl-k">=</span> <span class="pl-c1">string.char</span>(ow.<span class="pl-c1">read</span>(pin))
          <span class="pl-k">for</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span>, <span class="pl-c1">8</span> <span class="pl-k">do</span>
            data <span class="pl-k">=</span> data <span class="pl-k">..</span> <span class="pl-c1">string.char</span>(ow.<span class="pl-c1">read</span>(pin))
          <span class="pl-k">end</span>
          <span class="pl-c1">print</span>(data:<span class="pl-c1">byte</span>(<span class="pl-c1">1</span>,<span class="pl-c1">9</span>))
          crc <span class="pl-k">=</span> ow.<span class="pl-c1">crc8</span>(<span class="pl-c1">string.sub</span>(data,<span class="pl-c1">1</span>,<span class="pl-c1">8</span>))
          <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>CRC=<span class="pl-pds">"</span></span><span class="pl-k">..</span>crc)
          <span class="pl-k">if</span> (crc <span class="pl-k">==</span> data:<span class="pl-c1">byte</span>(<span class="pl-c1">9</span>)) <span class="pl-k">then</span>
             t <span class="pl-k">=</span> (data:<span class="pl-c1">byte</span>(<span class="pl-c1">1</span>) <span class="pl-k">+</span> data:<span class="pl-c1">byte</span>(<span class="pl-c1">2</span>) <span class="pl-k">*</span> <span class="pl-c1">256</span>) <span class="pl-k">*</span> <span class="pl-c1">625</span>
             t1 <span class="pl-k">=</span> t <span class="pl-k">/</span> <span class="pl-c1">10000</span>
             t2 <span class="pl-k">=</span> t <span class="pl-k">%</span> <span class="pl-c1">10000</span>
             <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Temperature=<span class="pl-pds">"</span></span><span class="pl-k">..</span>t1<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span><span class="pl-k">..</span>t2<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>Centigrade<span class="pl-pds">"</span></span>)
          <span class="pl-k">end</span>                   
          tmr.<span class="pl-c1">wdclr</span>()
        <span class="pl-k">until</span> <span class="pl-c1">false</span>
    <span class="pl-k">else</span>
      <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Device family is not recognized.<span class="pl-pds">"</span></span>)
    <span class="pl-k">end</span>
  <span class="pl-k">else</span>
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>CRC is not valid!<span class="pl-pds">"</span></span>)
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>

<h4>
<a id="user-content-see-also-94" class="anchor" href="#see-also-94" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owwrite" class="anchor" href="#owwrite" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.write()</h2>

<h4>
<a id="user-content-description-95" class="anchor" href="#description-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Write a byte. If 'power' is 1 then the wire is held high at the end for parasitically powered devices. You are responsible for eventually depowering it by calling depower() or doing another read or write. <br></p>

<h4>
<a id="user-content-syntax-95" class="anchor" href="#syntax-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.write(pin, v, power)</p>

<h4>
<a id="user-content-parameters-95" class="anchor" href="#parameters-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br>
v:  byte to be written to salve device <br>
power:  1 for wire being held high for parasitically powered devices.</p>

<h4>
<a id="user-content-returns-95" class="anchor" href="#returns-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-82" class="anchor" href="#example-82" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-95" class="anchor" href="#see-also-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owwrite_bytes" class="anchor" href="#owwrite_bytes" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.write_bytes()</h2>

<h4>
<a id="user-content-description-96" class="anchor" href="#description-96" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Write multi bytes. If 'power' is 1 then the wire is held high at the end for parasitically powered devices. You are responsible for eventually depowering it by calling depower() or doing another read or write. <br></p>

<h4>
<a id="user-content-syntax-96" class="anchor" href="#syntax-96" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.write_bytes(pin, buf, power)</p>

<h4>
<a id="user-content-parameters-96" class="anchor" href="#parameters-96" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br>
buf:  string to be written to salve device <br>
power:  1 for wire being held high for parasitically powered devices.</p>

<h4>
<a id="user-content-returns-96" class="anchor" href="#returns-96" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-83" class="anchor" href="#example-83" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-96" class="anchor" href="#see-also-96" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owread" class="anchor" href="#owread" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.read()</h2>

<h4>
<a id="user-content-description-97" class="anchor" href="#description-97" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read a byte.  <br></p>

<h4>
<a id="user-content-syntax-97" class="anchor" href="#syntax-97" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.read(pin)</p>

<h4>
<a id="user-content-parameters-97" class="anchor" href="#parameters-97" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br></p>

<h4>
<a id="user-content-returns-97" class="anchor" href="#returns-97" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>byte read from slave device.</p>

<h4>
<a id="user-content-example-84" class="anchor" href="#example-84" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-97" class="anchor" href="#see-also-97" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owread_bytes" class="anchor" href="#owread_bytes" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.read_bytes()</h2>

<h4>
<a id="user-content-description-98" class="anchor" href="#description-98" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>read multi bytes. <br></p>

<h4>
<a id="user-content-syntax-98" class="anchor" href="#syntax-98" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.read_bytes(pin, size)</p>

<h4>
<a id="user-content-parameters-98" class="anchor" href="#parameters-98" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br>
size:  number of bytes to be read from slave device.<br></p>

<h4>
<a id="user-content-returns-98" class="anchor" href="#returns-98" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>string: bytes read from slave device.</p>

<h4>
<a id="user-content-example-85" class="anchor" href="#example-85" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-98" class="anchor" href="#see-also-98" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owdepower" class="anchor" href="#owdepower" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.depower()</h2>

<h4>
<a id="user-content-description-99" class="anchor" href="#description-99" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Stop forcing power onto the bus. You only need to do this if you used the 'power' flag to ow.write() or used a ow.write_bytes() and aren't about to do another read or write.<br></p>

<h4>
<a id="user-content-syntax-99" class="anchor" href="#syntax-99" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.depower(pin)</p>

<h4>
<a id="user-content-parameters-99" class="anchor" href="#parameters-99" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br></p>

<h4>
<a id="user-content-example-86" class="anchor" href="#example-86" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-returns-99" class="anchor" href="#returns-99" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-see-also-99" class="anchor" href="#see-also-99" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owreset_search" class="anchor" href="#owreset_search" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.reset_search()</h2>

<h4>
<a id="user-content-description-100" class="anchor" href="#description-100" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Clear the search state so that it will start from the beginning again.<br></p>

<h4>
<a id="user-content-syntax-100" class="anchor" href="#syntax-100" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.reset_search(pin)</p>

<h4>
<a id="user-content-parameters-100" class="anchor" href="#parameters-100" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br></p>

<h4>
<a id="user-content-returns-100" class="anchor" href="#returns-100" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-87" class="anchor" href="#example-87" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-100" class="anchor" href="#see-also-100" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owtarget_search" class="anchor" href="#owtarget_search" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.target_search()</h2>

<h4>
<a id="user-content-description-101" class="anchor" href="#description-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Setup the search to find the device type 'family_code' on the next call to ow.search() if it is present.<br></p>

<h4>
<a id="user-content-syntax-101" class="anchor" href="#syntax-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.target_search(pin, family_code)</p>

<h4>
<a id="user-content-parameters-101" class="anchor" href="#parameters-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br>
family_code:  byte for family code.</p>

<h4>
<a id="user-content-returns-101" class="anchor" href="#returns-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-88" class="anchor" href="#example-88" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-101" class="anchor" href="#see-also-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owsearch" class="anchor" href="#owsearch" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.search()</h2>

<h4>
<a id="user-content-description-102" class="anchor" href="#description-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Look for the next device. <br></p>

<h4>
<a id="user-content-syntax-102" class="anchor" href="#syntax-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.search(pin)</p>

<h4>
<a id="user-content-parameters-102" class="anchor" href="#parameters-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin:  1~12, IO index <br></p>

<h4>
<a id="user-content-returns-102" class="anchor" href="#returns-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>if succeed return a string length of 8, which contain the rom code of slave device. <br>
if failed in searching next device return nil.</p>

<h4>
<a id="user-content-example-89" class="anchor" href="#example-89" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-102" class="anchor" href="#see-also-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owcrc8" class="anchor" href="#owcrc8" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.crc8()</h2>

<h4>
<a id="user-content-description-103" class="anchor" href="#description-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Compute a Dallas Semiconductor 8 bit CRC, these are used in the ROM and scratchpad registers. <br></p>

<h4>
<a id="user-content-syntax-103" class="anchor" href="#syntax-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.crc8(buf)</p>

<h4>
<a id="user-content-parameters-103" class="anchor" href="#parameters-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>buf: string value, data to be calculated check sum in string. <br></p>

<h4>
<a id="user-content-returns-103" class="anchor" href="#returns-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>crc result in byte.</p>

<h4>
<a id="user-content-example-90" class="anchor" href="#example-90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-103" class="anchor" href="#see-also-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owcheck_crc16" class="anchor" href="#owcheck_crc16" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.check_crc16()</h2>

<h4>
<a id="user-content-description-104" class="anchor" href="#description-104" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Compute the 1-Wire CRC16 and compare it against the received CRC. <br></p>

<h4>
<a id="user-content-syntax-104" class="anchor" href="#syntax-104" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.check_crc16(buf, inverted_crc0, inverted_crc1, crc)</p>

<h4>
<a id="user-content-parameters-104" class="anchor" href="#parameters-104" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>buf: string value, data to be calculated check sum in string. <br>
inverted_crc0:  LSB of received CRC. <br>
inverted_crc1:  MSB of received CRC. <br>
crc:  crc starting value (optional)</p>

<h4>
<a id="user-content-returns-104" class="anchor" href="#returns-104" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>bool: true, if the CRC matches; false for dismatches.</p>

<h4>
<a id="user-content-example-91" class="anchor" href="#example-91" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-104" class="anchor" href="#see-also-104" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-owcrc16" class="anchor" href="#owcrc16" aria-hidden="true"><span class="octicon octicon-link"></span></a>ow.crc16()</h2>

<h4>
<a id="user-content-description-105" class="anchor" href="#description-105" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Compute a Dallas Semiconductor 16 bit CRC.  This is required to check the integrity of data received from many 1-Wire devices.  Note that the CRC computed here is <strong>not</strong> what you'll get from the 1-Wire network, for two reasons:<br>
    1) The CRC is transmitted bitwise inverted.<br>
    2) Depending on the endian-ness of your processor, the binary representation of the two-byte return value may have a different byte order than the two bytes you get from 1-Wire. <br></p>

<h4>
<a id="user-content-syntax-105" class="anchor" href="#syntax-105" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ow.crc16(buf, crc)</p>

<h4>
<a id="user-content-parameters-105" class="anchor" href="#parameters-105" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>buf:  string value, data to be calculated check sum in string. <br>
crc:  crc starting value (optional)</p>

<h4>
<a id="user-content-returns-105" class="anchor" href="#returns-105" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>return The CRC16, as defined by Dallas Semiconductor.</p>

<h4>
<a id="user-content-example-92" class="anchor" href="#example-92" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-105" class="anchor" href="#see-also-105" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-bit-module-1" class="anchor" href="#bit-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit module</h1>

<h2>
<a id="user-content-constant-7" class="anchor" href="#constant-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>none</p>

<h2>
<a id="user-content-bitbnot" class="anchor" href="#bitbnot" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.bnot()</h2>

<h4>
<a id="user-content-description-106" class="anchor" href="#description-106" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Bitwise negation, equivalent to ~value in C.<br></p>

<h4>
<a id="user-content-syntax-106" class="anchor" href="#syntax-106" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.bnot(value)</p>

<h4>
<a id="user-content-parameters-106" class="anchor" href="#parameters-106" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the number to negate.</p>

<h4>
<a id="user-content-returns-106" class="anchor" href="#returns-106" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the bitwise negated value of the number.</p>

<h4>
<a id="user-content-example-93" class="anchor" href="#example-93" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-106" class="anchor" href="#see-also-106" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitband" class="anchor" href="#bitband" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.band()</h2>

<h4>
<a id="user-content-description-107" class="anchor" href="#description-107" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Bitwise AND, equivalent to val1 &amp; val2 &amp; ... &amp; valn in C.<br></p>

<h4>
<a id="user-content-syntax-107" class="anchor" href="#syntax-107" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.band(val1, val2, ... valn)</p>

<h4>
<a id="user-content-parameters-107" class="anchor" href="#parameters-107" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>val1: first AND argument.<br>
val2: second AND argument.<br>
valn: nth AND argument.</p>

<h4>
<a id="user-content-returns-107" class="anchor" href="#returns-107" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the bitwise AND of all the arguments.</p>

<h4>
<a id="user-content-example-94" class="anchor" href="#example-94" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-107" class="anchor" href="#see-also-107" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitbor" class="anchor" href="#bitbor" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.bor()</h2>

<h4>
<a id="user-content-description-108" class="anchor" href="#description-108" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Bitwise OR, equivalent to val1 | val2 | ... | valn in C.<br></p>

<h4>
<a id="user-content-syntax-108" class="anchor" href="#syntax-108" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.bor(val1, val2, ... valn)</p>

<h4>
<a id="user-content-parameters-108" class="anchor" href="#parameters-108" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>val1: first OR argument.<br>
val2: second OR argument.<br>
valn: nth OR argument.</p>

<h4>
<a id="user-content-returns-108" class="anchor" href="#returns-108" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the bitwise OR of all the arguments.</p>

<h4>
<a id="user-content-example-95" class="anchor" href="#example-95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-108" class="anchor" href="#see-also-108" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitbxor" class="anchor" href="#bitbxor" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.bxor()</h2>

<h4>
<a id="user-content-description-109" class="anchor" href="#description-109" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Bitwise XOR, equivalent to val1 ^ val2 ^ ... ^ valn in C.<br></p>

<h4>
<a id="user-content-syntax-109" class="anchor" href="#syntax-109" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.bxor(val1, val2, ... valn)</p>

<h4>
<a id="user-content-parameters-109" class="anchor" href="#parameters-109" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>val1: first XOR argument.<br>
val2: second XOR argument.<br>
valn: nth XOR argument.</p>

<h4>
<a id="user-content-returns-109" class="anchor" href="#returns-109" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the bitwise XOR of all the arguments.</p>

<h4>
<a id="user-content-example-96" class="anchor" href="#example-96" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-109" class="anchor" href="#see-also-109" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitlshift" class="anchor" href="#bitlshift" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.lshift()</h2>

<h4>
<a id="user-content-description-110" class="anchor" href="#description-110" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Left-shift a number, equivalent to value &lt;&lt; shift in C.<br></p>

<h4>
<a id="user-content-syntax-110" class="anchor" href="#syntax-110" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.lshift(value, shift)</p>

<h4>
<a id="user-content-parameters-110" class="anchor" href="#parameters-110" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the value to shift.<br>
shift: positions to shift.</p>

<h4>
<a id="user-content-returns-110" class="anchor" href="#returns-110" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the number shifted left</p>

<h4>
<a id="user-content-example-97" class="anchor" href="#example-97" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-110" class="anchor" href="#see-also-110" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitrshift" class="anchor" href="#bitrshift" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.rshift()</h2>

<h4>
<a id="user-content-description-111" class="anchor" href="#description-111" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Logical right shift a number, equivalent to ( unsigned )value &gt;&gt; shift in C.<br></p>

<h4>
<a id="user-content-syntax-111" class="anchor" href="#syntax-111" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.rshift(value, shift)</p>

<h4>
<a id="user-content-parameters-111" class="anchor" href="#parameters-111" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the value to shift.<br>
shift: positions to shift.</p>

<h4>
<a id="user-content-returns-111" class="anchor" href="#returns-111" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the number shifted right (logically).</p>

<h4>
<a id="user-content-example-98" class="anchor" href="#example-98" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-111" class="anchor" href="#see-also-111" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitarshift" class="anchor" href="#bitarshift" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.arshift()</h2>

<h4>
<a id="user-content-description-112" class="anchor" href="#description-112" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Arithmetic right shift a number equivalent to value &gt;&gt; shift in C.<br></p>

<h4>
<a id="user-content-syntax-112" class="anchor" href="#syntax-112" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.arshift(value, shift)</p>

<h4>
<a id="user-content-parameters-112" class="anchor" href="#parameters-112" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the value to shift.<br>
shift: positions to shift.</p>

<h4>
<a id="user-content-returns-112" class="anchor" href="#returns-112" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the number shifted right (arithmetically).</p>

<h4>
<a id="user-content-example-99" class="anchor" href="#example-99" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-112" class="anchor" href="#see-also-112" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitbit" class="anchor" href="#bitbit" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.bit()</h2>

<h4>
<a id="user-content-description-113" class="anchor" href="#description-113" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Generate a number with a 1 bit (used for mask generation). Equivalent to 1 &lt;&lt; position in C.<br></p>

<h4>
<a id="user-content-syntax-113" class="anchor" href="#syntax-113" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.bit(position)</p>

<h4>
<a id="user-content-parameters-113" class="anchor" href="#parameters-113" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>position: position of the bit that will be set to 1.</p>

<h4>
<a id="user-content-returns-113" class="anchor" href="#returns-113" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: a number with only one 1 bit at position (the rest are set to 0).</p>

<h4>
<a id="user-content-example-100" class="anchor" href="#example-100" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-113" class="anchor" href="#see-also-113" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitset" class="anchor" href="#bitset" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.set()</h2>

<h4>
<a id="user-content-description-114" class="anchor" href="#description-114" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Set bits in a number.<br></p>

<h4>
<a id="user-content-syntax-114" class="anchor" href="#syntax-114" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.set(value, pos1, pos2, ..., posn)</p>

<h4>
<a id="user-content-parameters-114" class="anchor" href="#parameters-114" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the base number.<br>
pos1: position of the first bit to set.<br>
pos2: position of the second bit to set.<br>
posn: position of the nth bit to set.</p>

<h4>
<a id="user-content-returns-114" class="anchor" href="#returns-114" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the number with the bit(s) set in the given position(s).</p>

<h4>
<a id="user-content-example-101" class="anchor" href="#example-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-114" class="anchor" href="#see-also-114" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitclear" class="anchor" href="#bitclear" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.clear()</h2>

<h4>
<a id="user-content-description-115" class="anchor" href="#description-115" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Clear bits in a number.<br></p>

<h4>
<a id="user-content-syntax-115" class="anchor" href="#syntax-115" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.clear(value, pos1, pos2, ..., posn)</p>

<h4>
<a id="user-content-parameters-115" class="anchor" href="#parameters-115" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the base number.<br>
pos1: position of the first bit to clear.<br>
pos2: position of the second bit to clear.<br>
posn: position of thet nth bit to clear.</p>

<h4>
<a id="user-content-returns-115" class="anchor" href="#returns-115" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: the number with the bit(s) cleared in the given position(s).</p>

<h4>
<a id="user-content-example-102" class="anchor" href="#example-102" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-115" class="anchor" href="#see-also-115" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitisset" class="anchor" href="#bitisset" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.isset()</h2>

<h4>
<a id="user-content-description-116" class="anchor" href="#description-116" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Test if a given bit is set.<br></p>

<h4>
<a id="user-content-syntax-116" class="anchor" href="#syntax-116" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.isset(value, position)</p>

<h4>
<a id="user-content-parameters-116" class="anchor" href="#parameters-116" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the value to test.<br>
position: bit position to test.</p>

<h4>
<a id="user-content-returns-116" class="anchor" href="#returns-116" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>boolean: true if the bit at the given position is 1, false otherwise.</p>

<h4>
<a id="user-content-example-103" class="anchor" href="#example-103" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-116" class="anchor" href="#see-also-116" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-bitisclear" class="anchor" href="#bitisclear" aria-hidden="true"><span class="octicon octicon-link"></span></a>bit.isclear()</h2>

<h4>
<a id="user-content-description-117" class="anchor" href="#description-117" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Test if a given bit is cleared.<br></p>

<h4>
<a id="user-content-syntax-117" class="anchor" href="#syntax-117" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>bit.isclear(value, position)</p>

<h4>
<a id="user-content-parameters-117" class="anchor" href="#parameters-117" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>value: the value to test.<br>
position: bit position to test.</p>

<h4>
<a id="user-content-returns-117" class="anchor" href="#returns-117" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>boolean: true if the bit at the given position is 0, false othewise.</p>

<h4>
<a id="user-content-example-104" class="anchor" href="#example-104" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-117" class="anchor" href="#see-also-117" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-spi-module-1" class="anchor" href="#spi-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>spi module</h1>

<h2>
<a id="user-content-constant-8" class="anchor" href="#constant-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>MASTER, SLAVE, CPHA_LOW, CPHA_HIGH, CPOL_LOW, CPOL_HIGH, DATABITS_8, DATABITS_16</p>

<h2>
<a id="user-content-spisetup" class="anchor" href="#spisetup" aria-hidden="true"><span class="octicon octicon-link"></span></a>spi.setup()</h2>

<h4>
<a id="user-content-description-118" class="anchor" href="#description-118" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>setup spi configuration.<br></p>

<h4>
<a id="user-content-syntax-118" class="anchor" href="#syntax-118" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>spi.setup( id, mode, cpol, cpha, databits, clock )</p>

<h4>
<a id="user-content-parameters-118" class="anchor" href="#parameters-118" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id: spi id number.<br>
mode: MASTER or SLAVE(not supported yet).<br>
cpol: CPOL_LOW or CPOL_HIGH, clock polarity.<br>
cpha: CPHA_HIGH or CPHA_LOW, clock phase.<br>
databits: DATABITS_8 or DATABITS_16.<br>
clock: spi clock (not supported yet).</p>

<h4>
<a id="user-content-returns-118" class="anchor" href="#returns-118" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: 1.</p>

<h4>
<a id="user-content-example-105" class="anchor" href="#example-105" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-118" class="anchor" href="#see-also-118" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-spisend" class="anchor" href="#spisend" aria-hidden="true"><span class="octicon octicon-link"></span></a>spi.send()</h2>

<h4>
<a id="user-content-description-119" class="anchor" href="#description-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>send data to spi.<br></p>

<h4>
<a id="user-content-syntax-119" class="anchor" href="#syntax-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>wrote = spi.send( id, data1, [data2], ..., [datan] )</p>

<h4>
<a id="user-content-parameters-119" class="anchor" href="#parameters-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id: spi id number.<br>
data: data can be either a string, a table or an 8-bit number</p>

<h4>
<a id="user-content-returns-119" class="anchor" href="#returns-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>number: bytes writen count.</p>

<h4>
<a id="user-content-example-106" class="anchor" href="#example-106" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-119" class="anchor" href="#see-also-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-spirecv" class="anchor" href="#spirecv" aria-hidden="true"><span class="octicon octicon-link"></span></a>spi.recv()</h2>

<h4>
<a id="user-content-description-120" class="anchor" href="#description-120" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>recv data from spi.<br></p>

<h4>
<a id="user-content-syntax-120" class="anchor" href="#syntax-120" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>read = spi.recv( id, size )</p>

<h4>
<a id="user-content-parameters-120" class="anchor" href="#parameters-120" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>id: spi id number.<br>
size: data size want to read.</p>

<h4>
<a id="user-content-returns-120" class="anchor" href="#returns-120" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>string: string bytes read from spi.</p>

<h4>
<a id="user-content-example-107" class="anchor" href="#example-107" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-120" class="anchor" href="#see-also-120" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-mqtt-module-1" class="anchor" href="#mqtt-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt module</h1>

<h2>
<a id="user-content-constant-9" class="anchor" href="#constant-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<h2>
<a id="user-content-mqttclient" class="anchor" href="#mqttclient" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.Client()</h2>

<h4>
<a id="user-content-description-121" class="anchor" href="#description-121" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Create a MQTT client.
The client adheres to version 3.1.1 of the MQTT protocol, make sure that your broker supports and is correctly configured for version 3.1.1 of the MQTT protocol. The client is incompatible with brokers running version 3.1 of the MQTT protocol.</p>

<h4>
<a id="user-content-syntax-121" class="anchor" href="#syntax-121" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt.Client(clientid, keepalive, user, pass)</p>

<h4>
<a id="user-content-parameters-121" class="anchor" href="#parameters-121" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>clientid: the client id.<br>
keepalive: keepalive second, a number.<br>
user: user name, a string.<br>
pass: user password, a string.</p>

<h4>
<a id="user-content-returns-121" class="anchor" href="#returns-121" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>mqtt client.</p>

<h4>
<a id="user-content-example-108" class="anchor" href="#example-108" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c">-- init mqtt client with keepalive timer 120sec</span>
m <span class="pl-k">=</span> mqtt.<span class="pl-c1">Client</span>(<span class="pl-s"><span class="pl-pds">"</span>clientid<span class="pl-pds">"</span></span>, <span class="pl-c1">120</span>, <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>)

<span class="pl-c">-- setup Last Will and Testament (optional)</span>
<span class="pl-c">-- Broker will publish a message with qos = 0, retain = 0, data = "offline" </span>
<span class="pl-c">-- to topic "/lwt" if client don't send keepalive packet</span>
m:<span class="pl-c1">lwt</span>(<span class="pl-s"><span class="pl-pds">"</span>/lwt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>offline<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>)

m:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>connect<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">con</span>) <span class="pl-c1">print</span> (<span class="pl-s"><span class="pl-pds">"</span>connected<span class="pl-pds">"</span></span>) <span class="pl-k">end</span>)
m:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>offline<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">con</span>) <span class="pl-c1">print</span> (<span class="pl-s"><span class="pl-pds">"</span>offline<span class="pl-pds">"</span></span>) <span class="pl-k">end</span>)

<span class="pl-c">-- on publish message receive event</span>
m:<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">"</span>message<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">conn, topic, data</span>) 
  <span class="pl-c1">print</span>(topic <span class="pl-k">..</span> <span class="pl-s"><span class="pl-pds">"</span>:<span class="pl-pds">"</span></span> ) 
  <span class="pl-k">if</span> data <span class="pl-k">~=</span> <span class="pl-c1">nil</span> <span class="pl-k">then</span>
    <span class="pl-c1">print</span>(data)
  <span class="pl-k">end</span>
<span class="pl-k">end</span>)

<span class="pl-c">-- for secure: m:connect("192.168.11.118", 1880, 1)</span>
m:<span class="pl-c1">connect</span>(<span class="pl-s"><span class="pl-pds">"</span>192.168.11.118<span class="pl-pds">"</span></span>, <span class="pl-c1">1880</span>, <span class="pl-c1">0</span>, <span class="pl-k">function</span>(<span class="pl-smi">conn</span>) <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>connected<span class="pl-pds">"</span></span>) <span class="pl-k">end</span>)

<span class="pl-c">-- subscribe topic with qos = 0</span>
m:<span class="pl-c1">subscribe</span>(<span class="pl-s"><span class="pl-pds">"</span>/topic<span class="pl-pds">"</span></span>,<span class="pl-c1">0</span>, <span class="pl-k">function</span>(<span class="pl-smi">conn</span>) <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>subscribe success<span class="pl-pds">"</span></span>) <span class="pl-k">end</span>)

<span class="pl-c">-- publish a message with data = hello, QoS = 0, retain = 0</span>
m:<span class="pl-c1">publish</span>(<span class="pl-s"><span class="pl-pds">"</span>/topic<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>,<span class="pl-c1">0</span>,<span class="pl-c1">0</span>, <span class="pl-k">function</span>(<span class="pl-smi">conn</span>) <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>sent<span class="pl-pds">"</span></span>) <span class="pl-k">end</span>)

m:<span class="pl-c1">close</span>();
<span class="pl-c">-- you can call m:connect again</span></pre></div>

<h4>
<a id="user-content-see-also-121" class="anchor" href="#see-also-121" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-mqtt-client-module" class="anchor" href="#mqtt-client-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt client module</h1>

<h2>
<a id="user-content-mqttclientlwt" class="anchor" href="#mqttclientlwt" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client:lwt()</h2>

<h4>
<a id="user-content-description-122" class="anchor" href="#description-122" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>setup Last Will and Testament (optional)<br>
Broker will publish a message with qos = 0, retain = 0, data = "offline" <br>
to topic "/lwt" if client don't send keepalive packet.</p>

<h4>
<a id="user-content-syntax-122" class="anchor" href="#syntax-122" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt:lwt(topic, message, qos, retain)</p>

<h4>
<a id="user-content-parameters-122" class="anchor" href="#parameters-122" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>topic: the topic to publish to, String.<br>
message: the message to publish, Buffer or String.<br>
qos: qos level, default 0.<br>
retain: retain flag, default 0.</p>

<h4>
<a id="user-content-returns-122" class="anchor" href="#returns-122" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil.</p>

<h4>
<a id="user-content-example-109" class="anchor" href="#example-109" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-122" class="anchor" href="#see-also-122" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-mqttclientconnect" class="anchor" href="#mqttclientconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client:connect()</h2>

<h4>
<a id="user-content-description-123" class="anchor" href="#description-123" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Connects to the broker specified by the given host, port, and secure options</p>

<h4>
<a id="user-content-syntax-123" class="anchor" href="#syntax-123" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt:connect( host, port, secure, function(client) )</p>

<h4>
<a id="user-content-parameters-123" class="anchor" href="#parameters-123" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>host: host domain or ip, string.<br>
port: number, broker port.<br>
secure: 0 or 1, default 0.<br>
function(client): when connected, call this function.</p>

<h4>
<a id="user-content-returns-123" class="anchor" href="#returns-123" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil.</p>

<h4>
<a id="user-content-example-110" class="anchor" href="#example-110" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-123" class="anchor" href="#see-also-123" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-mqttclientclose" class="anchor" href="#mqttclientclose" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client:close()</h2>

<h4>
<a id="user-content-description-124" class="anchor" href="#description-124" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>close connection to the broker.</p>

<h4>
<a id="user-content-syntax-124" class="anchor" href="#syntax-124" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt:close()</p>

<h4>
<a id="user-content-parameters-124" class="anchor" href="#parameters-124" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>nil</p>

<h4>
<a id="user-content-returns-124" class="anchor" href="#returns-124" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil.</p>

<h4>
<a id="user-content-example-111" class="anchor" href="#example-111" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-124" class="anchor" href="#see-also-124" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-mqttclientpublish" class="anchor" href="#mqttclientpublish" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client:publish()</h2>

<h4>
<a id="user-content-description-125" class="anchor" href="#description-125" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Publish a message</p>

<h4>
<a id="user-content-syntax-125" class="anchor" href="#syntax-125" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt:publish( topic, payload, qos, retain, function(client) )</p>

<h4>
<a id="user-content-parameters-125" class="anchor" href="#parameters-125" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>topic: the topic to publish to, string<br>
message: the message to publish, string<br>
qos: qos level, default 0<br>
retain: retain flag, default 0<br>
function(client): callback fired when PUBACK received.<br></p>

<h4>
<a id="user-content-returns-125" class="anchor" href="#returns-125" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil.</p>

<h4>
<a id="user-content-example-112" class="anchor" href="#example-112" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-125" class="anchor" href="#see-also-125" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-mqttclientsubscribe" class="anchor" href="#mqttclientsubscribe" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client:subscribe()</h2>

<h4>
<a id="user-content-description-126" class="anchor" href="#description-126" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Subscribe to a topic or topics</p>

<h4>
<a id="user-content-syntax-126" class="anchor" href="#syntax-126" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt:subscribe(topic, qos, function(client, topic, message))</p>

<h4>
<a id="user-content-parameters-126" class="anchor" href="#parameters-126" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>topic: a string topic to subscribe to<br>
qos: qos subscription level, default 0<br>
function(client, topic, message): callback fired when message received.<br></p>

<h4>
<a id="user-content-returns-126" class="anchor" href="#returns-126" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil.</p>

<h4>
<a id="user-content-example-113" class="anchor" href="#example-113" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-126" class="anchor" href="#see-also-126" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h2>
<a id="user-content-mqttclienton" class="anchor" href="#mqttclienton" aria-hidden="true"><span class="octicon octicon-link"></span></a>mqtt.client:on()</h2>

<h4>
<a id="user-content-description-127" class="anchor" href="#description-127" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>register callback function to event.</p>

<h4>
<a id="user-content-syntax-127" class="anchor" href="#syntax-127" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>mqtt:on(event, function(client, [topic], [message]))</p>

<h4>
<a id="user-content-parameters-127" class="anchor" href="#parameters-127" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>event: string, which can be: "connect", "message", "offline"<br>
function cb(client, [topic], [message]): callback function. The first param is the client.<br>
If event is "message",  the 2nd and 3rd param are received topic and message in string.</p>

<h4>
<a id="user-content-returns-127" class="anchor" href="#returns-127" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil.</p>

<h4>
<a id="user-content-example-114" class="anchor" href="#example-114" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<h4>
<a id="user-content-see-also-127" class="anchor" href="#see-also-127" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong>   <a href=""></a></p>

<h1>
<a id="user-content-ws2812-module-1" class="anchor" href="#ws2812-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>WS2812 Module</h1>

<p><a></a></p>

<h2>
<a id="user-content-ws2812writergb" class="anchor" href="#ws2812writergb" aria-hidden="true"><span class="octicon octicon-link"></span></a>ws2812.writergb()</h2>

<h4>
<a id="user-content-description-128" class="anchor" href="#description-128" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Send the RGB Data in 8bits to WS2812</p>

<h4>
<a id="user-content-syntax-128" class="anchor" href="#syntax-128" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>ws2812.writergb(pin, string.char(R1,G1,B1(,R2,G2,B2...)) )</p>

<h4>
<a id="user-content-parameters-128" class="anchor" href="#parameters-128" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin = Supported all the PINs(0,1,2...)<br>
R1 = The first WS2812 though the line's Red Channel's Parameters（0-255）<br>
G1 = The first WS2812 though the line's Green Channel's Parameters（0-255） <br>
B1 = The first WS2812 though the line's Blue Channel's Parameters（0-255） <br>
... You can connect a lot of WS2812...<br>
R2,G2,B2 is the next WS2812's Red, Green and Blue Channel's Parameters <br></p>

<h4>
<a id="user-content-return" class="anchor" href="#return" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>nil</p>

<p><a></a></p>

<h2>
<a id="user-content-cjsonencode" class="anchor" href="#cjsonencode" aria-hidden="true"><span class="octicon octicon-link"></span></a>cjson.encode()</h2>

<h4>
<a id="user-content-description-129" class="anchor" href="#description-129" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Encode table to json string</p>

<h4>
<a id="user-content-syntax-129" class="anchor" href="#syntax-129" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>cjson.encode(table)</p>

<h4>
<a id="user-content-parameters-129" class="anchor" href="#parameters-129" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>table = data to encode<br></p>

<h4>
<a id="user-content-return-1" class="anchor" href="#return-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>json string</p>

<h4>
<a id="user-content-example-115" class="anchor" href="#example-115" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c1">print</span>(cjson.<span class="pl-c1">encode</span>({key<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>}))</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-cjsondecode" class="anchor" href="#cjsondecode" aria-hidden="true"><span class="octicon octicon-link"></span></a>cjson.decode()</h2>

<h4>
<a id="user-content-description-130" class="anchor" href="#description-130" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Decode json string to table</p>

<h4>
<a id="user-content-syntax-130" class="anchor" href="#syntax-130" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>cjson.decode(s)</p>

<h4>
<a id="user-content-parameters-130" class="anchor" href="#parameters-130" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>s = string to decode<br></p>

<h4>
<a id="user-content-return-2" class="anchor" href="#return-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>Lua table</p>

<h4>
<a id="user-content-example-116" class="anchor" href="#example-116" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>t<span class="pl-k">=</span> cjson.<span class="pl-c1">decode</span>(<span class="pl-s"><span class="pl-pds">"</span>{<span class="pl-cce">\"</span>key<span class="pl-cce">\"</span>:<span class="pl-cce">\"</span>value<span class="pl-cce">\"</span>}<span class="pl-pds">"</span></span>)
<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(t) <span class="pl-k">do</span> <span class="pl-c1">print</span>(k,v) <span class="pl-k">end</span></pre></div>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-crypto-module-1" class="anchor" href="#crypto-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Crypto Module</h1>

<p><a></a></p>

<h2>
<a id="user-content-cryptohash" class="anchor" href="#cryptohash" aria-hidden="true"><span class="octicon octicon-link"></span></a>crypto.hash()</h2>

<h4>
<a id="user-content-description-131" class="anchor" href="#description-131" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Compute a cryptographic hash of a Lua string.</p>

<h4>
<a id="user-content-syntax-131" class="anchor" href="#syntax-131" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>digest = crypto.hash(algo, str)</p>

<h4>
<a id="user-content-parameters-131" class="anchor" href="#parameters-131" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>algo = hash algorithm to use, case insensitive string <br>
str = data to calculate the hash for<br></p>

<p>Supported hash algorithms are:</p>

<ul>
<li>MD2 (not available by default, has to be explicitly enabled in user_config.h)</li>
<li>MD5</li>
<li>SHA1</li>
<li>SHA256, SHA384, SHA512 (unless disabled in user_config.h)</li>
</ul>

<h4>
<a id="user-content-return-3" class="anchor" href="#return-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>A binary string containing the message digest. To obtain the textual version (ASCII hex characters), please use <a href="#crypto_tohex">crypto.toHex()</a>.</p>

<h4>
<a id="user-content-example-117" class="anchor" href="#example-117" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c1">print</span>(crypto.<span class="pl-c1">toHex</span>(crypto.<span class="pl-c1">hash</span>(<span class="pl-s"><span class="pl-pds">"</span>sha1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>)))</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-cryptohmac" class="anchor" href="#cryptohmac" aria-hidden="true"><span class="octicon octicon-link"></span></a>crypto.hmac()</h2>

<h4>
<a id="user-content-description-132" class="anchor" href="#description-132" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Compute a HMAC (Hashed Message Authentication Code) signature for a Lua string.</p>

<h4>
<a id="user-content-syntax-132" class="anchor" href="#syntax-132" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>signature = crypto.hmac(algo, str, key)</p>

<h4>
<a id="user-content-parameters-132" class="anchor" href="#parameters-132" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>algo = hash algorithm to use, case insensitive string <br>
str = data to calculate the hash for<br>
key = key to use for signing, may be a binary string<br></p>

<p>Supported hash algorithms are:</p>

<ul>
<li>MD2 (not available by default, has to be explicitly enabled in user_config.h)</li>
<li>MD5</li>
<li>SHA1</li>
<li>SHA256, SHA384, SHA512 (unless disabled in user_config.h)</li>
</ul>

<h4>
<a id="user-content-return-4" class="anchor" href="#return-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>A binary string containing the HMAC signature. Use <a href="#crypto_tohex">crypto.toHex()</a> to obtain the textual version.</p>

<h4>
<a id="user-content-example-118" class="anchor" href="#example-118" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c1">print</span>(crypto.<span class="pl-c1">toHex</span>(crypto.<span class="pl-c1">hmac</span>(<span class="pl-s"><span class="pl-pds">"</span>sha1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>mysecret<span class="pl-pds">"</span></span>)))</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-cryptomask" class="anchor" href="#cryptomask" aria-hidden="true"><span class="octicon octicon-link"></span></a>crypto.mask()</h2>

<h4>
<a id="user-content-description-133" class="anchor" href="#description-133" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Applies an XOR mask to a Lua string.</p>

<h4>
<a id="user-content-syntax-133" class="anchor" href="#syntax-133" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>masked = crypto.mask (message, mask)</p>

<h4>
<a id="user-content-parameters-133" class="anchor" href="#parameters-133" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>message = message to mask<br>
mask = the mask to apply, repeated if shorter than the message<br></p>

<h4>
<a id="user-content-return-5" class="anchor" href="#return-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>The masked message, as a binary string. Use <a href="#crypto_tohex">crypto.toHex()</a> to get a textual representation of it.</p>

<h4>
<a id="user-content-example-119" class="anchor" href="#example-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c1">print</span>(crypto.<span class="pl-c1">toHex</span>(crypto.<span class="pl-c1">mask</span>(<span class="pl-s"><span class="pl-pds">"</span>some message to obscure<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>X0Y7<span class="pl-pds">"</span></span>)))</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-cryptotohex" class="anchor" href="#cryptotohex" aria-hidden="true"><span class="octicon octicon-link"></span></a>crypto.toHex()</h2>

<h4>
<a id="user-content-description-134" class="anchor" href="#description-134" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Provides an ASCII hex representation of a (binary) Lua string. Each byte in the input string is represented as two hex characters in the output.</p>

<h4>
<a id="user-content-syntax-134" class="anchor" href="#syntax-134" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>hexstr = crypto.toHex(binary)</p>

<h4>
<a id="user-content-parameters-134" class="anchor" href="#parameters-134" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>binary = input string to get hex representation for<br></p>

<h4>
<a id="user-content-return-6" class="anchor" href="#return-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>An ASCII hex string.</p>

<h4>
<a id="user-content-example-120" class="anchor" href="#example-120" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c1">print</span>(crypto.<span class="pl-c1">toHex</span>(crypto.<span class="pl-c1">hash</span>(<span class="pl-s"><span class="pl-pds">"</span>sha1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>)))</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-cryptotobase64" class="anchor" href="#cryptotobase64" aria-hidden="true"><span class="octicon octicon-link"></span></a>crypto.toBase64()</h2>

<h4>
<a id="user-content-description-135" class="anchor" href="#description-135" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Provides a Base64 representation of a (binary) Lua string.</p>

<h4>
<a id="user-content-syntax-135" class="anchor" href="#syntax-135" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>b64 = crypto.toBase64(binary)</p>

<h4>
<a id="user-content-parameters-135" class="anchor" href="#parameters-135" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>binary = input string to Base64 encode<br></p>

<h4>
<a id="user-content-return-7" class="anchor" href="#return-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>A Base64 encoded string.</p>

<h4>
<a id="user-content-example-121" class="anchor" href="#example-121" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre><span class="pl-c1">print</span>(crypto.<span class="pl-c1">toBase64</span>(crypto.<span class="pl-c1">hash</span>(<span class="pl-s"><span class="pl-pds">"</span>sha1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>)))</pre></div>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-u8g-module-1" class="anchor" href="#u8g-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g module</h1>

<h2>
<a id="user-content-constant-10" class="anchor" href="#constant-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>u8g.DRAW_UPPER_RIGHT, u8g.DRAW_UPPER_LEFT, u8g.DRAW_LOWER_RIGHT, u8g.DRAW_LOWER_LEFT, u8g.DRAW_ALL,
u8g.MODE_BW, u8g.MODE_GRAY2BIT</p>

<p>u8g.font_6x10, ...</p>

<p><a></a></p>

<h2>
<a id="user-content-u8gssd1306_128x64_i2c" class="anchor" href="#u8gssd1306_128x64_i2c" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g.ssd1306_128x64_i2c()</h2>

<h4>
<a id="user-content-description-136" class="anchor" href="#description-136" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Initialize an SSD1306 128x64 display via I2C.</p>

<h4>
<a id="user-content-syntax-136" class="anchor" href="#syntax-136" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>u8g.ssd1306_128x64_i2c(sla)</p>

<h4>
<a id="user-content-parameters-136" class="anchor" href="#parameters-136" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>sla: I2C slave address.</p>

<h4>
<a id="user-content-returns-128" class="anchor" href="#returns-128" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>u8g display.</p>

<h4>
<a id="user-content-example-122" class="anchor" href="#example-122" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>sda <span class="pl-k">=</span> <span class="pl-c1">5</span>
scl <span class="pl-k">=</span> <span class="pl-c1">6</span>
i2c.<span class="pl-c1">setup</span>(<span class="pl-c1">0</span>, sda, scl, i2c.<span class="pl-smi">SLOW</span>)

sla <span class="pl-k">=</span><span class="pl-c1"> 0x3c</span>
disp <span class="pl-k">=</span> u8g.<span class="pl-c1">ssd1306_128x64_i2c</span>(sla)</pre></div>

<h4>
<a id="user-content-see-also-128" class="anchor" href="#see-also-128" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-u8gssd1306_128x64_spi" class="anchor" href="#u8gssd1306_128x64_spi" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g.ssd1306_128x64_spi()</h2>

<h4>
<a id="user-content-description-137" class="anchor" href="#description-137" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Initialize an SSD1306 128x64 display via SPI.</p>

<h4>
<a id="user-content-syntax-137" class="anchor" href="#syntax-137" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>u8g.ssd1306_128x64_spi(cs, dc, res)</p>

<h4>
<a id="user-content-parameters-137" class="anchor" href="#parameters-137" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>cs: GPIO pin for /CS.<br>
dc: GPIO pin for DC.<br>
res: GPIO pin for /RES.</p>

<h4>
<a id="user-content-returns-129" class="anchor" href="#returns-129" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>u8g display.</p>

<h4>
<a id="user-content-example-123" class="anchor" href="#example-123" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>spi.<span class="pl-c1">setup</span>(<span class="pl-c1">1</span>, spi.<span class="pl-smi">MASTER</span>, spi.<span class="pl-smi">CPOL_LOW</span>, spi.<span class="pl-smi">CPHA_LOW</span>, spi.<span class="pl-smi">DATABITS_8</span>, <span class="pl-c1">0</span>)

cs  <span class="pl-k">=</span> <span class="pl-c1">8</span> <span class="pl-c">-- GPIO15, pull-down 10k to GND</span>
dc  <span class="pl-k">=</span> <span class="pl-c1">4</span> <span class="pl-c">-- GPIO2</span>
res <span class="pl-k">=</span> <span class="pl-c1">0</span> <span class="pl-c">-- GPIO16, RES is optional YMMV</span>
disp <span class="pl-k">=</span> u8g.<span class="pl-c1">ssd1306_128x64_spi</span>(cs, dc, res)</pre></div>

<h4>
<a id="user-content-see-also-129" class="anchor" href="#see-also-129" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-u8g-display-sub-module" class="anchor" href="#u8g-display-sub-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g display sub-module</h1>

<p>The Lua bindings for this library closely follow u8glib's object oriented C++ API.
Visit the <a href="https://code.google.com/p/u8glib/">u8glib homepage</a> for technical details.</p>

<p><a></a></p>

<h2>
<a id="user-content-u8gdispdrawbitmap" class="anchor" href="#u8gdispdrawbitmap" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g.disp:drawBitmap()</h2>

<h4>
<a id="user-content-description-138" class="anchor" href="#description-138" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Draw a bitmap at the specified x/y position (upper left corner of the bitmap).
Parts of the bitmap may be outside the display boundaries. The bitmap is specified by the array bitmap. A cleared bit means: Do not draw a pixel. A set bit inside the array means: Write pixel with the current color index. For a monochrome display, the color index 0 will usually clear a pixel and the color index 1 will set a pixel.</p>

<h4>
<a id="user-content-syntax-138" class="anchor" href="#syntax-138" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>disp.drawBitmap(x, y, cnt, h, bitmap)</p>

<h4>
<a id="user-content-parameters-138" class="anchor" href="#parameters-138" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>x: X-position (left position of the bitmap).<br>
y: Y-position (upper position of the bitmap).<br>
cnt: Number of bytes of the bitmap in horizontal direction. The width of the bitmap is cnt*8.<br>
h: Height of the bitmap.<br>
bitmap: Bitmap data supplied as string.</p>

<h4>
<a id="user-content-returns-130" class="anchor" href="#returns-130" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-124" class="anchor" href="#example-124" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<p><code>lua_examples/u8glib/u8g_bitmaps.lua</code></p>

<h4>
<a id="user-content-see-also-130" class="anchor" href="#see-also-130" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><a href="https://code.google.com/p/u8glib/wiki/userreference#drawBitmap">u8glib drawBitmap()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-u8gdispdrawxbm" class="anchor" href="#u8gdispdrawxbm" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g.disp:drawXBM()</h2>

<h4>
<a id="user-content-description-139" class="anchor" href="#description-139" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Draw a XBM Bitmap. Position (x,y) is the upper left corner of the bitmap.
XBM contains monochrome, 1-bit bitmaps. This procedure only draws pixel values 1. The current color index is used for drawing (see setColorIndex). Pixel with value 0 are not drawn (transparent).</p>

<p>Bitmaps and XBMs are supplied as strings to <code>drawBitmap()</code> and <code>drawXBM()</code>. This off-loads all data handling from the u8g module to generic methods for binary files. In contrast to the source code based inclusion of XBMs into u8glib, it's required to provide precompiled binary files. This can be performed online with <a href="http://www.online-utility.org/image_converter.jsp">Online-Utility's Image Converter</a>: Convert from XBM to MONO format and upload the binary result with <a href="https://github.com/kmpm/nodemcu-uploader">nodemcu-uploader.py</a>.</p>

<h4>
<a id="user-content-syntax-139" class="anchor" href="#syntax-139" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>disp.drawXBM(x, y, w, h, bitmap)</p>

<h4>
<a id="user-content-parameters-139" class="anchor" href="#parameters-139" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>x: X-position (left position of the bitmap).<br>
y: Y-position (upper position of the bitmap).<br>
w: Width of the bitmap.<br>
h: Height of the bitmap.<br>
bitmap: XBM data supplied as string.</p>

<h4>
<a id="user-content-returns-131" class="anchor" href="#returns-131" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-125" class="anchor" href="#example-125" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<p><code>lua_examples/u8glib/u8g_bitmaps.lua</code></p>

<h4>
<a id="user-content-see-also-131" class="anchor" href="#see-also-131" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><a href="https://code.google.com/p/u8glib/wiki/userreference#drawXBM">u8glib drawXBM()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<p><a></a></p>

<h2>
<a id="user-content-u8gdispsetfont" class="anchor" href="#u8gdispsetfont" aria-hidden="true"><span class="octicon octicon-link"></span></a>u8g.disp:setFont()</h2>

<h4>
<a id="user-content-description-140" class="anchor" href="#description-140" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>u8glib comes with a wide range of fonts for small displays.
Since they need to be compiled into the firmware image, you'd need to include them in
<code>app/include/u8g_config.h</code> and recompile. Simply add the desired fonts to the font table:</p>

<div class="highlight highlight-c"><pre>#<span class="pl-k">define</span> <span class="pl-en">U8G_FONT_TABLE</span> \
    <span class="pl-en">U8G_FONT_TABLE_ENTRY</span>(font_6x10)  \
    U8G_FONT_TABLE_ENTRY(font_chikita)</pre></div>

<p>They'll be available as <code>u8g.&lt;font_name&gt;</code> in Lua.</p>

<h4>
<a id="user-content-syntax-140" class="anchor" href="#syntax-140" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>disp.setFont(font)</p>

<h4>
<a id="user-content-parameters-140" class="anchor" href="#parameters-140" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>font: Constant to indentify pre-compiled font.</p>

<h4>
<a id="user-content-returns-132" class="anchor" href="#returns-132" aria-hidden="true"><span class="octicon octicon-link"></span></a>Returns</h4>

<p>nil</p>

<h4>
<a id="user-content-example-126" class="anchor" href="#example-126" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>disp:<span class="pl-c1">setFont</span>(u8g.<span class="pl-smi">font_6x10</span>)</pre></div>

<h4>
<a id="user-content-see-also-132" class="anchor" href="#see-also-132" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also</h4>

<p><a href="https://code.google.com/p/u8glib/wiki/userreference#setFont">u8glib setFont()</a></p>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

<h1>
<a id="user-content-dht-module-1" class="anchor" href="#dht-module-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>dht module</h1>

<h2>
<a id="user-content-constant-11" class="anchor" href="#constant-11" aria-hidden="true"><span class="octicon octicon-link"></span></a>CONSTANT</h2>

<p>dht.OK, dht.ERROR_CHECKSUM, dht.ERROR_TIMEOUT<br></p>

<ul>
<li>dht.OK is 0, dht.ERROR_CHECKSUM is 1, dht.ERROR_TIMEOUT is 2</li>
</ul>

<p><a></a></p>

<h2>
<a id="user-content-dhtread" class="anchor" href="#dhtread" aria-hidden="true"><span class="octicon octicon-link"></span></a>dht.read()</h2>

<h4>
<a id="user-content-description-141" class="anchor" href="#description-141" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Read all kinds of dht sensors, including dht11, 21, 22, 33, 44 humidity temperature combo sensor.</p>

<h4>
<a id="user-content-syntax-141" class="anchor" href="#syntax-141" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>dht.read(pin)</p>

<h4>
<a id="user-content-parameters-141" class="anchor" href="#parameters-141" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: pin number of dht sensor (can't be 0), type is number<br></p>

<h4>
<a id="user-content-return-8" class="anchor" href="#return-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>integer of status, number of temperature, humidity, decimial of temperature, decimial of humidity.<br>
status is integer, temperature, humidity, decimial of temperature, decimial of humidity is number.
*Note: If using float firmware, the temperature, humidity already with decimial. </p>

<h4>
<a id="user-content-example-127" class="anchor" href="#example-127" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>
pin <span class="pl-k">=</span> <span class="pl-c1">5</span>
status,temp,humi,temp_decimial,humi_decimial <span class="pl-k">=</span> dht.<span class="pl-c1">read</span>(pin)
<span class="pl-k">if</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">OK</span> ) <span class="pl-k">then</span>
  <span class="pl-c">-- Integer firmware using this example</span>
  <span class="pl-c1">print</span>(     
    <span class="pl-c1">string.format</span>(
      <span class="pl-s"><span class="pl-pds">"</span>DHT Temperature:%d.%03d;Humidity:%d.%03d<span class="pl-cce">\r\n</span><span class="pl-pds">"</span></span>,
      <span class="pl-c1">math.floor</span>(temp),
      temp_decimial,
      <span class="pl-c1">math.floor</span>(humi),
      humi_decimial
    )
  )
  <span class="pl-c">-- Float firmware using this example</span>
  <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>DHT Temperature:<span class="pl-pds">"</span></span><span class="pl-k">..</span>temp<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>Humidity:<span class="pl-pds">"</span></span><span class="pl-k">..</span>humi)
<span class="pl-k">elseif</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">ERROR_CHECKSUM</span> ) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>( <span class="pl-s"><span class="pl-pds">"</span>DHT Checksum error.<span class="pl-pds">"</span></span> );
<span class="pl-k">elseif</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">ERROR_TIMEOUT</span> ) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>( <span class="pl-s"><span class="pl-pds">"</span>DHT Time out.<span class="pl-pds">"</span></span> );
<span class="pl-k">end</span>
</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-dhtread11" class="anchor" href="#dhtread11" aria-hidden="true"><span class="octicon octicon-link"></span></a>dht.read11()</h2>

<h4>
<a id="user-content-description-142" class="anchor" href="#description-142" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Read dht11 humidity temperature combo sensor.</p>

<h4>
<a id="user-content-syntax-142" class="anchor" href="#syntax-142" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>dht.read11(pin)</p>

<h4>
<a id="user-content-parameters-142" class="anchor" href="#parameters-142" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: pin number of dht sensor (can't be 0), type is number<br></p>

<h4>
<a id="user-content-return-9" class="anchor" href="#return-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>integer of status, number of temperature, humidity, decimial of temperature, decimial of humidity.<br>
status is integer, temperature, humidity, decimial of temperature, decimial of humidity is number.
*Note: If using float firmware, the temperature, humidity already with decimial. </p>

<h4>
<a id="user-content-example-128" class="anchor" href="#example-128" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>
pin <span class="pl-k">=</span> <span class="pl-c1">5</span>
status,temp,humi,temp_decimial,humi_decimial <span class="pl-k">=</span> dht.<span class="pl-c1">read11</span>(pin)
<span class="pl-k">if</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">OK</span> ) <span class="pl-k">then</span>
  <span class="pl-c">-- Integer firmware using this example</span>
  <span class="pl-c1">print</span>(     
    <span class="pl-c1">string.format</span>(
      <span class="pl-s"><span class="pl-pds">"</span>DHT Temperature:%d.%03d;Humidity:%d.%03d<span class="pl-cce">\r\n</span><span class="pl-pds">"</span></span>,
      <span class="pl-c1">math.floor</span>(temp),
      temp_decimial,
      <span class="pl-c1">math.floor</span>(humi),
      humi_decimial
    )
  )
  <span class="pl-c">-- Float firmware using this example</span>
  <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>DHT Temperature:<span class="pl-pds">"</span></span><span class="pl-k">..</span>temp<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>Humidity:<span class="pl-pds">"</span></span><span class="pl-k">..</span>humi)
<span class="pl-k">elseif</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">ERROR_CHECKSUM</span> ) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>( <span class="pl-s"><span class="pl-pds">"</span>DHT Checksum error.<span class="pl-pds">"</span></span> );
<span class="pl-k">elseif</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">ERROR_TIMEOUT</span> ) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>( <span class="pl-s"><span class="pl-pds">"</span>DHT Time out.<span class="pl-pds">"</span></span> );
<span class="pl-k">end</span>
</pre></div>

<p><a></a></p>

<h2>
<a id="user-content-dhtreadxx" class="anchor" href="#dhtreadxx" aria-hidden="true"><span class="octicon octicon-link"></span></a>dht.readxx()</h2>

<h4>
<a id="user-content-description-143" class="anchor" href="#description-143" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h4>

<p>Read all kinds of dht sensors, except dht11.</p>

<h4>
<a id="user-content-syntax-143" class="anchor" href="#syntax-143" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h4>

<p>dht.readxx(pin)</p>

<h4>
<a id="user-content-parameters-143" class="anchor" href="#parameters-143" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h4>

<p>pin: pin number of dht sensor (can't be 0), type is number<br></p>

<h4>
<a id="user-content-return-10" class="anchor" href="#return-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return</h4>

<p>integer of status, number of temperature, humidity, decimial of temperature, decimial of humidity.<br>
status is integer, temperature, humidity, decimial of temperature, decimial of humidity is number.
*Note: If using float firmware, the temperature, humidity already with decimial. </p>

<h4>
<a id="user-content-example-129" class="anchor" href="#example-129" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-lua"><pre>
pin <span class="pl-k">=</span> <span class="pl-c1">5</span>
status,temp,humi,temp_decimial,humi_decimial <span class="pl-k">=</span> dht.<span class="pl-c1">readxx</span>(pin)
<span class="pl-k">if</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">OK</span> ) <span class="pl-k">then</span>
  <span class="pl-c">-- Integer firmware using this example</span>
  <span class="pl-c1">print</span>(     
    <span class="pl-c1">string.format</span>(
      <span class="pl-s"><span class="pl-pds">"</span>DHT Temperature:%d.%03d;Humidity:%d.%03d<span class="pl-cce">\r\n</span><span class="pl-pds">"</span></span>,
      <span class="pl-c1">math.floor</span>(temp),
      temp_decimial,
      <span class="pl-c1">math.floor</span>(humi),
      humi_decimial
    )
  )
  <span class="pl-c">-- Float firmware using this example</span>
  <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>DHT Temperature:<span class="pl-pds">"</span></span><span class="pl-k">..</span>temp<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">"</span>Humidity:<span class="pl-pds">"</span></span><span class="pl-k">..</span>humi)
<span class="pl-k">elseif</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">ERROR_CHECKSUM</span> ) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>( <span class="pl-s"><span class="pl-pds">"</span>DHT Checksum error.<span class="pl-pds">"</span></span> );
<span class="pl-k">elseif</span>( status <span class="pl-k">==</span> dht.<span class="pl-smi">ERROR_TIMEOUT</span> ) <span class="pl-k">then</span>
  <span class="pl-c1">print</span>( <span class="pl-s"><span class="pl-pds">"</span>DHT Time out.<span class="pl-pds">"</span></span> );
<span class="pl-k">end</span>
</pre></div>

<p><strong>-</strong> <a href="#index">Back to Index</a></p>

    </div>

  </div>
  </div>
</div>
</div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>

    </ul>

    <a href="https://github.com" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
</a>
    <ul class="site-footer-links">
      <li>&copy; 2015 <span title="0.04580s from github-fe140-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact</a></li>
    </ul>
  </div>
</div>


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    
    

    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-3241a40a58a82e21daef3dd3cdca01bde189158793c1b6f9193fff2b5293cd1d.js"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github/index-d3ef45e52a74e2511c31a0051d5dfd10b60b12a8b8a738ead962c35e11dbcc1f.js"></script>
      
        <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/wiki/index-fccc87a2d360373ddfd26311a48123dd9c3b2644c70402861b793ad4eb346ec6.js"></script>

  </body>
</html>

